'use strict';

function onResize(handler) {
  var eventType = 'resize',
      addEventListener = this.addHandler(eventType, handler);

  if (addEventListener) {
    appendResizeObject(this);
  }
}

function offResize(handler) {
  var eventType = 'resize',
      removeEventListener = this.removeHandler(eventType, handler);

  if (removeEventListener) {
    removeResizeObject(this);
  }
}

var resizeMixin = {
  onResize: onResize,
  offResize: offResize
};

module.exports = resizeMixin;

function appendResizeObject(element) {
  var resizeObject = document.createElement('object'),
      domElement = element.domElement,
      style = 'display: block; \n                 position: absolute; \n                 top: 0; \n                 left: 0; \n                 height: 100%; \n                 width: 100%; \n                 overflow: hidden; \n                 pointer-events: none; \n                 z-index: -1;';

  resizeObject.setAttribute('style', style);
  resizeObject.data = 'about:blank';
  resizeObject.type = 'text/html';

  element.__resizeObject__ = resizeObject;

  resizeObject.onload = function () {
    resizeObjectLoadHandler(element);
  };

  domElement.appendChild(resizeObject);
}

function removeResizeObject(element) {
  var domElement = element.domElement,
      resizeObject = element.__resizeObject__,
      objectWindow = resizeObject.contentDocument.defaultView; ///

  objectWindow.removeEventListener('resize', resizeListener);

  domElement.removeChild(resizeObject);
}

function resizeObjectLoadHandler(element) {
  var resizeObject = element.__resizeObject__,
      resizeObjectWindow = resizeObject.contentDocument.defaultView; ///

  resizeObjectWindow.addEventListener('resize', function () {
    eventListener(element);
  });
}

function eventListener(element) {
  var width = element.getWidth(),
      height = element.getHeight(),
      targetElement = element,
      ///
  handlers = element.handlersMap['resize'];

  handlers.forEach(function (handler) {
    handler(width, height, targetElement);
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi9taXhpbi9yZXNpemUuanMiXSwibmFtZXMiOlsib25SZXNpemUiLCJoYW5kbGVyIiwiZXZlbnRUeXBlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImFkZEhhbmRsZXIiLCJhcHBlbmRSZXNpemVPYmplY3QiLCJvZmZSZXNpemUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicmVtb3ZlSGFuZGxlciIsInJlbW92ZVJlc2l6ZU9iamVjdCIsInJlc2l6ZU1peGluIiwibW9kdWxlIiwiZXhwb3J0cyIsImVsZW1lbnQiLCJyZXNpemVPYmplY3QiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJkb21FbGVtZW50Iiwic3R5bGUiLCJzZXRBdHRyaWJ1dGUiLCJkYXRhIiwidHlwZSIsIl9fcmVzaXplT2JqZWN0X18iLCJvbmxvYWQiLCJyZXNpemVPYmplY3RMb2FkSGFuZGxlciIsImFwcGVuZENoaWxkIiwib2JqZWN0V2luZG93IiwiY29udGVudERvY3VtZW50IiwiZGVmYXVsdFZpZXciLCJyZXNpemVMaXN0ZW5lciIsInJlbW92ZUNoaWxkIiwicmVzaXplT2JqZWN0V2luZG93IiwiZXZlbnRMaXN0ZW5lciIsIndpZHRoIiwiZ2V0V2lkdGgiLCJoZWlnaHQiLCJnZXRIZWlnaHQiLCJ0YXJnZXRFbGVtZW50IiwiaGFuZGxlcnMiLCJoYW5kbGVyc01hcCIsImZvckVhY2giXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLFNBQVNBLFFBQVQsQ0FBa0JDLE9BQWxCLEVBQTJCO0FBQ3pCLE1BQU1DLFlBQVksUUFBbEI7QUFBQSxNQUNNQyxtQkFBbUIsS0FBS0MsVUFBTCxDQUFnQkYsU0FBaEIsRUFBMkJELE9BQTNCLENBRHpCOztBQUdBLE1BQUlFLGdCQUFKLEVBQXNCO0FBQ3BCRSx1QkFBbUIsSUFBbkI7QUFDRDtBQUNGOztBQUVELFNBQVNDLFNBQVQsQ0FBbUJMLE9BQW5CLEVBQTRCO0FBQzFCLE1BQU1DLFlBQVksUUFBbEI7QUFBQSxNQUNNSyxzQkFBc0IsS0FBS0MsYUFBTCxDQUFtQk4sU0FBbkIsRUFBOEJELE9BQTlCLENBRDVCOztBQUdBLE1BQUlNLG1CQUFKLEVBQXlCO0FBQ3ZCRSx1QkFBbUIsSUFBbkI7QUFDRDtBQUNGOztBQUVELElBQU1DLGNBQWM7QUFDbEJWLFlBQVVBLFFBRFE7QUFFbEJNLGFBQVdBO0FBRk8sQ0FBcEI7O0FBS0FLLE9BQU9DLE9BQVAsR0FBaUJGLFdBQWpCOztBQUVBLFNBQVNMLGtCQUFULENBQTRCUSxPQUE1QixFQUFxQztBQUNuQyxNQUFNQyxlQUFlQyxTQUFTQyxhQUFULENBQXVCLFFBQXZCLENBQXJCO0FBQUEsTUFDTUMsYUFBYUosUUFBUUksVUFEM0I7QUFBQSxNQUVNQyxzU0FGTjs7QUFZQUosZUFBYUssWUFBYixDQUEwQixPQUExQixFQUFtQ0QsS0FBbkM7QUFDQUosZUFBYU0sSUFBYixHQUFvQixhQUFwQjtBQUNBTixlQUFhTyxJQUFiLEdBQW9CLFdBQXBCOztBQUVBUixVQUFRUyxnQkFBUixHQUEyQlIsWUFBM0I7O0FBRUFBLGVBQWFTLE1BQWIsR0FBc0IsWUFBVztBQUMvQkMsNEJBQXdCWCxPQUF4QjtBQUNELEdBRkQ7O0FBSUFJLGFBQVdRLFdBQVgsQ0FBdUJYLFlBQXZCO0FBQ0Q7O0FBRUQsU0FBU0wsa0JBQVQsQ0FBNEJJLE9BQTVCLEVBQXFDO0FBQ25DLE1BQU1JLGFBQWFKLFFBQVFJLFVBQTNCO0FBQUEsTUFDTUgsZUFBZUQsUUFBUVMsZ0JBRDdCO0FBQUEsTUFFTUksZUFBZVosYUFBYWEsZUFBYixDQUE2QkMsV0FGbEQsQ0FEbUMsQ0FHNkI7O0FBRWhFRixlQUFhbkIsbUJBQWIsQ0FBaUMsUUFBakMsRUFBMkNzQixjQUEzQzs7QUFFQVosYUFBV2EsV0FBWCxDQUF1QmhCLFlBQXZCO0FBQ0Q7O0FBRUQsU0FBU1UsdUJBQVQsQ0FBaUNYLE9BQWpDLEVBQTBDO0FBQ3hDLE1BQU1DLGVBQWVELFFBQVFTLGdCQUE3QjtBQUFBLE1BQ01TLHFCQUFxQmpCLGFBQWFhLGVBQWIsQ0FBNkJDLFdBRHhELENBRHdDLENBRThCOztBQUV0RUcscUJBQW1CNUIsZ0JBQW5CLENBQW9DLFFBQXBDLEVBQThDLFlBQVc7QUFDdkQ2QixrQkFBY25CLE9BQWQ7QUFDRCxHQUZEO0FBR0Q7O0FBRUQsU0FBU21CLGFBQVQsQ0FBdUJuQixPQUF2QixFQUFnQztBQUM5QixNQUFNb0IsUUFBUXBCLFFBQVFxQixRQUFSLEVBQWQ7QUFBQSxNQUNNQyxTQUFTdEIsUUFBUXVCLFNBQVIsRUFEZjtBQUFBLE1BRU1DLGdCQUFnQnhCLE9BRnRCO0FBQUEsTUFFK0I7QUFDekJ5QixhQUFXekIsUUFBUTBCLFdBQVIsQ0FBb0IsUUFBcEIsQ0FIakI7O0FBS0FELFdBQVNFLE9BQVQsQ0FBaUIsVUFBU3ZDLE9BQVQsRUFBaUI7QUFDaENBLFlBQVFnQyxLQUFSLEVBQWVFLE1BQWYsRUFBdUJFLGFBQXZCO0FBQ0QsR0FGRDtBQUdEIiwiZmlsZSI6InJlc2l6ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gb25SZXNpemUoaGFuZGxlcikge1xuICBjb25zdCBldmVudFR5cGUgPSAncmVzaXplJyxcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lciA9IHRoaXMuYWRkSGFuZGxlcihldmVudFR5cGUsIGhhbmRsZXIpO1xuXG4gIGlmIChhZGRFdmVudExpc3RlbmVyKSB7XG4gICAgYXBwZW5kUmVzaXplT2JqZWN0KHRoaXMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG9mZlJlc2l6ZShoYW5kbGVyKSB7XG4gIGNvbnN0IGV2ZW50VHlwZSA9ICdyZXNpemUnLFxuICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyID0gdGhpcy5yZW1vdmVIYW5kbGVyKGV2ZW50VHlwZSwgaGFuZGxlcik7XG5cbiAgaWYgKHJlbW92ZUV2ZW50TGlzdGVuZXIpIHtcbiAgICByZW1vdmVSZXNpemVPYmplY3QodGhpcyk7XG4gIH1cbn1cblxuY29uc3QgcmVzaXplTWl4aW4gPSB7XG4gIG9uUmVzaXplOiBvblJlc2l6ZSxcbiAgb2ZmUmVzaXplOiBvZmZSZXNpemVcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gcmVzaXplTWl4aW47XG5cbmZ1bmN0aW9uIGFwcGVuZFJlc2l6ZU9iamVjdChlbGVtZW50KSB7XG4gIGNvbnN0IHJlc2l6ZU9iamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29iamVjdCcpLFxuICAgICAgICBkb21FbGVtZW50ID0gZWxlbWVudC5kb21FbGVtZW50LFxuICAgICAgICBzdHlsZSA9IGBkaXNwbGF5OiBibG9jazsgXG4gICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsgXG4gICAgICAgICAgICAgICAgIHRvcDogMDsgXG4gICAgICAgICAgICAgICAgIGxlZnQ6IDA7IFxuICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7IFxuICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsgXG4gICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47IFxuICAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTsgXG4gICAgICAgICAgICAgICAgIHotaW5kZXg6IC0xO2A7XG5cbiAgcmVzaXplT2JqZWN0LnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBzdHlsZSk7XG4gIHJlc2l6ZU9iamVjdC5kYXRhID0gJ2Fib3V0OmJsYW5rJztcbiAgcmVzaXplT2JqZWN0LnR5cGUgPSAndGV4dC9odG1sJztcblxuICBlbGVtZW50Ll9fcmVzaXplT2JqZWN0X18gPSByZXNpemVPYmplY3Q7XG5cbiAgcmVzaXplT2JqZWN0Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJlc2l6ZU9iamVjdExvYWRIYW5kbGVyKGVsZW1lbnQpXG4gIH07XG5cbiAgZG9tRWxlbWVudC5hcHBlbmRDaGlsZChyZXNpemVPYmplY3QpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVSZXNpemVPYmplY3QoZWxlbWVudCkge1xuICBjb25zdCBkb21FbGVtZW50ID0gZWxlbWVudC5kb21FbGVtZW50LFxuICAgICAgICByZXNpemVPYmplY3QgPSBlbGVtZW50Ll9fcmVzaXplT2JqZWN0X18sXG4gICAgICAgIG9iamVjdFdpbmRvdyA9IHJlc2l6ZU9iamVjdC5jb250ZW50RG9jdW1lbnQuZGVmYXVsdFZpZXc7ICAvLy9cblxuICBvYmplY3RXaW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcmVzaXplTGlzdGVuZXIpO1xuXG4gIGRvbUVsZW1lbnQucmVtb3ZlQ2hpbGQocmVzaXplT2JqZWN0KTtcbn1cblxuZnVuY3Rpb24gcmVzaXplT2JqZWN0TG9hZEhhbmRsZXIoZWxlbWVudCkge1xuICBjb25zdCByZXNpemVPYmplY3QgPSBlbGVtZW50Ll9fcmVzaXplT2JqZWN0X18sXG4gICAgICAgIHJlc2l6ZU9iamVjdFdpbmRvdyA9IHJlc2l6ZU9iamVjdC5jb250ZW50RG9jdW1lbnQuZGVmYXVsdFZpZXc7ICAvLy9cblxuICByZXNpemVPYmplY3RXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24oKSB7XG4gICAgZXZlbnRMaXN0ZW5lcihlbGVtZW50KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGV2ZW50TGlzdGVuZXIoZWxlbWVudCkge1xuICBjb25zdCB3aWR0aCA9IGVsZW1lbnQuZ2V0V2lkdGgoKSxcbiAgICAgICAgaGVpZ2h0ID0gZWxlbWVudC5nZXRIZWlnaHQoKSxcbiAgICAgICAgdGFyZ2V0RWxlbWVudCA9IGVsZW1lbnQsIC8vL1xuICAgICAgICBoYW5kbGVycyA9IGVsZW1lbnQuaGFuZGxlcnNNYXBbJ3Jlc2l6ZSddO1xuXG4gIGhhbmRsZXJzLmZvckVhY2goZnVuY3Rpb24oaGFuZGxlcil7XG4gICAgaGFuZGxlcih3aWR0aCwgaGVpZ2h0LCB0YXJnZXRFbGVtZW50KTtcbiAgfSk7XG59XG4iXX0=