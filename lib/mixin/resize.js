'use strict';

function onResize(handler, object) {
  var intermediateHandler = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultIntermediateResizeHandler;

  var element = this,
      ///
  resizeEventListeners = findResizeEventListeners(element);

  if (resizeEventListeners.length === 0) {
    addResizeObject(element);
  }

  var eventType = 'resize';

  this.addEventListener(eventType, handler, object, intermediateHandler);
}

function offResize(handler, object) {
  var eventType = 'resize';

  this.removeEventListener(eventType, handler, object);

  var element = this,
      ///
  resizeEventListeners = findResizeEventListeners(element);

  if (resizeEventListeners.length === 0) {
    removeResizeObject(element);
  }
}

var resizeMixin = {
  onResize: onResize,
  offResize: offResize
};

module.exports = resizeMixin;

function addResizeObject(element) {
  var resizeObject = document.createElement('object'),
      domElement = element.getDOMElement(),
      style = 'display: block; \n                 position: absolute; \n                 top: 0; \n                 left: 0; \n                 height: 100%; \n                 width: 100%; \n                 overflow: hidden; \n                 pointer-events: none; \n                 z-index: -1;',
      data = 'about:blank',
      type = 'text/html';

  resizeObject.setAttribute('style', style);
  resizeObject.data = data;
  resizeObject.type = type;

  element.__resizeObject__ = resizeObject;

  resizeObject.onload = function () {
    resizeObjectLoadHandler(element);
  };

  domElement.appendChild(resizeObject);
}

function removeResizeObject(element) {
  var domElement = element.getDOMElement(),
      resizeObject = element.__resizeObject__,
      objectWindow = resizeObject.contentDocument.defaultView; ///

  objectWindow.removeEventListener('resize', resizeEventListener);

  domElement.removeChild(resizeObject);
}

function resizeObjectLoadHandler(element) {
  var resizeObject = element.__resizeObject__,
      resizeObjectWindow = resizeObject.contentDocument.defaultView; ///

  resizeObjectWindow.addEventListener('resize', function (event) {
    var resizeEventListeners = findResizeEventListeners(element);

    resizeEventListeners.forEach(function (resizeEventListener) {
      resizeEventListener(event);
    });
  });
}

function defaultIntermediateResizeHandler(handler, event, targetElement) {
  var window = targetElement,
      ///
  width = window.getWidth(),
      height = window.getHeight();

  handler(width, height, event, targetElement);
}

function findResizeEventListeners(element) {
  var resizeEventListeners = [];

  if (element.hasOwnProperty('eventListeners')) {
    var eventListeners = element.eventListeners; ///

    eventListeners.forEach(function (eventListener) {
      if (eventListener.eventType === 'resize') {
        var _resizeEventListener = eventListener;

        resizeEventListeners.push(_resizeEventListener);
      }
    });
  }

  return resizeEventListeners;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi9taXhpbi9yZXNpemUuanMiXSwibmFtZXMiOlsib25SZXNpemUiLCJoYW5kbGVyIiwib2JqZWN0IiwiaW50ZXJtZWRpYXRlSGFuZGxlciIsImRlZmF1bHRJbnRlcm1lZGlhdGVSZXNpemVIYW5kbGVyIiwiZWxlbWVudCIsInJlc2l6ZUV2ZW50TGlzdGVuZXJzIiwiZmluZFJlc2l6ZUV2ZW50TGlzdGVuZXJzIiwibGVuZ3RoIiwiYWRkUmVzaXplT2JqZWN0IiwiZXZlbnRUeXBlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9mZlJlc2l6ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyZW1vdmVSZXNpemVPYmplY3QiLCJyZXNpemVNaXhpbiIsIm1vZHVsZSIsImV4cG9ydHMiLCJyZXNpemVPYmplY3QiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJkb21FbGVtZW50IiwiZ2V0RE9NRWxlbWVudCIsInN0eWxlIiwiZGF0YSIsInR5cGUiLCJzZXRBdHRyaWJ1dGUiLCJfX3Jlc2l6ZU9iamVjdF9fIiwib25sb2FkIiwicmVzaXplT2JqZWN0TG9hZEhhbmRsZXIiLCJhcHBlbmRDaGlsZCIsIm9iamVjdFdpbmRvdyIsImNvbnRlbnREb2N1bWVudCIsImRlZmF1bHRWaWV3IiwicmVzaXplRXZlbnRMaXN0ZW5lciIsInJlbW92ZUNoaWxkIiwicmVzaXplT2JqZWN0V2luZG93IiwiZXZlbnQiLCJmb3JFYWNoIiwidGFyZ2V0RWxlbWVudCIsIndpbmRvdyIsIndpZHRoIiwiZ2V0V2lkdGgiLCJoZWlnaHQiLCJnZXRIZWlnaHQiLCJoYXNPd25Qcm9wZXJ0eSIsImV2ZW50TGlzdGVuZXJzIiwiZXZlbnRMaXN0ZW5lciIsInB1c2giXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLFNBQVNBLFFBQVQsQ0FBa0JDLE9BQWxCLEVBQTJCQyxNQUEzQixFQUEyRjtBQUFBLE1BQXhEQyxtQkFBd0QsdUVBQWxDQyxnQ0FBa0M7O0FBQ3pGLE1BQU1DLFVBQVUsSUFBaEI7QUFBQSxNQUFzQjtBQUNoQkMseUJBQXVCQyx5QkFBeUJGLE9BQXpCLENBRDdCOztBQUdBLE1BQUlDLHFCQUFxQkUsTUFBckIsS0FBZ0MsQ0FBcEMsRUFBdUM7QUFDckNDLG9CQUFnQkosT0FBaEI7QUFDRDs7QUFFRCxNQUFNSyxZQUFZLFFBQWxCOztBQUVBLE9BQUtDLGdCQUFMLENBQXNCRCxTQUF0QixFQUFpQ1QsT0FBakMsRUFBMENDLE1BQTFDLEVBQWtEQyxtQkFBbEQ7QUFDRDs7QUFFRCxTQUFTUyxTQUFULENBQW1CWCxPQUFuQixFQUE0QkMsTUFBNUIsRUFBb0M7QUFDbEMsTUFBTVEsWUFBWSxRQUFsQjs7QUFFQSxPQUFLRyxtQkFBTCxDQUF5QkgsU0FBekIsRUFBb0NULE9BQXBDLEVBQTZDQyxNQUE3Qzs7QUFFQSxNQUFNRyxVQUFVLElBQWhCO0FBQUEsTUFBc0I7QUFDaEJDLHlCQUF1QkMseUJBQXlCRixPQUF6QixDQUQ3Qjs7QUFHQSxNQUFJQyxxQkFBcUJFLE1BQXJCLEtBQWdDLENBQXBDLEVBQXVDO0FBQ3JDTSx1QkFBbUJULE9BQW5CO0FBQ0Q7QUFDRjs7QUFFRCxJQUFNVSxjQUFjO0FBQ2xCZixZQUFVQSxRQURRO0FBRWxCWSxhQUFXQTtBQUZPLENBQXBCOztBQUtBSSxPQUFPQyxPQUFQLEdBQWlCRixXQUFqQjs7QUFFQSxTQUFTTixlQUFULENBQXlCSixPQUF6QixFQUFrQztBQUNoQyxNQUFNYSxlQUFlQyxTQUFTQyxhQUFULENBQXVCLFFBQXZCLENBQXJCO0FBQUEsTUFDTUMsYUFBYWhCLFFBQVFpQixhQUFSLEVBRG5CO0FBQUEsTUFFTUMsc1NBRk47QUFBQSxNQVdNQyxPQUFPLGFBWGI7QUFBQSxNQVlNQyxPQUFPLFdBWmI7O0FBY0FQLGVBQWFRLFlBQWIsQ0FBMEIsT0FBMUIsRUFBbUNILEtBQW5DO0FBQ0FMLGVBQWFNLElBQWIsR0FBb0JBLElBQXBCO0FBQ0FOLGVBQWFPLElBQWIsR0FBb0JBLElBQXBCOztBQUVBcEIsVUFBUXNCLGdCQUFSLEdBQTJCVCxZQUEzQjs7QUFFQUEsZUFBYVUsTUFBYixHQUFzQixZQUFXO0FBQy9CQyw0QkFBd0J4QixPQUF4QjtBQUNELEdBRkQ7O0FBSUFnQixhQUFXUyxXQUFYLENBQXVCWixZQUF2QjtBQUNEOztBQUVELFNBQVNKLGtCQUFULENBQTRCVCxPQUE1QixFQUFxQztBQUNuQyxNQUFNZ0IsYUFBYWhCLFFBQVFpQixhQUFSLEVBQW5CO0FBQUEsTUFDTUosZUFBZWIsUUFBUXNCLGdCQUQ3QjtBQUFBLE1BRU1JLGVBQWViLGFBQWFjLGVBQWIsQ0FBNkJDLFdBRmxELENBRG1DLENBRzZCOztBQUVoRUYsZUFBYWxCLG1CQUFiLENBQWlDLFFBQWpDLEVBQTJDcUIsbUJBQTNDOztBQUVBYixhQUFXYyxXQUFYLENBQXVCakIsWUFBdkI7QUFDRDs7QUFFRCxTQUFTVyx1QkFBVCxDQUFpQ3hCLE9BQWpDLEVBQTBDO0FBQ3hDLE1BQU1hLGVBQWViLFFBQVFzQixnQkFBN0I7QUFBQSxNQUNNUyxxQkFBcUJsQixhQUFhYyxlQUFiLENBQTZCQyxXQUR4RCxDQUR3QyxDQUU4Qjs7QUFFdEVHLHFCQUFtQnpCLGdCQUFuQixDQUFvQyxRQUFwQyxFQUE4QyxVQUFTMEIsS0FBVCxFQUFnQjtBQUM1RCxRQUFNL0IsdUJBQXVCQyx5QkFBeUJGLE9BQXpCLENBQTdCOztBQUVBQyx5QkFBcUJnQyxPQUFyQixDQUE2QixVQUFTSixtQkFBVCxFQUE2QjtBQUN4REEsMEJBQW9CRyxLQUFwQjtBQUNELEtBRkQ7QUFHRCxHQU5EO0FBT0Q7O0FBRUQsU0FBU2pDLGdDQUFULENBQTBDSCxPQUExQyxFQUFtRG9DLEtBQW5ELEVBQTBERSxhQUExRCxFQUF5RTtBQUN2RSxNQUFNQyxTQUFTRCxhQUFmO0FBQUEsTUFBOEI7QUFDeEJFLFVBQVFELE9BQU9FLFFBQVAsRUFEZDtBQUFBLE1BRU1DLFNBQVNILE9BQU9JLFNBQVAsRUFGZjs7QUFJQTNDLFVBQVF3QyxLQUFSLEVBQWVFLE1BQWYsRUFBdUJOLEtBQXZCLEVBQThCRSxhQUE5QjtBQUNEOztBQUVELFNBQVNoQyx3QkFBVCxDQUFrQ0YsT0FBbEMsRUFBMkM7QUFDekMsTUFBTUMsdUJBQXVCLEVBQTdCOztBQUVBLE1BQUlELFFBQVF3QyxjQUFSLENBQXVCLGdCQUF2QixDQUFKLEVBQThDO0FBQzVDLFFBQU1DLGlCQUFpQnpDLFFBQVF5QyxjQUEvQixDQUQ0QyxDQUNJOztBQUVoREEsbUJBQWVSLE9BQWYsQ0FBdUIsVUFBU1MsYUFBVCxFQUF3QjtBQUM3QyxVQUFJQSxjQUFjckMsU0FBZCxLQUE0QixRQUFoQyxFQUEwQztBQUN4QyxZQUFNd0IsdUJBQXNCYSxhQUE1Qjs7QUFFQXpDLDZCQUFxQjBDLElBQXJCLENBQTBCZCxvQkFBMUI7QUFDRDtBQUNGLEtBTkQ7QUFPRDs7QUFFRCxTQUFPNUIsb0JBQVA7QUFDRCIsImZpbGUiOiJyZXNpemUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIG9uUmVzaXplKGhhbmRsZXIsIG9iamVjdCwgaW50ZXJtZWRpYXRlSGFuZGxlciA9IGRlZmF1bHRJbnRlcm1lZGlhdGVSZXNpemVIYW5kbGVyKSB7XG4gIGNvbnN0IGVsZW1lbnQgPSB0aGlzLCAvLy9cbiAgICAgICAgcmVzaXplRXZlbnRMaXN0ZW5lcnMgPSBmaW5kUmVzaXplRXZlbnRMaXN0ZW5lcnMoZWxlbWVudCk7XG5cbiAgaWYgKHJlc2l6ZUV2ZW50TGlzdGVuZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgIGFkZFJlc2l6ZU9iamVjdChlbGVtZW50KTtcbiAgfVxuXG4gIGNvbnN0IGV2ZW50VHlwZSA9ICdyZXNpemUnO1xuXG4gIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGhhbmRsZXIsIG9iamVjdCwgaW50ZXJtZWRpYXRlSGFuZGxlcik7XG59XG5cbmZ1bmN0aW9uIG9mZlJlc2l6ZShoYW5kbGVyLCBvYmplY3QpIHtcbiAgY29uc3QgZXZlbnRUeXBlID0gJ3Jlc2l6ZSc7XG5cbiAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgaGFuZGxlciwgb2JqZWN0KTtcblxuICBjb25zdCBlbGVtZW50ID0gdGhpcywgLy8vXG4gICAgICAgIHJlc2l6ZUV2ZW50TGlzdGVuZXJzID0gZmluZFJlc2l6ZUV2ZW50TGlzdGVuZXJzKGVsZW1lbnQpO1xuICBcbiAgaWYgKHJlc2l6ZUV2ZW50TGlzdGVuZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJlbW92ZVJlc2l6ZU9iamVjdChlbGVtZW50KTtcbiAgfVxufVxuXG5jb25zdCByZXNpemVNaXhpbiA9IHtcbiAgb25SZXNpemU6IG9uUmVzaXplLFxuICBvZmZSZXNpemU6IG9mZlJlc2l6ZVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSByZXNpemVNaXhpbjtcblxuZnVuY3Rpb24gYWRkUmVzaXplT2JqZWN0KGVsZW1lbnQpIHtcbiAgY29uc3QgcmVzaXplT2JqZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb2JqZWN0JyksXG4gICAgICAgIGRvbUVsZW1lbnQgPSBlbGVtZW50LmdldERPTUVsZW1lbnQoKSxcbiAgICAgICAgc3R5bGUgPSBgZGlzcGxheTogYmxvY2s7IFxuICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7IFxuICAgICAgICAgICAgICAgICB0b3A6IDA7IFxuICAgICAgICAgICAgICAgICBsZWZ0OiAwOyBcbiAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOyBcbiAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7IFxuICAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOyBcbiAgICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7IFxuICAgICAgICAgICAgICAgICB6LWluZGV4OiAtMTtgLFxuICAgICAgICBkYXRhID0gJ2Fib3V0OmJsYW5rJyxcbiAgICAgICAgdHlwZSA9ICd0ZXh0L2h0bWwnO1xuXG4gIHJlc2l6ZU9iamVjdC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgc3R5bGUpO1xuICByZXNpemVPYmplY3QuZGF0YSA9IGRhdGE7XG4gIHJlc2l6ZU9iamVjdC50eXBlID0gdHlwZTtcblxuICBlbGVtZW50Ll9fcmVzaXplT2JqZWN0X18gPSByZXNpemVPYmplY3Q7XG5cbiAgcmVzaXplT2JqZWN0Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJlc2l6ZU9iamVjdExvYWRIYW5kbGVyKGVsZW1lbnQpXG4gIH07XG5cbiAgZG9tRWxlbWVudC5hcHBlbmRDaGlsZChyZXNpemVPYmplY3QpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVSZXNpemVPYmplY3QoZWxlbWVudCkge1xuICBjb25zdCBkb21FbGVtZW50ID0gZWxlbWVudC5nZXRET01FbGVtZW50KCksXG4gICAgICAgIHJlc2l6ZU9iamVjdCA9IGVsZW1lbnQuX19yZXNpemVPYmplY3RfXyxcbiAgICAgICAgb2JqZWN0V2luZG93ID0gcmVzaXplT2JqZWN0LmNvbnRlbnREb2N1bWVudC5kZWZhdWx0VmlldzsgIC8vL1xuXG4gIG9iamVjdFdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemVFdmVudExpc3RlbmVyKTtcblxuICBkb21FbGVtZW50LnJlbW92ZUNoaWxkKHJlc2l6ZU9iamVjdCk7XG59XG5cbmZ1bmN0aW9uIHJlc2l6ZU9iamVjdExvYWRIYW5kbGVyKGVsZW1lbnQpIHtcbiAgY29uc3QgcmVzaXplT2JqZWN0ID0gZWxlbWVudC5fX3Jlc2l6ZU9iamVjdF9fLFxuICAgICAgICByZXNpemVPYmplY3RXaW5kb3cgPSByZXNpemVPYmplY3QuY29udGVudERvY3VtZW50LmRlZmF1bHRWaWV3OyAgLy8vXG5cbiAgcmVzaXplT2JqZWN0V2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgY29uc3QgcmVzaXplRXZlbnRMaXN0ZW5lcnMgPSBmaW5kUmVzaXplRXZlbnRMaXN0ZW5lcnMoZWxlbWVudCk7XG5cbiAgICByZXNpemVFdmVudExpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKHJlc2l6ZUV2ZW50TGlzdGVuZXIpe1xuICAgICAgcmVzaXplRXZlbnRMaXN0ZW5lcihldmVudCk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBkZWZhdWx0SW50ZXJtZWRpYXRlUmVzaXplSGFuZGxlcihoYW5kbGVyLCBldmVudCwgdGFyZ2V0RWxlbWVudCkge1xuICBjb25zdCB3aW5kb3cgPSB0YXJnZXRFbGVtZW50LCAvLy9cbiAgICAgICAgd2lkdGggPSB3aW5kb3cuZ2V0V2lkdGgoKSxcbiAgICAgICAgaGVpZ2h0ID0gd2luZG93LmdldEhlaWdodCgpO1xuXG4gIGhhbmRsZXIod2lkdGgsIGhlaWdodCwgZXZlbnQsIHRhcmdldEVsZW1lbnQpO1xufVxuXG5mdW5jdGlvbiBmaW5kUmVzaXplRXZlbnRMaXN0ZW5lcnMoZWxlbWVudCkge1xuICBjb25zdCByZXNpemVFdmVudExpc3RlbmVycyA9IFtdO1xuICBcbiAgaWYgKGVsZW1lbnQuaGFzT3duUHJvcGVydHkoJ2V2ZW50TGlzdGVuZXJzJykpIHtcbiAgICBjb25zdCBldmVudExpc3RlbmVycyA9IGVsZW1lbnQuZXZlbnRMaXN0ZW5lcnM7ICAvLy9cblxuICAgIGV2ZW50TGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24oZXZlbnRMaXN0ZW5lcikge1xuICAgICAgaWYgKGV2ZW50TGlzdGVuZXIuZXZlbnRUeXBlID09PSAncmVzaXplJykge1xuICAgICAgICBjb25zdCByZXNpemVFdmVudExpc3RlbmVyID0gZXZlbnRMaXN0ZW5lcjtcblxuICAgICAgICByZXNpemVFdmVudExpc3RlbmVycy5wdXNoKHJlc2l6ZUV2ZW50TGlzdGVuZXIpO1xuICAgICAgfSAgICAgIFxuICAgIH0pO1xuICB9ICBcbiAgXG4gIHJldHVybiByZXNpemVFdmVudExpc3RlbmVycztcbn1cbiJdfQ==