'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var TextElement = require('../textElement');

function addTo(parentElement) {
  updateParentContext(this, parentElement);

  parentElement.add(this);
}

function appendTo(parentElement) {
  updateParentContext(this, parentElement);

  parentElement.append(this);
}

function prependTo(parentElement) {
  updateParentContext(this, parentElement);

  parentElement.prepend(this);
}

function removeFrom(parentElement) {
  parentElement.remove(this);
}

function assignContext() {
  var names = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Object.keys(this.context);
  var thenDelete = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;

  names.forEach(function (name) {
    var value = this.context[name],
        descriptor = {
      value: value
    };

    Object.defineProperty(this, name, descriptor);

    if (thenDelete) {
      delete this.context[name];
    }
  }.bind(this));

  if (thenDelete) {
    var _names = Object.keys(this.context),
        namesLength = _names.length; ///

    if (namesLength === 0) {
      delete this.context;
    }
  }
}

function applyProperties() {
  var properties = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var defaultProperties = arguments[1];
  var ignoredProperties = arguments[2];

  assignProperties(properties, defaultProperties);

  var childElements = childElementsFromElementAndProperties(this, properties);

  unassignProperties(properties, ignoredProperties);

  var names = Object.keys(properties);

  names.forEach(function (name) {
    var value = properties[name];

    if (false) {} else if (isHandlerName(name)) {
      addHandler(this, name, value);
    } else if (isAttributeName(name)) {
      addAttribute(this, name, value);
    } else {
      if (!this.hasOwnProperty('properties')) {
        var _properties = {};

        Object.assign(this, {
          properties: _properties
        });
      }

      this.properties[name] = value;
    }
  }.bind(this));

  var parentElement = this; ///

  childElements.forEach(function (childElement) {
    childElement.addTo(parentElement);
  }.bind(this));
}

function getProperties() {
  return this.properties;
}

function getContext() {
  return this.context;
}

function getState() {
  return this.state;
}

function setState(state) {
  this.state = state;
}

function fromState(name) {
  var value = this.state[name];

  return value;
}

function updateState(update) {
  Object.assign(this.state, update);
}

var jsxMixin = {
  addTo: addTo,
  appendTo: appendTo,
  prependTo: prependTo,
  removeFrom: removeFrom,
  assignContext: assignContext,
  applyProperties: applyProperties,
  getProperties: getProperties,
  getContext: getContext,
  getState: getState,
  setState: setState,
  fromState: fromState,
  updateState: updateState
};

module.exports = jsxMixin;

function childElementsFromElementAndProperties(element, properties) {
  var childElements = element.childElements ? element.childElements(properties) : properties.childElements;

  childElements = childElements !== undefined ? childElements instanceof Array ? childElements : [childElements] : [];

  childElements = childElements.map(function (childElement) {
    if (typeof childElement === 'string') {
      var text = childElement,
          ///
      textElement = new TextElement(text);

      childElement = textElement; ///
    }

    return childElement;
  });

  return childElements;
}

function unassignProperties(properties) {
  var ignoredProperties = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];

  var ignoredPropertyNames = ignoredProperties; ///

  ignoredPropertyNames.forEach(function (ignoredPropertyName) {
    if (properties.hasOwnProperty(ignoredPropertyName)) {
      delete properties[ignoredPropertyName];
    }
  });
}

function assignProperties(properties) {
  var defaultProperties = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  var defaultPropertyNames = Object.keys(defaultProperties);

  defaultPropertyNames.forEach(function (defaultPropertyName) {
    if (!properties.hasOwnProperty(defaultPropertyName)) {
      var defaultPropertyValue = defaultProperties[defaultPropertyName];

      properties[defaultPropertyName] = defaultPropertyValue;
    }
  });
}

function addHandler(element, name, value) {
  var eventType = name.substr(2).toLowerCase(),
      ///
  handler = value; ///

  element.on(eventType, handler);
}

function addAttribute(element, name, value) {
  if (name === 'className') {
    name = 'class';
  }

  if (name === 'htmlFor') {
    name = 'for';
  }

  if ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object') {
    var keys = Object.keys(value);

    keys.forEach(function (key) {
      element.domElement[name][key] = value[key];
    }.bind(this));
  } else if (typeof value === 'boolean') {
    if (value) {
      value = name; ///

      element.addAttribute(name, value);
    }
  } else {
    element.addAttribute(name, value);
  }
}

function updateParentContext(element, parentElement) {
  var parentContext = element.parentContext ? element.parentContext() : element.context;

  if (parentContext !== undefined) {
    if (!parentElement.hasOwnProperty('context')) {
      var context = {};

      Object.assign(parentElement, {
        context: context
      });
    }

    parentElement.context = Object.assign(parentElement.context, parentContext);
  }

  var prototype = Object.getPrototypeOf(element),
      prototypeConstructor = prototype.constructor,
      ///
  prototypeConstructorName = prototypeConstructor.name; ///

  if (prototypeConstructorName === 'Element') {
    delete element.context;
  }
}

function isHandlerName(name) {
  return name.match(/^on/);
}

function isAttributeName(name) {
  return attributeNames.includes(name);
}

var attributeNames = ['accept', 'acceptCharset', 'accessKey', 'action', 'allowFullScreen', 'allowTransparency', 'alt', 'async', 'autoComplete', 'autoFocus', 'autoPlay', 'capture', 'cellPadding', 'cellSpacing', 'challenge', 'charSet', 'checked', 'cite', 'classID', 'className', 'colSpan', 'cols', 'content', 'contentEditable', 'contextMenu', 'controls', 'coords', 'crossOrigin', 'data', 'dateTime', 'default', 'defer', 'dir', 'disabled', 'download', 'draggable', 'encType', 'form', 'formAction', 'formEncType', 'formMethod', 'formNoValidate', 'formTarget', 'frameBorder', 'headers', 'height', 'hidden', 'high', 'href', 'hrefLang', 'htmlFor', 'httpEquiv', 'icon', 'id', 'inputMode', 'integrity', 'is', 'keyParams', 'keyType', 'kind', 'label', 'lang', 'list', 'loop', 'low', 'manifest', 'marginHeight', 'marginWidth', 'max', 'maxLength', 'media', 'mediaGroup', 'method', 'min', 'minLength', 'multiple', 'muted', 'name', 'noValidate', 'nonce', 'open', 'optimum', 'pattern', 'placeholder', 'poster', 'preload', 'profile', 'radioGroup', 'readOnly', 'rel', 'required', 'reversed', 'role', 'rowSpan', 'rows', 'sandbox', 'scope', 'scoped', 'scrolling', 'seamless', 'selected', 'shape', 'size', 'sizes', 'span', 'spellCheck', 'src', 'srcDoc', 'srcLang', 'srcSet', 'start', 'step', 'style', 'summary', 'tabIndex', 'target', 'title', 'type', 'useMap', 'value', 'width', 'wmode', 'wrap'];
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi9taXhpbi9qc3guanMiXSwibmFtZXMiOlsiVGV4dEVsZW1lbnQiLCJyZXF1aXJlIiwiYWRkVG8iLCJwYXJlbnRFbGVtZW50IiwidXBkYXRlUGFyZW50Q29udGV4dCIsImFkZCIsImFwcGVuZFRvIiwiYXBwZW5kIiwicHJlcGVuZFRvIiwicHJlcGVuZCIsInJlbW92ZUZyb20iLCJyZW1vdmUiLCJhc3NpZ25Db250ZXh0IiwibmFtZXMiLCJPYmplY3QiLCJrZXlzIiwiY29udGV4dCIsInRoZW5EZWxldGUiLCJmb3JFYWNoIiwibmFtZSIsInZhbHVlIiwiZGVzY3JpcHRvciIsImRlZmluZVByb3BlcnR5IiwiYmluZCIsIm5hbWVzTGVuZ3RoIiwibGVuZ3RoIiwiYXBwbHlQcm9wZXJ0aWVzIiwicHJvcGVydGllcyIsImRlZmF1bHRQcm9wZXJ0aWVzIiwiaWdub3JlZFByb3BlcnRpZXMiLCJhc3NpZ25Qcm9wZXJ0aWVzIiwiY2hpbGRFbGVtZW50cyIsImNoaWxkRWxlbWVudHNGcm9tRWxlbWVudEFuZFByb3BlcnRpZXMiLCJ1bmFzc2lnblByb3BlcnRpZXMiLCJpc0hhbmRsZXJOYW1lIiwiYWRkSGFuZGxlciIsImlzQXR0cmlidXRlTmFtZSIsImFkZEF0dHJpYnV0ZSIsImhhc093blByb3BlcnR5IiwiYXNzaWduIiwiY2hpbGRFbGVtZW50IiwiZ2V0UHJvcGVydGllcyIsImdldENvbnRleHQiLCJnZXRTdGF0ZSIsInN0YXRlIiwic2V0U3RhdGUiLCJmcm9tU3RhdGUiLCJ1cGRhdGVTdGF0ZSIsInVwZGF0ZSIsImpzeE1peGluIiwibW9kdWxlIiwiZXhwb3J0cyIsImVsZW1lbnQiLCJ1bmRlZmluZWQiLCJBcnJheSIsIm1hcCIsInRleHQiLCJ0ZXh0RWxlbWVudCIsImlnbm9yZWRQcm9wZXJ0eU5hbWVzIiwiaWdub3JlZFByb3BlcnR5TmFtZSIsImRlZmF1bHRQcm9wZXJ0eU5hbWVzIiwiZGVmYXVsdFByb3BlcnR5TmFtZSIsImRlZmF1bHRQcm9wZXJ0eVZhbHVlIiwiZXZlbnRUeXBlIiwic3Vic3RyIiwidG9Mb3dlckNhc2UiLCJoYW5kbGVyIiwib24iLCJrZXkiLCJkb21FbGVtZW50IiwicGFyZW50Q29udGV4dCIsInByb3RvdHlwZSIsImdldFByb3RvdHlwZU9mIiwicHJvdG90eXBlQ29uc3RydWN0b3IiLCJjb25zdHJ1Y3RvciIsInByb3RvdHlwZUNvbnN0cnVjdG9yTmFtZSIsIm1hdGNoIiwiYXR0cmlidXRlTmFtZXMiLCJpbmNsdWRlcyJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7QUFFQSxJQUFNQSxjQUFjQyxRQUFRLGdCQUFSLENBQXBCOztBQUVBLFNBQVNDLEtBQVQsQ0FBZUMsYUFBZixFQUE4QjtBQUM1QkMsc0JBQW9CLElBQXBCLEVBQTBCRCxhQUExQjs7QUFFQUEsZ0JBQWNFLEdBQWQsQ0FBa0IsSUFBbEI7QUFDRDs7QUFFRCxTQUFTQyxRQUFULENBQWtCSCxhQUFsQixFQUFpQztBQUMvQkMsc0JBQW9CLElBQXBCLEVBQTBCRCxhQUExQjs7QUFFQUEsZ0JBQWNJLE1BQWQsQ0FBcUIsSUFBckI7QUFDRDs7QUFFRCxTQUFTQyxTQUFULENBQW1CTCxhQUFuQixFQUFrQztBQUNoQ0Msc0JBQW9CLElBQXBCLEVBQTBCRCxhQUExQjs7QUFFQUEsZ0JBQWNNLE9BQWQsQ0FBc0IsSUFBdEI7QUFDRDs7QUFFRCxTQUFTQyxVQUFULENBQW9CUCxhQUFwQixFQUFtQztBQUNqQ0EsZ0JBQWNRLE1BQWQsQ0FBcUIsSUFBckI7QUFDRDs7QUFFRCxTQUFTQyxhQUFULEdBQTZFO0FBQUEsTUFBdERDLEtBQXNELHVFQUE5Q0MsT0FBT0MsSUFBUCxDQUFZLEtBQUtDLE9BQWpCLENBQThDO0FBQUEsTUFBbkJDLFVBQW1CLHVFQUFOLElBQU07O0FBQzNFSixRQUFNSyxPQUFOLENBQWMsVUFBU0MsSUFBVCxFQUFlO0FBQzNCLFFBQU1DLFFBQVEsS0FBS0osT0FBTCxDQUFhRyxJQUFiLENBQWQ7QUFBQSxRQUNNRSxhQUFhO0FBQ1hELGFBQU9BO0FBREksS0FEbkI7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SSxFQVNJLE1BVEosRUFTWSxLQVRaLEVBVXJCLFVBVnFCLEVBVVQsY0FWUyxFQVVPLGFBVlAsRUFVc0IsS0FWdEIsRUFVNkIsV0FWN0IsRUFVMEMsT0FWMUMsRUFVbUQsWUFWbkQsRUFVaUUsUUFWakUsRUFVMkUsS0FWM0UsRUFVa0YsV0FWbEYsRUFVK0YsVUFWL0YsRUFVMkcsT0FWM0csRUFXckIsTUFYcUIsRUFXYixZQVhhLEVBV0MsT0FYRCxFQVlyQixNQVpxQixFQVliLFNBWmEsRUFhckIsU0FicUIsRUFhVixhQWJVLEVBYUssUUFiTCxFQWFlLFNBYmYsRUFhMEIsU0FiMUIsRUFjckIsWUFkcUIsRUFjUCxVQWRPLEVBY0ssS0FkTCxFQWNZLFVBZFosRUFjd0IsVUFkeEIsRUFjb0MsTUFkcEMsRUFjNEMsU0FkNUMsRUFjdUQsTUFkdkQsRUFlckIsU0FmcUIsRUFlVixPQWZVLEVBZUQsUUFmQyxFQWVTLFdBZlQsRUFlc0IsVUFmdEIsRUFla0MsVUFmbEMsRUFlOEMsT0FmOUMsRUFldUQsTUFmdkQsRUFlK0QsT0FmL0QsRUFld0UsTUFmeEUsRUFlZ0YsWUFmaEYsRUFlOEYsS0FmOUYsRUFlcUcsUUFmckcsRUFlK0csU0FmL0csRUFlMEgsUUFmMUgsRUFlb0ksT0FmcEksRUFlNkksTUFmN0ksRUFlcUosT0FmckosRUFlOEosU0FmOUosRUFnQnJCLFVBaEJxQixFQWdCVCxRQWhCUyxFQWdCQyxPQWhCRCxFQWdCVSxNQWhCVixFQWlCckIsUUFqQnFCLEVBa0JyQixPQWxCcUIsRUFtQnJCLE9BbkJxQixFQW9CckIsT0FwQnFCLEVBcUJyQixNQXJCcUIsQ0FBdkIiLCJmaWxlIjoianN4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBUZXh0RWxlbWVudCA9IHJlcXVpcmUoJy4uL3RleHRFbGVtZW50Jyk7XG5cbmZ1bmN0aW9uIGFkZFRvKHBhcmVudEVsZW1lbnQpIHtcbiAgdXBkYXRlUGFyZW50Q29udGV4dCh0aGlzLCBwYXJlbnRFbGVtZW50KTtcblxuICBwYXJlbnRFbGVtZW50LmFkZCh0aGlzKTtcbn1cblxuZnVuY3Rpb24gYXBwZW5kVG8ocGFyZW50RWxlbWVudCkge1xuICB1cGRhdGVQYXJlbnRDb250ZXh0KHRoaXMsIHBhcmVudEVsZW1lbnQpO1xuXG4gIHBhcmVudEVsZW1lbnQuYXBwZW5kKHRoaXMpO1xufVxuXG5mdW5jdGlvbiBwcmVwZW5kVG8ocGFyZW50RWxlbWVudCkge1xuICB1cGRhdGVQYXJlbnRDb250ZXh0KHRoaXMsIHBhcmVudEVsZW1lbnQpO1xuXG4gIHBhcmVudEVsZW1lbnQucHJlcGVuZCh0aGlzKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlRnJvbShwYXJlbnRFbGVtZW50KSB7XG4gIHBhcmVudEVsZW1lbnQucmVtb3ZlKHRoaXMpO1xufVxuXG5mdW5jdGlvbiBhc3NpZ25Db250ZXh0KG5hbWVzID0gT2JqZWN0LmtleXModGhpcy5jb250ZXh0KSwgdGhlbkRlbGV0ZSA9IHRydWUpIHtcbiAgbmFtZXMuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLmNvbnRleHRbbmFtZV0sXG4gICAgICAgICAgZGVzY3JpcHRvciA9IHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVxuICAgICAgICAgIH07XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgbmFtZSwgZGVzY3JpcHRvcik7XG5cbiAgICBpZiAodGhlbkRlbGV0ZSkge1xuICAgICAgZGVsZXRlIHRoaXMuY29udGV4dFtuYW1lXTtcbiAgICB9XG4gIH0uYmluZCh0aGlzKSk7XG4gIFxuICBpZiAodGhlbkRlbGV0ZSkge1xuICAgIGNvbnN0IG5hbWVzID0gT2JqZWN0LmtleXModGhpcy5jb250ZXh0KSxcbiAgICAgICAgICBuYW1lc0xlbmd0aCA9IG5hbWVzLmxlbmd0aDsgLy8vXG4gICAgXG4gICAgaWYgKG5hbWVzTGVuZ3RoID09PSAwKSB7XG4gICAgICBkZWxldGUgdGhpcy5jb250ZXh0O1xuICAgIH0gXG4gIH1cbn1cblxuZnVuY3Rpb24gYXBwbHlQcm9wZXJ0aWVzKHByb3BlcnRpZXMgPSB7fSwgZGVmYXVsdFByb3BlcnRpZXMsIGlnbm9yZWRQcm9wZXJ0aWVzKSB7XG4gIGFzc2lnblByb3BlcnRpZXMocHJvcGVydGllcywgZGVmYXVsdFByb3BlcnRpZXMpO1xuXG4gIGNvbnN0IGNoaWxkRWxlbWVudHMgPSBjaGlsZEVsZW1lbnRzRnJvbUVsZW1lbnRBbmRQcm9wZXJ0aWVzKHRoaXMsIHByb3BlcnRpZXMpO1xuXG4gIHVuYXNzaWduUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBpZ25vcmVkUHJvcGVydGllcyk7XG5cbiAgY29uc3QgbmFtZXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKTtcblxuICBuYW1lcy5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHByb3BlcnRpZXNbbmFtZV07XG5cbiAgICBpZiAoZmFsc2UpIHtcblxuICAgIH0gZWxzZSBpZiAoaXNIYW5kbGVyTmFtZShuYW1lKSkge1xuICAgICAgYWRkSGFuZGxlcih0aGlzLCBuYW1lLCB2YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChpc0F0dHJpYnV0ZU5hbWUobmFtZSkpIHtcbiAgICAgIGFkZEF0dHJpYnV0ZSh0aGlzLCBuYW1lLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghdGhpcy5oYXNPd25Qcm9wZXJ0eSgncHJvcGVydGllcycpKSB7XG4gICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSB7fTtcblxuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIHtcbiAgICAgICAgICBwcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnByb3BlcnRpZXNbbmFtZV0gPSB2YWx1ZTtcbiAgICB9XG4gIH0uYmluZCh0aGlzKSk7XG5cbiAgY29uc3QgcGFyZW50RWxlbWVudCA9IHRoaXM7IC8vL1xuXG4gIGNoaWxkRWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbihjaGlsZEVsZW1lbnQpIHtcbiAgICBjaGlsZEVsZW1lbnQuYWRkVG8ocGFyZW50RWxlbWVudCk7XG4gIH0uYmluZCh0aGlzKSk7XG59XG5cbmZ1bmN0aW9uIGdldFByb3BlcnRpZXMoKSB7XG4gIHJldHVybiB0aGlzLnByb3BlcnRpZXM7XG59XG5cbmZ1bmN0aW9uIGdldENvbnRleHQoKSB7XG4gIHJldHVybiB0aGlzLmNvbnRleHQ7XG59XG5cbmZ1bmN0aW9uIGdldFN0YXRlKCkge1xuICByZXR1cm4gdGhpcy5zdGF0ZTtcbn1cblxuZnVuY3Rpb24gc2V0U3RhdGUoc3RhdGUpIHtcbiAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xufVxuXG5mdW5jdGlvbiBmcm9tU3RhdGUobmFtZSkge1xuICBjb25zdCB2YWx1ZSA9IHRoaXMuc3RhdGVbbmFtZV07XG5cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVTdGF0ZSh1cGRhdGUpIHtcbiAgT2JqZWN0LmFzc2lnbih0aGlzLnN0YXRlLCB1cGRhdGUpO1xufVxuXG5jb25zdCBqc3hNaXhpbiA9IHtcbiAgYWRkVG86IGFkZFRvLFxuICBhcHBlbmRUbzogYXBwZW5kVG8sXG4gIHByZXBlbmRUbzogcHJlcGVuZFRvLFxuICByZW1vdmVGcm9tOiByZW1vdmVGcm9tLFxuICBhc3NpZ25Db250ZXh0OiBhc3NpZ25Db250ZXh0LFxuICBhcHBseVByb3BlcnRpZXM6IGFwcGx5UHJvcGVydGllcyxcbiAgZ2V0UHJvcGVydGllczogZ2V0UHJvcGVydGllcyxcbiAgZ2V0Q29udGV4dDogZ2V0Q29udGV4dCxcbiAgZ2V0U3RhdGU6IGdldFN0YXRlLFxuICBzZXRTdGF0ZTogc2V0U3RhdGUsXG4gIGZyb21TdGF0ZTogZnJvbVN0YXRlLFxuICB1cGRhdGVTdGF0ZTogdXBkYXRlU3RhdGVcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ganN4TWl4aW47XG5cbmZ1bmN0aW9uIGNoaWxkRWxlbWVudHNGcm9tRWxlbWVudEFuZFByb3BlcnRpZXMoZWxlbWVudCwgcHJvcGVydGllcykge1xuICBsZXQgY2hpbGRFbGVtZW50cyA9IGVsZW1lbnQuY2hpbGRFbGVtZW50cyA/XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNoaWxkRWxlbWVudHMocHJvcGVydGllcykgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLmNoaWxkRWxlbWVudHM7XG5cbiAgY2hpbGRFbGVtZW50cyA9IChjaGlsZEVsZW1lbnRzICE9PSB1bmRlZmluZWQpID9cbiAgICAgICAgICAgICAgICAgICAoKGNoaWxkRWxlbWVudHMgaW5zdGFuY2VvZiBBcnJheSkgP1xuICAgICAgICAgICAgICAgICAgICAgICBjaGlsZEVsZW1lbnRzIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIFtjaGlsZEVsZW1lbnRzXSkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICBbXTtcblxuICBjaGlsZEVsZW1lbnRzID0gY2hpbGRFbGVtZW50cy5tYXAoZnVuY3Rpb24oY2hpbGRFbGVtZW50KSB7XG4gICAgaWYgKHR5cGVvZiBjaGlsZEVsZW1lbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBjb25zdCB0ZXh0ID0gY2hpbGRFbGVtZW50LCAgLy8vXG4gICAgICAgICAgICB0ZXh0RWxlbWVudCA9IG5ldyBUZXh0RWxlbWVudCh0ZXh0KTtcblxuICAgICAgY2hpbGRFbGVtZW50ID0gdGV4dEVsZW1lbnQ7IC8vL1xuICAgIH1cblxuICAgIHJldHVybiBjaGlsZEVsZW1lbnQ7XG4gIH0pO1xuXG4gIHJldHVybiBjaGlsZEVsZW1lbnRzO1xufVxuXG5mdW5jdGlvbiB1bmFzc2lnblByb3BlcnRpZXMocHJvcGVydGllcywgaWdub3JlZFByb3BlcnRpZXMgPSBbXSkge1xuICBjb25zdCBpZ25vcmVkUHJvcGVydHlOYW1lcyA9IGlnbm9yZWRQcm9wZXJ0aWVzOyAvLy9cblxuICBpZ25vcmVkUHJvcGVydHlOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uKGlnbm9yZWRQcm9wZXJ0eU5hbWUpIHtcbiAgICBpZiAocHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShpZ25vcmVkUHJvcGVydHlOYW1lKSkge1xuICAgICAgZGVsZXRlIHByb3BlcnRpZXNbaWdub3JlZFByb3BlcnR5TmFtZV07XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gYXNzaWduUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBkZWZhdWx0UHJvcGVydGllcyA9IHt9KSB7XG4gIGNvbnN0IGRlZmF1bHRQcm9wZXJ0eU5hbWVzID0gT2JqZWN0LmtleXMoZGVmYXVsdFByb3BlcnRpZXMpO1xuXG4gIGRlZmF1bHRQcm9wZXJ0eU5hbWVzLmZvckVhY2goZnVuY3Rpb24oZGVmYXVsdFByb3BlcnR5TmFtZSkge1xuICAgIGlmICghcHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShkZWZhdWx0UHJvcGVydHlOYW1lKSkge1xuICAgICAgY29uc3QgZGVmYXVsdFByb3BlcnR5VmFsdWUgPSBkZWZhdWx0UHJvcGVydGllc1tkZWZhdWx0UHJvcGVydHlOYW1lXTtcblxuICAgICAgcHJvcGVydGllc1tkZWZhdWx0UHJvcGVydHlOYW1lXSA9IGRlZmF1bHRQcm9wZXJ0eVZhbHVlO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGFkZEhhbmRsZXIoZWxlbWVudCwgbmFtZSwgdmFsdWUpIHtcbiAgY29uc3QgZXZlbnRUeXBlID0gbmFtZS5zdWJzdHIoMikudG9Mb3dlckNhc2UoKSwgLy8vXG4gICAgICAgIGhhbmRsZXIgPSB2YWx1ZTsgIC8vL1xuXG4gIGVsZW1lbnQub24oZXZlbnRUeXBlLCBoYW5kbGVyKTtcbn1cblxuZnVuY3Rpb24gYWRkQXR0cmlidXRlKGVsZW1lbnQsIG5hbWUsIHZhbHVlKSB7XG4gIGlmIChuYW1lID09PSAnY2xhc3NOYW1lJykge1xuICAgIG5hbWUgPSAnY2xhc3MnO1xuICB9XG5cbiAgaWYgKG5hbWUgPT09ICdodG1sRm9yJykge1xuICAgIG5hbWUgPSAnZm9yJztcbiAgfVxuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTtcblxuICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBlbGVtZW50LmRvbUVsZW1lbnRbbmFtZV1ba2V5XSA9IHZhbHVlW2tleV07XG4gICAgfS5iaW5kKHRoaXMpKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykge1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdmFsdWUgPSBuYW1lOyAvLy9cblxuICAgICAgZWxlbWVudC5hZGRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBlbGVtZW50LmFkZEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlUGFyZW50Q29udGV4dChlbGVtZW50LCBwYXJlbnRFbGVtZW50KSB7XG4gIGNvbnN0IHBhcmVudENvbnRleHQgPSBlbGVtZW50LnBhcmVudENvbnRleHQgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnBhcmVudENvbnRleHQoKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jb250ZXh0O1xuXG4gIGlmIChwYXJlbnRDb250ZXh0ICE9PSB1bmRlZmluZWQpIHtcbiAgICBpZiAoIXBhcmVudEVsZW1lbnQuaGFzT3duUHJvcGVydHkoJ2NvbnRleHQnKSkge1xuICAgICAgY29uc3QgY29udGV4dCA9IHt9O1xuXG4gICAgICBPYmplY3QuYXNzaWduKHBhcmVudEVsZW1lbnQsIHtcbiAgICAgICAgY29udGV4dDogY29udGV4dFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcGFyZW50RWxlbWVudC5jb250ZXh0ID0gT2JqZWN0LmFzc2lnbihwYXJlbnRFbGVtZW50LmNvbnRleHQsIHBhcmVudENvbnRleHQpO1xuICB9XG5cbiAgY29uc3QgcHJvdG90eXBlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGVsZW1lbnQpLFxuICAgICAgICBwcm90b3R5cGVDb25zdHJ1Y3RvciA9IHByb3RvdHlwZS5jb25zdHJ1Y3RvciwgLy8vXG4gICAgICAgIHByb3RvdHlwZUNvbnN0cnVjdG9yTmFtZSA9IHByb3RvdHlwZUNvbnN0cnVjdG9yLm5hbWU7IC8vL1xuXG4gIGlmIChwcm90b3R5cGVDb25zdHJ1Y3Rvck5hbWUgPT09ICdFbGVtZW50Jykge1xuICAgIGRlbGV0ZSBlbGVtZW50LmNvbnRleHQ7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNIYW5kbGVyTmFtZShuYW1lKSB7XG4gIHJldHVybiBuYW1lLm1hdGNoKC9eb24vKTtcbn1cblxuZnVuY3Rpb24gaXNBdHRyaWJ1dGVOYW1lKG5hbWUpIHtcbiAgcmV0dXJuIGF0dHJpYnV0ZU5hbWVzLmluY2x1ZGVzKG5hbWUpO1xufVxuXG5jb25zdCBhdHRyaWJ1dGVOYW1lcyA9IFtcbiAgJ2FjY2VwdCcsICdhY2NlcHRDaGFyc2V0JywgJ2FjY2Vzc0tleScsICdhY3Rpb24nLCAnYWxsb3dGdWxsU2NyZWVuJywgJ2FsbG93VHJhbnNwYXJlbmN5JywgJ2FsdCcsICdhc3luYycsICdhdXRvQ29tcGxldGUnLCAnYXV0b0ZvY3VzJywgJ2F1dG9QbGF5JyxcbiAgJ2NhcHR1cmUnLCAnY2VsbFBhZGRpbmcnLCAnY2VsbFNwYWNpbmcnLCAnY2hhbGxlbmdlJywgJ2NoYXJTZXQnLCAnY2hlY2tlZCcsICdjaXRlJywgJ2NsYXNzSUQnLCAnY2xhc3NOYW1lJywgJ2NvbFNwYW4nLCAnY29scycsICdjb250ZW50JywgJ2NvbnRlbnRFZGl0YWJsZScsICdjb250ZXh0TWVudScsICdjb250cm9scycsICdjb29yZHMnLCAnY3Jvc3NPcmlnaW4nLFxuICAnZGF0YScsICdkYXRlVGltZScsICdkZWZhdWx0JywgJ2RlZmVyJywgJ2RpcicsICdkaXNhYmxlZCcsICdkb3dubG9hZCcsICdkcmFnZ2FibGUnLFxuICAnZW5jVHlwZScsXG4gICdmb3JtJywgJ2Zvcm1BY3Rpb24nLCAnZm9ybUVuY1R5cGUnLCAnZm9ybU1ldGhvZCcsICdmb3JtTm9WYWxpZGF0ZScsICdmb3JtVGFyZ2V0JywgJ2ZyYW1lQm9yZGVyJyxcbiAgJ2hlYWRlcnMnLCAnaGVpZ2h0JywgJ2hpZGRlbicsICdoaWdoJywgJ2hyZWYnLCAnaHJlZkxhbmcnLCAnaHRtbEZvcicsICdodHRwRXF1aXYnLFxuICAnaWNvbicsICdpZCcsICdpbnB1dE1vZGUnLCAnaW50ZWdyaXR5JywgJ2lzJyxcbiAgJ2tleVBhcmFtcycsICdrZXlUeXBlJywgJ2tpbmQnLFxuICAnbGFiZWwnLCAnbGFuZycsICdsaXN0JywgJ2xvb3AnLCAnbG93JyxcbiAgJ21hbmlmZXN0JywgJ21hcmdpbkhlaWdodCcsICdtYXJnaW5XaWR0aCcsICdtYXgnLCAnbWF4TGVuZ3RoJywgJ21lZGlhJywgJ21lZGlhR3JvdXAnLCAnbWV0aG9kJywgJ21pbicsICdtaW5MZW5ndGgnLCAnbXVsdGlwbGUnLCAnbXV0ZWQnLFxuICAnbmFtZScsICdub1ZhbGlkYXRlJywgJ25vbmNlJyxcbiAgJ29wZW4nLCAnb3B0aW11bScsXG4gICdwYXR0ZXJuJywgJ3BsYWNlaG9sZGVyJywgJ3Bvc3RlcicsICdwcmVsb2FkJywgJ3Byb2ZpbGUnLFxuICAncmFkaW9Hcm91cCcsICdyZWFkT25seScsICdyZWwnLCAncmVxdWlyZWQnLCAncmV2ZXJzZWQnLCAncm9sZScsICdyb3dTcGFuJywgJ3Jvd3MnLFxuICAnc2FuZGJveCcsICdzY29wZScsICdzY29wZWQnLCAnc2Nyb2xsaW5nJywgJ3NlYW1sZXNzJywgJ3NlbGVjdGVkJywgJ3NoYXBlJywgJ3NpemUnLCAnc2l6ZXMnLCAnc3BhbicsICdzcGVsbENoZWNrJywgJ3NyYycsICdzcmNEb2MnLCAnc3JjTGFuZycsICdzcmNTZXQnLCAnc3RhcnQnLCAnc3RlcCcsICdzdHlsZScsICdzdW1tYXJ5JyxcbiAgJ3RhYkluZGV4JywgJ3RhcmdldCcsICd0aXRsZScsICd0eXBlJyxcbiAgJ3VzZU1hcCcsXG4gICd2YWx1ZScsXG4gICd3aWR0aCcsXG4gICd3bW9kZScsXG4gICd3cmFwJ1xuXTtcbiJdfQ==