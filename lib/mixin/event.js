'use strict';

function on(eventTypes, handler) {
  var preventDefault = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
  var intermediateHandler = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function (handler, event) {
    handler(event);
  };

  eventTypes = eventTypes.split(' '); ///

  eventTypes.forEach(function (eventType) {
    var addEventListener = this.addHandler(eventType, handler, preventDefault, intermediateHandler);

    if (addEventListener) {
      this.domElement.addEventListener(eventType, eventListener.bind(this));
    }
  }.bind(this));
}

function off(eventTypes, handler) {
  eventTypes = eventTypes.split(' '); ///

  eventTypes.forEach(function (eventType) {
    var removeEventListener = this.removeHandler(eventType, handler);

    if (removeEventListener) {
      this.domElement.removeEventListener(eventType, eventListener.bind(this));
    }
  }.bind(this));
}

function addHandler(eventType, handler, preventDefault, intermediateHandler) {
  if (preventDefault !== undefined) {
    handler.preventDefault = preventDefault;
  }

  if (intermediateHandler !== undefined) {
    handler.intermediateHandler = intermediateHandler;
  }

  var addEventListener = false,
      handlers = this.handlersMap[eventType];

  if (handlers === undefined) {
    handlers = [];

    this.handlersMap[eventType] = handlers;

    addEventListener = true;
  }

  handlers.push(handler);

  return addEventListener;
}

function removeHandler(eventType, handler) {
  var removeEventListener = false,
      handlers = this.handlersMap[eventType];

  if (handlers.length === 0) {
    delete this.handlersMap[eventType];

    removeEventListener = true;
  } else {
    var index = handlers.indexOf(handler);

    if (index > -1) {
      var deleteCount = 1;

      handlers.splice(index, deleteCount);
    }
  }

  return removeEventListener;
}

var event = {
  on: on,
  off: off,
  addHandler: addHandler,
  removeHandler: removeHandler
};

module.exports = event;

function eventListener(event) {
  var eventType = event.type,
      handlers = this.handlersMap[eventType];

  handlers.forEach(function (handler) {
    handler.intermediateHandler(handler, event);

    if (handler.preventDefault) {
      event.preventDefault();
    }
  });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi9taXhpbi9ldmVudC5qcyJdLCJuYW1lcyI6WyJvbiIsImV2ZW50VHlwZXMiLCJoYW5kbGVyIiwicHJldmVudERlZmF1bHQiLCJpbnRlcm1lZGlhdGVIYW5kbGVyIiwiZXZlbnQiLCJzcGxpdCIsImZvckVhY2giLCJldmVudFR5cGUiLCJhZGRFdmVudExpc3RlbmVyIiwiYWRkSGFuZGxlciIsImRvbUVsZW1lbnQiLCJldmVudExpc3RlbmVyIiwiYmluZCIsIm9mZiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyZW1vdmVIYW5kbGVyIiwidW5kZWZpbmVkIiwiaGFuZGxlcnMiLCJoYW5kbGVyc01hcCIsInB1c2giLCJsZW5ndGgiLCJpbmRleCIsImluZGV4T2YiLCJkZWxldGVDb3VudCIsInNwbGljZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJ0eXBlIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxTQUFTQSxFQUFULENBQVlDLFVBQVosRUFBd0JDLE9BQXhCLEVBQTRIO0FBQUEsTUFBM0ZDLGNBQTJGLHVFQUExRSxJQUEwRTtBQUFBLE1BQXBFQyxtQkFBb0UsdUVBQTlDLFVBQVNGLE9BQVQsRUFBa0JHLEtBQWxCLEVBQXlCO0FBQUVILFlBQVFHLEtBQVI7QUFBaUIsR0FBRTs7QUFDMUhKLGVBQWFBLFdBQVdLLEtBQVgsQ0FBaUIsR0FBakIsQ0FBYixDQUQwSCxDQUN0Rjs7QUFFcENMLGFBQVdNLE9BQVgsQ0FBbUIsVUFBU0MsU0FBVCxFQUFvQjtBQUNyQyxRQUFNQyxtQkFBbUIsS0FBS0MsVUFBTCxDQUFnQkYsU0FBaEIsRUFBMkJOLE9BQTNCLEVBQW9DQyxjQUFwQyxFQUFvREMsbUJBQXBELENBQXpCOztBQUVBLFFBQUlLLGdCQUFKLEVBQXNCO0FBQ3BCLFdBQUtFLFVBQUwsQ0FBZ0JGLGdCQUFoQixDQUFpQ0QsU0FBakMsRUFBNENJLGNBQWNDLElBQWQsQ0FBbUIsSUFBbkIsQ0FBNUM7QUFDRDtBQUNGLEdBTmtCLENBTWpCQSxJQU5pQixDQU1aLElBTlksQ0FBbkI7QUFPRDs7QUFFRCxTQUFTQyxHQUFULENBQWFiLFVBQWIsRUFBeUJDLE9BQXpCLEVBQWtDO0FBQ2hDRCxlQUFhQSxXQUFXSyxLQUFYLENBQWlCLEdBQWpCLENBQWIsQ0FEZ0MsQ0FDSTs7QUFFcENMLGFBQVdNLE9BQVgsQ0FBbUIsVUFBU0MsU0FBVCxFQUFvQjtBQUNyQyxRQUFNTyxzQkFBc0IsS0FBS0MsYUFBTCxDQUFtQlIsU0FBbkIsRUFBOEJOLE9BQTlCLENBQTVCOztBQUVBLFFBQUlhLG1CQUFKLEVBQXlCO0FBQ3ZCLFdBQUtKLFVBQUwsQ0FBZ0JJLG1CQUFoQixDQUFvQ1AsU0FBcEMsRUFBK0NJLGNBQWNDLElBQWQsQ0FBbUIsSUFBbkIsQ0FBL0M7QUFDRDtBQUNGLEdBTmtCLENBTWpCQSxJQU5pQixDQU1aLElBTlksQ0FBbkI7QUFPRDs7QUFFRCxTQUFTSCxVQUFULENBQW9CRixTQUFwQixFQUErQk4sT0FBL0IsRUFBd0NDLGNBQXhDLEVBQXdEQyxtQkFBeEQsRUFBOEU7QUFDNUUsTUFBSUQsbUJBQW1CYyxTQUF2QixFQUFrQztBQUNoQ2YsWUFBUUMsY0FBUixHQUF5QkEsY0FBekI7QUFDRDs7QUFFRCxNQUFJQyx3QkFBd0JhLFNBQTVCLEVBQXVDO0FBQ3JDZixZQUFRRSxtQkFBUixHQUE4QkEsbUJBQTlCO0FBQ0Q7O0FBRUQsTUFBSUssbUJBQW1CLEtBQXZCO0FBQUEsTUFDSVMsV0FBVyxLQUFLQyxXQUFMLENBQWlCWCxTQUFqQixDQURmOztBQUdBLE1BQUtVLGFBQWFELFNBQWxCLEVBQThCO0FBQzVCQyxlQUFXLEVBQVg7O0FBRUEsU0FBS0MsV0FBTCxDQUFpQlgsU0FBakIsSUFBOEJVLFFBQTlCOztBQUVBVCx1QkFBbUIsSUFBbkI7QUFDRDs7QUFFRFMsV0FBU0UsSUFBVCxDQUFjbEIsT0FBZDs7QUFFQSxTQUFPTyxnQkFBUDtBQUNEOztBQUVELFNBQVNPLGFBQVQsQ0FBdUJSLFNBQXZCLEVBQWtDTixPQUFsQyxFQUEyQztBQUN6QyxNQUFJYSxzQkFBc0IsS0FBMUI7QUFBQSxNQUNJRyxXQUFXLEtBQUtDLFdBQUwsQ0FBaUJYLFNBQWpCLENBRGY7O0FBR0EsTUFBS1UsU0FBU0csTUFBVCxLQUFvQixDQUF6QixFQUE2QjtBQUMzQixXQUFRLEtBQUtGLFdBQUwsQ0FBaUJYLFNBQWpCLENBQVI7O0FBRUFPLDBCQUFzQixJQUF0QjtBQUNELEdBSkQsTUFJTztBQUNMLFFBQU1PLFFBQVFKLFNBQVNLLE9BQVQsQ0FBaUJyQixPQUFqQixDQUFkOztBQUVBLFFBQUlvQixRQUFRLENBQUMsQ0FBYixFQUFnQjtBQUNkLFVBQU1FLGNBQWMsQ0FBcEI7O0FBRUFOLGVBQVNPLE1BQVQsQ0FBZ0JILEtBQWhCLEVBQXVCRSxXQUF2QjtBQUNEO0FBQ0Y7O0FBRUQsU0FBT1QsbUJBQVA7QUFDRDs7QUFFRCxJQUFNVixRQUFRO0FBQ1pMLE1BQUlBLEVBRFE7QUFFWmMsT0FBS0EsR0FGTztBQUdaSixjQUFZQSxVQUhBO0FBSVpNLGlCQUFlQTtBQUpILENBQWQ7O0FBT0FVLE9BQU9DLE9BQVAsR0FBaUJ0QixLQUFqQjs7QUFFQSxTQUFTTyxhQUFULENBQXVCUCxLQUF2QixFQUE4QjtBQUM1QixNQUFNRyxZQUFZSCxNQUFNdUIsSUFBeEI7QUFBQSxNQUNNVixXQUFXLEtBQUtDLFdBQUwsQ0FBaUJYLFNBQWpCLENBRGpCOztBQUdBVSxXQUFTWCxPQUFULENBQWlCLFVBQVNMLE9BQVQsRUFBa0I7QUFDakNBLFlBQVFFLG1CQUFSLENBQTRCRixPQUE1QixFQUFxQ0csS0FBckM7O0FBRUEsUUFBSUgsUUFBUUMsY0FBWixFQUE0QjtBQUMxQkUsWUFBTUYsY0FBTjtBQUNEO0FBQ0YsR0FORDtBQU9EIiwiZmlsZSI6ImV2ZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBvbihldmVudFR5cGVzLCBoYW5kbGVyLCBwcmV2ZW50RGVmYXVsdCA9IHRydWUsIGludGVybWVkaWF0ZUhhbmRsZXIgPSBmdW5jdGlvbihoYW5kbGVyLCBldmVudCkgeyBoYW5kbGVyKGV2ZW50KTsgfSkge1xuICBldmVudFR5cGVzID0gZXZlbnRUeXBlcy5zcGxpdCgnICcpOyAvLy9cblxuICBldmVudFR5cGVzLmZvckVhY2goZnVuY3Rpb24oZXZlbnRUeXBlKSB7XG4gICAgY29uc3QgYWRkRXZlbnRMaXN0ZW5lciA9IHRoaXMuYWRkSGFuZGxlcihldmVudFR5cGUsIGhhbmRsZXIsIHByZXZlbnREZWZhdWx0LCBpbnRlcm1lZGlhdGVIYW5kbGVyKTtcblxuICAgIGlmIChhZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICB0aGlzLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGV2ZW50TGlzdGVuZXIuYmluZCh0aGlzKSk7XG4gICAgfVxuICB9LmJpbmQodGhpcykpO1xufVxuXG5mdW5jdGlvbiBvZmYoZXZlbnRUeXBlcywgaGFuZGxlcikge1xuICBldmVudFR5cGVzID0gZXZlbnRUeXBlcy5zcGxpdCgnICcpOyAvLy9cblxuICBldmVudFR5cGVzLmZvckVhY2goZnVuY3Rpb24oZXZlbnRUeXBlKSB7XG4gICAgY29uc3QgcmVtb3ZlRXZlbnRMaXN0ZW5lciA9IHRoaXMucmVtb3ZlSGFuZGxlcihldmVudFR5cGUsIGhhbmRsZXIpO1xuICAgIFxuICAgIGlmIChyZW1vdmVFdmVudExpc3RlbmVyKSB7XG4gICAgICB0aGlzLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGV2ZW50TGlzdGVuZXIuYmluZCh0aGlzKSk7XG4gICAgfVxuICB9LmJpbmQodGhpcykpO1xufVxuXG5mdW5jdGlvbiBhZGRIYW5kbGVyKGV2ZW50VHlwZSwgaGFuZGxlciwgcHJldmVudERlZmF1bHQsIGludGVybWVkaWF0ZUhhbmRsZXIgKSB7XG4gIGlmIChwcmV2ZW50RGVmYXVsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaGFuZGxlci5wcmV2ZW50RGVmYXVsdCA9IHByZXZlbnREZWZhdWx0O1xuICB9XG5cbiAgaWYgKGludGVybWVkaWF0ZUhhbmRsZXIgIT09IHVuZGVmaW5lZCkge1xuICAgIGhhbmRsZXIuaW50ZXJtZWRpYXRlSGFuZGxlciA9IGludGVybWVkaWF0ZUhhbmRsZXI7XG4gIH1cblxuICBsZXQgYWRkRXZlbnRMaXN0ZW5lciA9IGZhbHNlLFxuICAgICAgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV07XG5cbiAgaWYgKChoYW5kbGVycyA9PT0gdW5kZWZpbmVkKSkge1xuICAgIGhhbmRsZXJzID0gW107XG5cbiAgICB0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV0gPSBoYW5kbGVycztcblxuICAgIGFkZEV2ZW50TGlzdGVuZXIgPSB0cnVlO1xuICB9XG5cbiAgaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcblxuICByZXR1cm4gYWRkRXZlbnRMaXN0ZW5lcjtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlSGFuZGxlcihldmVudFR5cGUsIGhhbmRsZXIpIHtcbiAgbGV0IHJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmYWxzZSxcbiAgICAgIGhhbmRsZXJzID0gdGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdO1xuXG4gIGlmICgoaGFuZGxlcnMubGVuZ3RoID09PSAwKSkge1xuICAgIGRlbGV0ZSAodGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdKTtcblxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIgPSB0cnVlO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGluZGV4ID0gaGFuZGxlcnMuaW5kZXhPZihoYW5kbGVyKTtcblxuICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICBjb25zdCBkZWxldGVDb3VudCA9IDE7XG5cbiAgICAgIGhhbmRsZXJzLnNwbGljZShpbmRleCwgZGVsZXRlQ291bnQpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZW1vdmVFdmVudExpc3RlbmVyO1xufVxuXG5jb25zdCBldmVudCA9IHtcbiAgb246IG9uLFxuICBvZmY6IG9mZixcbiAgYWRkSGFuZGxlcjogYWRkSGFuZGxlcixcbiAgcmVtb3ZlSGFuZGxlcjogcmVtb3ZlSGFuZGxlclxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBldmVudDtcblxuZnVuY3Rpb24gZXZlbnRMaXN0ZW5lcihldmVudCkge1xuICBjb25zdCBldmVudFR5cGUgPSBldmVudC50eXBlLFxuICAgICAgICBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXTtcblxuICBoYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgICBoYW5kbGVyLmludGVybWVkaWF0ZUhhbmRsZXIoaGFuZGxlciwgZXZlbnQpO1xuXG4gICAgaWYgKGhhbmRsZXIucHJldmVudERlZmF1bHQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9KTtcbn1cbiJdfQ==