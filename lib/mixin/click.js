'use strict';

function constructor(element) {
  element.clickHandlers = [];

  element.on('click', function (event) {
    var mouseTop = event.pageY,
        ///
    mouseLeft = event.pageX,
        ///
    mouseButton = event.button; ///

    element.clickHandlers.forEach(function (clickHandler) {
      if (mouseButton === clickHandler.mouseButton) {
        var allowDefault = clickHandler.allowDefault;

        clickHandler(mouseTop, mouseLeft, mouseButton);

        return allowDefault;
      }
    });
  });
}

function onClick(clickHandler, mouseButton, allowDefault) {
  addClickHandler(this, clickHandler, mouseButton, allowDefault);
}

function offClick(clickHandler) {
  removeClickHandler(this, clickHandler);
}

var click = {
  constructor: constructor,
  onClick: onClick,
  offClick: offClick
};

click.LEFT_MOUSE_BUTTON = 0;
click.MIDDLE_MOUSE_BUTTON = 1;
click.RIGHT_MOUSE_BUTTON = 2;

module.exports = click;

function addClickHandler(element, clickHandler) {
  var mouseButton = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : click.LEFT_MOUSE_BUTTON;
  var allowDefault = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;

  clickHandler.mouseButton = mouseButton; ///
  clickHandler.allowDefault = allowDefault; ///

  element.clickHandlers.push(clickHandler);
}

function removeClickHandler(element, clickHandler) {
  var index = element.clickHandlers.indexOf(clickHandler);

  if (index > -1) {
    var deleteCount = 1;

    element.clickHandlers.splice(index, deleteCount);
  }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi9taXhpbi9jbGljay5qcyJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsImVsZW1lbnQiLCJjbGlja0hhbmRsZXJzIiwib24iLCJldmVudCIsIm1vdXNlVG9wIiwicGFnZVkiLCJtb3VzZUxlZnQiLCJwYWdlWCIsIm1vdXNlQnV0dG9uIiwiYnV0dG9uIiwiZm9yRWFjaCIsImNsaWNrSGFuZGxlciIsImFsbG93RGVmYXVsdCIsIm9uQ2xpY2siLCJhZGRDbGlja0hhbmRsZXIiLCJvZmZDbGljayIsInJlbW92ZUNsaWNrSGFuZGxlciIsImNsaWNrIiwiTEVGVF9NT1VTRV9CVVRUT04iLCJNSURETEVfTU9VU0VfQlVUVE9OIiwiUklHSFRfTU9VU0VfQlVUVE9OIiwibW9kdWxlIiwiZXhwb3J0cyIsInB1c2giLCJpbmRleCIsImluZGV4T2YiLCJkZWxldGVDb3VudCIsInNwbGljZSJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsU0FBU0EsV0FBVCxDQUFxQkMsT0FBckIsRUFBOEI7QUFDNUJBLFVBQVFDLGFBQVIsR0FBd0IsRUFBeEI7O0FBRUFELFVBQVFFLEVBQVIsQ0FBVyxPQUFYLEVBQW9CLFVBQVVDLEtBQVYsRUFBaUI7QUFDbkMsUUFBTUMsV0FBV0QsTUFBTUUsS0FBdkI7QUFBQSxRQUErQjtBQUN6QkMsZ0JBQVlILE1BQU1JLEtBRHhCO0FBQUEsUUFDK0I7QUFDekJDLGtCQUFjTCxNQUFNTSxNQUYxQixDQURtQyxDQUdEOztBQUVsQ1QsWUFBUUMsYUFBUixDQUFzQlMsT0FBdEIsQ0FBOEIsVUFBU0MsWUFBVCxFQUF1QjtBQUNuRCxVQUFJSCxnQkFBZ0JHLGFBQWFILFdBQWpDLEVBQThDO0FBQzVDLFlBQU1JLGVBQWVELGFBQWFDLFlBQWxDOztBQUVBRCxxQkFBYVAsUUFBYixFQUF1QkUsU0FBdkIsRUFBa0NFLFdBQWxDOztBQUVBLGVBQU9JLFlBQVA7QUFDRDtBQUNGLEtBUkQ7QUFTRCxHQWREO0FBZUQ7O0FBRUQsU0FBU0MsT0FBVCxDQUFpQkYsWUFBakIsRUFBK0JILFdBQS9CLEVBQTRDSSxZQUE1QyxFQUEwRDtBQUN4REUsa0JBQWdCLElBQWhCLEVBQXNCSCxZQUF0QixFQUFvQ0gsV0FBcEMsRUFBaURJLFlBQWpEO0FBQ0Q7O0FBRUQsU0FBU0csUUFBVCxDQUFrQkosWUFBbEIsRUFBZ0M7QUFDOUJLLHFCQUFtQixJQUFuQixFQUF5QkwsWUFBekI7QUFDRDs7QUFFRCxJQUFNTSxRQUFRO0FBQ1psQixlQUFhQSxXQUREO0FBRVpjLFdBQVNBLE9BRkc7QUFHWkUsWUFBVUE7QUFIRSxDQUFkOztBQU1BRSxNQUFNQyxpQkFBTixHQUEwQixDQUExQjtBQUNBRCxNQUFNRSxtQkFBTixHQUE0QixDQUE1QjtBQUNBRixNQUFNRyxrQkFBTixHQUEyQixDQUEzQjs7QUFFQUMsT0FBT0MsT0FBUCxHQUFpQkwsS0FBakI7O0FBRUEsU0FBU0gsZUFBVCxDQUF5QmQsT0FBekIsRUFBa0NXLFlBQWxDLEVBQTZHO0FBQUEsTUFBN0RILFdBQTZELHVFQUEvQ1MsTUFBTUMsaUJBQXlDO0FBQUEsTUFBdEJOLFlBQXNCLHVFQUFQLEtBQU87O0FBQzNHRCxlQUFhSCxXQUFiLEdBQTJCQSxXQUEzQixDQUQyRyxDQUNuRTtBQUN4Q0csZUFBYUMsWUFBYixHQUE0QkEsWUFBNUIsQ0FGMkcsQ0FFakU7O0FBRTFDWixVQUFRQyxhQUFSLENBQXNCc0IsSUFBdEIsQ0FBMkJaLFlBQTNCO0FBQ0Q7O0FBRUQsU0FBU0ssa0JBQVQsQ0FBNEJoQixPQUE1QixFQUFxQ1csWUFBckMsRUFBbUQ7QUFDakQsTUFBTWEsUUFBUXhCLFFBQVFDLGFBQVIsQ0FBc0J3QixPQUF0QixDQUE4QmQsWUFBOUIsQ0FBZDs7QUFFQSxNQUFJYSxRQUFRLENBQUMsQ0FBYixFQUFnQjtBQUNkLFFBQU1FLGNBQWMsQ0FBcEI7O0FBRUExQixZQUFRQyxhQUFSLENBQXNCMEIsTUFBdEIsQ0FBNkJILEtBQTdCLEVBQW9DRSxXQUFwQztBQUNEO0FBQ0YiLCJmaWxlIjoiY2xpY2suanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIGNvbnN0cnVjdG9yKGVsZW1lbnQpIHtcbiAgZWxlbWVudC5jbGlja0hhbmRsZXJzID0gW107XG5cbiAgZWxlbWVudC5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBjb25zdCBtb3VzZVRvcCA9IGV2ZW50LnBhZ2VZLCAgLy8vXG4gICAgICAgICAgbW91c2VMZWZ0ID0gZXZlbnQucGFnZVgsIC8vL1xuICAgICAgICAgIG1vdXNlQnV0dG9uID0gZXZlbnQuYnV0dG9uOyAvLy9cblxuICAgIGVsZW1lbnQuY2xpY2tIYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uKGNsaWNrSGFuZGxlcikge1xuICAgICAgaWYgKG1vdXNlQnV0dG9uID09PSBjbGlja0hhbmRsZXIubW91c2VCdXR0b24pIHtcbiAgICAgICAgY29uc3QgYWxsb3dEZWZhdWx0ID0gY2xpY2tIYW5kbGVyLmFsbG93RGVmYXVsdDtcblxuICAgICAgICBjbGlja0hhbmRsZXIobW91c2VUb3AsIG1vdXNlTGVmdCwgbW91c2VCdXR0b24pO1xuXG4gICAgICAgIHJldHVybiBhbGxvd0RlZmF1bHQ7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBvbkNsaWNrKGNsaWNrSGFuZGxlciwgbW91c2VCdXR0b24sIGFsbG93RGVmYXVsdCkge1xuICBhZGRDbGlja0hhbmRsZXIodGhpcywgY2xpY2tIYW5kbGVyLCBtb3VzZUJ1dHRvbiwgYWxsb3dEZWZhdWx0KTtcbn1cblxuZnVuY3Rpb24gb2ZmQ2xpY2soY2xpY2tIYW5kbGVyKSB7XG4gIHJlbW92ZUNsaWNrSGFuZGxlcih0aGlzLCBjbGlja0hhbmRsZXIpO1xufVxuXG5jb25zdCBjbGljayA9IHtcbiAgY29uc3RydWN0b3I6IGNvbnN0cnVjdG9yLFxuICBvbkNsaWNrOiBvbkNsaWNrLFxuICBvZmZDbGljazogb2ZmQ2xpY2tcbn07XG5cbmNsaWNrLkxFRlRfTU9VU0VfQlVUVE9OID0gMDtcbmNsaWNrLk1JRERMRV9NT1VTRV9CVVRUT04gPSAxO1xuY2xpY2suUklHSFRfTU9VU0VfQlVUVE9OID0gMjtcblxubW9kdWxlLmV4cG9ydHMgPSBjbGljaztcblxuZnVuY3Rpb24gYWRkQ2xpY2tIYW5kbGVyKGVsZW1lbnQsIGNsaWNrSGFuZGxlciwgbW91c2VCdXR0b24gPSBjbGljay5MRUZUX01PVVNFX0JVVFRPTiwgYWxsb3dEZWZhdWx0ID0gZmFsc2UpIHtcbiAgY2xpY2tIYW5kbGVyLm1vdXNlQnV0dG9uID0gbW91c2VCdXR0b247IC8vL1xuICBjbGlja0hhbmRsZXIuYWxsb3dEZWZhdWx0ID0gYWxsb3dEZWZhdWx0OyAvLy9cblxuICBlbGVtZW50LmNsaWNrSGFuZGxlcnMucHVzaChjbGlja0hhbmRsZXIpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVDbGlja0hhbmRsZXIoZWxlbWVudCwgY2xpY2tIYW5kbGVyKSB7XG4gIGNvbnN0IGluZGV4ID0gZWxlbWVudC5jbGlja0hhbmRsZXJzLmluZGV4T2YoY2xpY2tIYW5kbGVyKTtcblxuICBpZiAoaW5kZXggPiAtMSkge1xuICAgIGNvbnN0IGRlbGV0ZUNvdW50ID0gMTtcblxuICAgIGVsZW1lbnQuY2xpY2tIYW5kbGVycy5zcGxpY2UoaW5kZXgsIGRlbGV0ZUNvdW50KTtcbiAgfVxufVxuXG4iXX0=