"use strict";

function onResize(handler) {
  var element = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this;
  var intermediateHandler = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultIntermediateResizeHandler;
  var resizeEventListeners = findResizeEventListeners(element);

  if (resizeEventListeners.length === 0) {
    addResizeObject(element);
  }

  var eventType = "resize";
  this.addEventListener(eventType, handler, element, intermediateHandler);
}

function offResize(handler) {
  var element = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this;
  var eventType = "resize";
  this.removeEventListener(eventType, handler, element);
  var resizeEventListeners = findResizeEventListeners(element);

  if (resizeEventListeners.length === 0) {
    removeResizeObject(element);
  }
}

module.exports = {
  onResize: onResize,
  offResize: offResize
};

function addResizeObject(element) {
  var resizeObject = document.createElement("object"),
      domElement = element.getDOMElement(),
      style = "display: block; \n                 position: absolute; \n                 top: 0; \n                 left: 0; \n                 height: 100%; \n                 width: 100%; \n                 overflow: hidden; \n                 pointer-events: none; \n                 z-index: -1;",
      data = "about:blank",
      type = "text/html";
  resizeObject.setAttribute("style", style);
  resizeObject.data = data;
  resizeObject.type = type;
  element.__resizeObject__ = resizeObject;

  resizeObject.onload = function () {
    resizeObjectLoadHandler(element);
  };

  domElement.appendChild(resizeObject);
}

function removeResizeObject(element) {
  var domElement = element.getDOMElement(),
      resizeObject = element.__resizeObject__,
      objectWindow = resizeObject.contentDocument.defaultView; ///

  objectWindow.removeEventListener("resize", resizeEventListener);
  domElement.removeChild(resizeObject);
}

function resizeObjectLoadHandler(element) {
  var resizeObject = element.__resizeObject__,
      resizeObjectWindow = resizeObject.contentDocument.defaultView; ///

  resizeObjectWindow.addEventListener("resize", function (event) {
    var resizeEventListeners = findResizeEventListeners(element);
    resizeEventListeners.forEach(function (resizeEventListener) {
      resizeEventListener(event);
    });
  });
}

function findResizeEventListeners(element) {
  var resizeEventListeners = [];

  if (element.hasOwnProperty("eventListeners")) {
    var eventListeners = element.eventListeners; ///

    eventListeners.forEach(function (eventListener) {
      if (eventListener.eventType === "resize") {
        var _resizeEventListener = eventListener;
        resizeEventListeners.push(_resizeEventListener);
      }
    });
  }

  return resizeEventListeners;
}

function defaultIntermediateResizeHandler(handler, event, element) {
  var window = element,
      ///
  width = window.getWidth(),
      height = window.getHeight();
  handler.call(element, width, height, event, element);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc2l6ZS5qcyJdLCJuYW1lcyI6WyJvblJlc2l6ZSIsImhhbmRsZXIiLCJlbGVtZW50IiwiaW50ZXJtZWRpYXRlSGFuZGxlciIsImRlZmF1bHRJbnRlcm1lZGlhdGVSZXNpemVIYW5kbGVyIiwicmVzaXplRXZlbnRMaXN0ZW5lcnMiLCJmaW5kUmVzaXplRXZlbnRMaXN0ZW5lcnMiLCJsZW5ndGgiLCJhZGRSZXNpemVPYmplY3QiLCJldmVudFR5cGUiLCJhZGRFdmVudExpc3RlbmVyIiwib2ZmUmVzaXplIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInJlbW92ZVJlc2l6ZU9iamVjdCIsIm1vZHVsZSIsImV4cG9ydHMiLCJyZXNpemVPYmplY3QiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJkb21FbGVtZW50IiwiZ2V0RE9NRWxlbWVudCIsInN0eWxlIiwiZGF0YSIsInR5cGUiLCJzZXRBdHRyaWJ1dGUiLCJfX3Jlc2l6ZU9iamVjdF9fIiwib25sb2FkIiwicmVzaXplT2JqZWN0TG9hZEhhbmRsZXIiLCJhcHBlbmRDaGlsZCIsIm9iamVjdFdpbmRvdyIsImNvbnRlbnREb2N1bWVudCIsImRlZmF1bHRWaWV3IiwicmVzaXplRXZlbnRMaXN0ZW5lciIsInJlbW92ZUNoaWxkIiwicmVzaXplT2JqZWN0V2luZG93IiwiZXZlbnQiLCJmb3JFYWNoIiwiaGFzT3duUHJvcGVydHkiLCJldmVudExpc3RlbmVycyIsImV2ZW50TGlzdGVuZXIiLCJwdXNoIiwid2luZG93Iiwid2lkdGgiLCJnZXRXaWR0aCIsImhlaWdodCIsImdldEhlaWdodCIsImNhbGwiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLFNBQVNBLFFBQVQsQ0FBa0JDLE9BQWxCLEVBQW1HO0FBQUEsTUFBeEVDLE9BQXdFLHVFQUE5RCxJQUE4RDtBQUFBLE1BQXhEQyxtQkFBd0QsdUVBQWxDQyxnQ0FBa0M7QUFDakcsTUFBTUMsb0JBQW9CLEdBQUdDLHdCQUF3QixDQUFDSixPQUFELENBQXJEOztBQUVB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a0NKLE9BQWxDLEVBQTJDO0FBQ3pDLE1BQU1HLG9CQUFvQixHQUFHLEVBQTdCOztBQUVBLE1BQUlILE9BQU8sQ0FBQ21DLGNBQVIsQ0FBdUIsZ0JBQXZCLENBQUosRUFBOEM7QUFDNUMsUUFBTUMsY0FBYyxHQUFHcEMsT0FBTyxDQUFDb0MsY0FBL0IsQ0FENEMsQ0FDSTs7QUFFaERBLElBQUFBLGNBQWMsQ0FBQ0YsT0FBZixDQUF1QixVQUFTRyxhQUFULEVBQXdCO0FBQzdDLFVBQUlBLGFBQWEsQ0FBQzlCLFNBQWQsS0FBNEIsUUFBaEMsRUFBMEM7QUFDeEMsWUFBTXVCLG9CQUFtQixHQUFHTyxhQUE1QjtBQUVBbEMsUUFBQUEsb0JBQW9CLENBQUNtQyxJQUFyQixDQUEwQlIsb0JBQTFCO0FBQ0Q7QUFDRixLQU5EO0FBT0Q7O0FBRUQsU0FBTzNCLG9CQUFQO0FBQ0Q7O0FBRUQsU0FBU0QsZ0NBQVQsQ0FBMENILE9BQTFDLEVBQW1Ea0MsS0FBbkQsRUFBMERqQyxPQUExRCxFQUFtRTtBQUNqRSxNQUFNdUMsTUFBTSxHQUFHdkMsT0FBZjtBQUFBLE1BQXdCO0FBQ2xCd0MsRUFBQUEsS0FBSyxHQUFHRCxNQUFNLENBQUNFLFFBQVAsRUFEZDtBQUFBLE1BRU1DLE1BQU0sR0FBR0gsTUFBTSxDQUFDSSxTQUFQLEVBRmY7QUFJQTVDLEVBQUFBLE9BQU8sQ0FBQzZDLElBQVIsQ0FBYTVDLE9BQWIsRUFBc0J3QyxLQUF0QixFQUE2QkUsTUFBN0IsRUFBcUNULEtBQXJDLEVBQTRDakMsT0FBNUM7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5mdW5jdGlvbiBvblJlc2l6ZShoYW5kbGVyLCBlbGVtZW50ID0gdGhpcywgaW50ZXJtZWRpYXRlSGFuZGxlciA9IGRlZmF1bHRJbnRlcm1lZGlhdGVSZXNpemVIYW5kbGVyKSB7XG4gIGNvbnN0IHJlc2l6ZUV2ZW50TGlzdGVuZXJzID0gZmluZFJlc2l6ZUV2ZW50TGlzdGVuZXJzKGVsZW1lbnQpO1xuXG4gIGlmIChyZXNpemVFdmVudExpc3RlbmVycy5sZW5ndGggPT09IDApIHtcbiAgICBhZGRSZXNpemVPYmplY3QoZWxlbWVudCk7XG4gIH1cblxuICBjb25zdCBldmVudFR5cGUgPSBcInJlc2l6ZVwiO1xuXG4gIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGhhbmRsZXIsIGVsZW1lbnQsIGludGVybWVkaWF0ZUhhbmRsZXIpO1xufVxuXG5mdW5jdGlvbiBvZmZSZXNpemUoaGFuZGxlciwgZWxlbWVudCA9IHRoaXMpIHtcbiAgY29uc3QgZXZlbnRUeXBlID0gXCJyZXNpemVcIjtcblxuICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBoYW5kbGVyLCBlbGVtZW50KTtcblxuICBjb25zdCByZXNpemVFdmVudExpc3RlbmVycyA9IGZpbmRSZXNpemVFdmVudExpc3RlbmVycyhlbGVtZW50KTtcbiAgXG4gIGlmIChyZXNpemVFdmVudExpc3RlbmVycy5sZW5ndGggPT09IDApIHtcbiAgICByZW1vdmVSZXNpemVPYmplY3QoZWxlbWVudCk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIG9uUmVzaXplLFxuICBvZmZSZXNpemVcbn07XG5cbmZ1bmN0aW9uIGFkZFJlc2l6ZU9iamVjdChlbGVtZW50KSB7XG4gIGNvbnN0IHJlc2l6ZU9iamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvYmplY3RcIiksXG4gICAgICAgIGRvbUVsZW1lbnQgPSBlbGVtZW50LmdldERPTUVsZW1lbnQoKSxcbiAgICAgICAgc3R5bGUgPSBgZGlzcGxheTogYmxvY2s7IFxuICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7IFxuICAgICAgICAgICAgICAgICB0b3A6IDA7IFxuICAgICAgICAgICAgICAgICBsZWZ0OiAwOyBcbiAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOyBcbiAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7IFxuICAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOyBcbiAgICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7IFxuICAgICAgICAgICAgICAgICB6LWluZGV4OiAtMTtgLFxuICAgICAgICBkYXRhID0gXCJhYm91dDpibGFua1wiLFxuICAgICAgICB0eXBlID0gXCJ0ZXh0L2h0bWxcIjtcblxuICByZXNpemVPYmplY3Quc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgc3R5bGUpO1xuICByZXNpemVPYmplY3QuZGF0YSA9IGRhdGE7XG4gIHJlc2l6ZU9iamVjdC50eXBlID0gdHlwZTtcblxuICBlbGVtZW50Ll9fcmVzaXplT2JqZWN0X18gPSByZXNpemVPYmplY3Q7XG5cbiAgcmVzaXplT2JqZWN0Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJlc2l6ZU9iamVjdExvYWRIYW5kbGVyKGVsZW1lbnQpXG4gIH07XG5cbiAgZG9tRWxlbWVudC5hcHBlbmRDaGlsZChyZXNpemVPYmplY3QpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVSZXNpemVPYmplY3QoZWxlbWVudCkge1xuICBjb25zdCBkb21FbGVtZW50ID0gZWxlbWVudC5nZXRET01FbGVtZW50KCksXG4gICAgICAgIHJlc2l6ZU9iamVjdCA9IGVsZW1lbnQuX19yZXNpemVPYmplY3RfXyxcbiAgICAgICAgb2JqZWN0V2luZG93ID0gcmVzaXplT2JqZWN0LmNvbnRlbnREb2N1bWVudC5kZWZhdWx0VmlldzsgIC8vL1xuXG4gIG9iamVjdFdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHJlc2l6ZUV2ZW50TGlzdGVuZXIpO1xuXG4gIGRvbUVsZW1lbnQucmVtb3ZlQ2hpbGQocmVzaXplT2JqZWN0KTtcbn1cblxuZnVuY3Rpb24gcmVzaXplT2JqZWN0TG9hZEhhbmRsZXIoZWxlbWVudCkge1xuICBjb25zdCByZXNpemVPYmplY3QgPSBlbGVtZW50Ll9fcmVzaXplT2JqZWN0X18sXG4gICAgICAgIHJlc2l6ZU9iamVjdFdpbmRvdyA9IHJlc2l6ZU9iamVjdC5jb250ZW50RG9jdW1lbnQuZGVmYXVsdFZpZXc7ICAvLy9cblxuICByZXNpemVPYmplY3RXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBmdW5jdGlvbihldmVudCkge1xuICAgIGNvbnN0IHJlc2l6ZUV2ZW50TGlzdGVuZXJzID0gZmluZFJlc2l6ZUV2ZW50TGlzdGVuZXJzKGVsZW1lbnQpO1xuXG4gICAgcmVzaXplRXZlbnRMaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbihyZXNpemVFdmVudExpc3RlbmVyKXtcbiAgICAgIHJlc2l6ZUV2ZW50TGlzdGVuZXIoZXZlbnQpO1xuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZmluZFJlc2l6ZUV2ZW50TGlzdGVuZXJzKGVsZW1lbnQpIHtcbiAgY29uc3QgcmVzaXplRXZlbnRMaXN0ZW5lcnMgPSBbXTtcbiAgXG4gIGlmIChlbGVtZW50Lmhhc093blByb3BlcnR5KFwiZXZlbnRMaXN0ZW5lcnNcIikpIHtcbiAgICBjb25zdCBldmVudExpc3RlbmVycyA9IGVsZW1lbnQuZXZlbnRMaXN0ZW5lcnM7ICAvLy9cblxuICAgIGV2ZW50TGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24oZXZlbnRMaXN0ZW5lcikge1xuICAgICAgaWYgKGV2ZW50TGlzdGVuZXIuZXZlbnRUeXBlID09PSBcInJlc2l6ZVwiKSB7XG4gICAgICAgIGNvbnN0IHJlc2l6ZUV2ZW50TGlzdGVuZXIgPSBldmVudExpc3RlbmVyO1xuXG4gICAgICAgIHJlc2l6ZUV2ZW50TGlzdGVuZXJzLnB1c2gocmVzaXplRXZlbnRMaXN0ZW5lcik7XG4gICAgICB9ICAgICAgXG4gICAgfSk7XG4gIH0gIFxuICBcbiAgcmV0dXJuIHJlc2l6ZUV2ZW50TGlzdGVuZXJzO1xufVxuXG5mdW5jdGlvbiBkZWZhdWx0SW50ZXJtZWRpYXRlUmVzaXplSGFuZGxlcihoYW5kbGVyLCBldmVudCwgZWxlbWVudCkge1xuICBjb25zdCB3aW5kb3cgPSBlbGVtZW50LCAvLy9cbiAgICAgICAgd2lkdGggPSB3aW5kb3cuZ2V0V2lkdGgoKSxcbiAgICAgICAgaGVpZ2h0ID0gd2luZG93LmdldEhlaWdodCgpO1xuXG4gIGhhbmRsZXIuY2FsbChlbGVtZW50LCB3aWR0aCwgaGVpZ2h0LCBldmVudCwgZWxlbWVudCk7XG59XG4iXX0=