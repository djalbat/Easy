"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.onResize = onResize;
exports.offResize = offResize;

function onResize(handler) {
  var element = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this;
  var intermediateHandler = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultIntermediateResizeHandler;
  var resizeEventListeners = findResizeEventListeners(element);

  if (resizeEventListeners.length === 0) {
    addResizeObject(element);
  }

  var eventType = "resize";
  this.addEventListener(eventType, handler, element, intermediateHandler);
}

function offResize(handler) {
  var element = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this;
  var eventType = "resize";
  this.removeEventListener(eventType, handler, element);
  var resizeEventListeners = findResizeEventListeners(element);

  if (resizeEventListeners.length === 0) {
    removeResizeObject(element);
  }
}

function addResizeObject(element) {
  var resizeObject = document.createElement("object"),
      domElement = element.getDOMElement(),
      style = "display: block; \n                 position: absolute; \n                 top: 0; \n                 left: 0; \n                 height: 100%; \n                 width: 100%; \n                 overflow: hidden; \n                 pointer-events: none; \n                 z-index: -1;",
      data = "about:blank",
      type = "text/html";
  resizeObject.setAttribute("style", style);
  resizeObject.data = data;
  resizeObject.type = type;
  element.__resizeObject__ = resizeObject;

  resizeObject.onload = function () {
    resizeObjectLoadHandler(element);
  };

  domElement.appendChild(resizeObject);
}

function removeResizeObject(element) {
  var domElement = element.getDOMElement(),
      resizeObject = element.__resizeObject__,
      objectWindow = resizeObject.contentDocument.defaultView; ///

  objectWindow.removeEventListener("resize", resizeEventListener);
  domElement.removeChild(resizeObject);
}

function resizeObjectLoadHandler(element) {
  var resizeObject = element.__resizeObject__,
      resizeObjectWindow = resizeObject.contentDocument.defaultView; ///

  resizeObjectWindow.addEventListener("resize", function (event) {
    var resizeEventListeners = findResizeEventListeners(element);
    resizeEventListeners.forEach(function (resizeEventListener) {
      resizeEventListener(event);
    });
  });
}

function findResizeEventListeners(element) {
  var resizeEventListeners = [];

  if (element.hasOwnProperty("eventListeners")) {
    var eventListeners = element.eventListeners; ///

    eventListeners.forEach(function (eventListener) {
      if (eventListener.eventType === "resize") {
        var _resizeEventListener = eventListener;
        resizeEventListeners.push(_resizeEventListener);
      }
    });
  }

  return resizeEventListeners;
}

function defaultIntermediateResizeHandler(handler, event, element) {
  var window = element,
      ///
  width = window.getWidth(),
      height = window.getHeight();
  handler.call(element, width, height, event, element);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc2l6ZS5qcyJdLCJuYW1lcyI6WyJvblJlc2l6ZSIsImhhbmRsZXIiLCJlbGVtZW50IiwiaW50ZXJtZWRpYXRlSGFuZGxlciIsImRlZmF1bHRJbnRlcm1lZGlhdGVSZXNpemVIYW5kbGVyIiwicmVzaXplRXZlbnRMaXN0ZW5lcnMiLCJmaW5kUmVzaXplRXZlbnRMaXN0ZW5lcnMiLCJsZW5ndGgiLCJhZGRSZXNpemVPYmplY3QiLCJldmVudFR5cGUiLCJhZGRFdmVudExpc3RlbmVyIiwib2ZmUmVzaXplIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInJlbW92ZVJlc2l6ZU9iamVjdCIsInJlc2l6ZU9iamVjdCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImRvbUVsZW1lbnQiLCJnZXRET01FbGVtZW50Iiwic3R5bGUiLCJkYXRhIiwidHlwZSIsInNldEF0dHJpYnV0ZSIsIl9fcmVzaXplT2JqZWN0X18iLCJvbmxvYWQiLCJyZXNpemVPYmplY3RMb2FkSGFuZGxlciIsImFwcGVuZENoaWxkIiwib2JqZWN0V2luZG93IiwiY29udGVudERvY3VtZW50IiwiZGVmYXVsdFZpZXciLCJyZXNpemVFdmVudExpc3RlbmVyIiwicmVtb3ZlQ2hpbGQiLCJyZXNpemVPYmplY3RXaW5kb3ciLCJldmVudCIsImZvckVhY2giLCJoYXNPd25Qcm9wZXJ0eSIsImV2ZW50TGlzdGVuZXJzIiwiZXZlbnRMaXN0ZW5lciIsInB1c2giLCJ3aW5kb3ciLCJ3aWR0aCIsImdldFdpZHRoIiwiaGVpZ2h0IiwiZ2V0SGVpZ2h0IiwiY2FsbCJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7O0FBRU8sU0FBU0EsUUFBVCxDQUFrQkMsT0FBbEIsRUFBbUc7QUFBQSxNQUF4RUMsT0FBd0UsdUVBQTlELElBQThEO0FBQUEsTUFBeERDLG1CQUF3RCx1RUFBbENDLGdDQUFrQztBQUN4RyxNQUFNQyxvQkFBb0IsR0FBR0Msd0JBQXdCLENBQUNKLE9BQUQsQ0FBckQ7O0FBRUEsTUFBSUcsb0JBQW9CLENBQUNFLE1BQXJCLEtBQWdDLENBQXBDLEVBQXVDO0FBQ3JDQyxJQUFBQSxlQUFlLENBQUNOLE9BQUQsQ0FBZjtBQUNEOztBQUVELE1BQU1PLFNBQVMsR0FBRyxRQUFsQjtBQUVBLE9BQUtDLGdCQUFMLENBQXNCRCxTQUF0QixFQUFpQ1IsT0FBakMsRUFBMENDLE9BQTFDLEVBQW1EQyxtQkFBbkQ7QUFDRDs7QUFFTSxTQUFTUSxTQUFULENBQW1CVixPQUFuQixFQUE0QztBQUFBLE1BQWhCQyxPQUFnQix1RUFBTixJQUFNO0FBQ2pELE1BQU1PLFNBQVMsR0FBRyxRQUFsQjtBQUVBLE9BQUtHLG1CQUFMLENBQXlCSCxTQUF6QixFQUFvQ1IsT0FBcEMsRUFBNkNDLE9BQTdDO0FBRUEsTUFBTUcsb0JBQW9CLEdBQUdDLHdCQUF3QixDQUFDSixPQUFELENBQXJEOztBQUVBLE1BQUlHLG9CQUFvQixDQUFDRSxNQUFyQixLQUFnQyxDQUFwQyxFQUF1QztBQUNyQ00sSUFBQUEsa0JBQWtCLENBQUNYLE9BQUQsQ0FBbEI7QUFDRDtBQUNGOztBQUVELFNBQVNNLGVBQVQsQ0FBeUJOLE9BQXpCLEVBQWtDO0FBQ2hDLE1BQU1ZLFlBQVksR0FBR0MsUUFBUSxDQUFDQyxhQUFULENBQXVCLFFBQXZCLENBQXJCO0FBQUEsTUFDTUMsVUFBVSxHQUFHZixPQUFPLENBQUNnQixhQUFSLEVBRG5CO0FBQUEsTUFFTUMsS0FBSyxpU0FGWDtBQUFBLE1BV01DLElBQUksR0FBRyxhQVhiO0FBQUEsTUFZTUMsSUFBSSxHQUFHLFdBWmI7QUFjQVAsRUFBQUEsWUFBWSxDQUFDUSxZQUFiLENBQTBCLE9BQTFCLEVBQW1DSCxLQUFuQztBQUNBTCxFQUFBQSxZQUFZLENBQUNNLElBQWIsR0FBb0JBLElBQXBCO0FBQ0FOLEVBQUFBLFlBQVksQ0FBQ08sSUFBYixHQUFvQkEsSUFBcEI7QUFFQW5CLEVBQUFBLE9BQU8sQ0FBQ3FCLGdCQUFSLEdBQTJCVCxZQUEzQjs7QUFFQUEsRUFBQUEsWUFBWSxDQUFDVSxNQUFiLEdBQXNCLFlBQVc7QUFDL0JDLElBQUFBLHVCQUF1QixDQUFDdkIsT0FBRCxDQUF2QjtBQUNELEdBRkQ7O0FBSUFlLEVBQUFBLFVBQVUsQ0FBQ1MsV0FBWCxDQUF1QlosWUFBdkI7QUFDRDs7QUFFRCxTQUFTRCxrQkFBVCxDQUE0QlgsT0FBNUIsRUFBcUM7QUFDbkMsTUFBTWUsVUFBVSxHQUFHZixPQUFPLENBQUNnQixhQUFSLEVBQW5CO0FBQUEsTUFDTUosWUFBWSxHQUFHWixPQUFPLENBQUNxQixnQkFEN0I7QUFBQSxNQUVNSSxZQUFZLEdBQUdiLFlBQVksQ0FBQ2MsZUFBYixDQUE2QkMsV0FGbEQsQ0FEbUMsQ0FHNkI7O0FBRWhFRixFQUFBQSxZQUFZLENBQUNmLG1CQUFiLENBQWlDLFFBQWpDLEVBQTJDa0IsbUJBQTNDO0FBRUFiLEVBQUFBLFVBQVUsQ0FBQ2MsV0FBWCxDQUF1QmpCLFlBQXZCO0FBQ0Q7O0FBRUQsU0FBU1csdUJBQVQsQ0FBaUN2QixPQUFqQyxFQUEwQztBQUN4QyxNQUFNWSxZQUFZLEdBQUdaLE9BQU8sQ0FBQ3FCLGdCQUE3QjtBQUFBLE1BQ01TLGtCQUFrQixHQUFHbEIsWUFBWSxDQUFDYyxlQUFiLENBQTZCQyxXQUR4RCxDQUR3QyxDQUU4Qjs7QUFFdEVHLEVBQUFBLGtCQUFrQixDQUFDdEIsZ0JBQW5CLENBQW9DLFFBQXBDLEVBQThDLFVBQVN1QixLQUFULEVBQWdCO0FBQzVELFFBQU01QixvQkFBb0IsR0FBR0Msd0JBQXdCLENBQUNKLE9BQUQsQ0FBckQ7QUFFQUcsSUFBQUEsb0JBQW9CLENBQUM2QixPQUFyQixDQUE2QixVQUFTSixtQkFBVCxFQUE2QjtBQUN4REEsTUFBQUEsbUJBQW1CLENBQUNHLEtBQUQsQ0FBbkI7QUFDRCxLQUZEO0FBR0QsR0FORDtBQU9EOztBQUVELFNBQVMzQix3QkFBVCxDQUFrQ0osT0FBbEMsRUFBMkM7QUFDekMsTUFBTUcsb0JBQW9CLEdBQUcsRUFBN0I7O0FBRUEsTUFBSUgsT0FBTyxDQUFDaUMsY0FBUixDQUF1QixnQkFBdkIsQ0FBSixFQUE4QztBQUM1QyxRQUFNQyxjQUFjLEdBQUdsQyxPQUFPLENBQUNrQyxjQUEvQixDQUQ0QyxDQUNJOztBQUVoREEsSUFBQUEsY0FBYyxDQUFDRixPQUFmLENBQXVCLFVBQVNHLGFBQVQsRUFBd0I7QUFDN0MsVUFBSUEsYUFBYSxDQUFDNUIsU0FBZCxLQUE0QixRQUFoQyxFQUEwQztBQUN4QyxZQUFNcUIsb0JBQW1CLEdBQUdPLGFBQTVCO0FBRUFoQyxRQUFBQSxvQkFBb0IsQ0FBQ2lDLElBQXJCLENBQTBCUixvQkFBMUI7QUFDRDtBQUNGLEtBTkQ7QUFPRDs7QUFFRCxTQUFPekIsb0JBQVA7QUFDRDs7QUFFRCxTQUFTRCxnQ0FBVCxDQUEwQ0gsT0FBMUMsRUFBbURnQyxLQUFuRCxFQUEwRC9CLE9BQTFELEVBQW1FO0FBQ2pFLE1BQU1xQyxNQUFNLEdBQUdyQyxPQUFmO0FBQUEsTUFBd0I7QUFDbEJzQyxFQUFBQSxLQUFLLEdBQUdELE1BQU0sQ0FBQ0UsUUFBUCxFQURkO0FBQUEsTUFFTUMsTUFBTSxHQUFHSCxNQUFNLENBQUNJLFNBQVAsRUFGZjtBQUlBMUMsRUFBQUEsT0FBTyxDQUFDMkMsSUFBUixDQUFhMUMsT0FBYixFQUFzQnNDLEtBQXRCLEVBQTZCRSxNQUE3QixFQUFxQ1QsS0FBckMsRUFBNEMvQixPQUE1QztBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBvblJlc2l6ZShoYW5kbGVyLCBlbGVtZW50ID0gdGhpcywgaW50ZXJtZWRpYXRlSGFuZGxlciA9IGRlZmF1bHRJbnRlcm1lZGlhdGVSZXNpemVIYW5kbGVyKSB7XG4gIGNvbnN0IHJlc2l6ZUV2ZW50TGlzdGVuZXJzID0gZmluZFJlc2l6ZUV2ZW50TGlzdGVuZXJzKGVsZW1lbnQpO1xuXG4gIGlmIChyZXNpemVFdmVudExpc3RlbmVycy5sZW5ndGggPT09IDApIHtcbiAgICBhZGRSZXNpemVPYmplY3QoZWxlbWVudCk7XG4gIH1cblxuICBjb25zdCBldmVudFR5cGUgPSBcInJlc2l6ZVwiO1xuXG4gIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGhhbmRsZXIsIGVsZW1lbnQsIGludGVybWVkaWF0ZUhhbmRsZXIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gb2ZmUmVzaXplKGhhbmRsZXIsIGVsZW1lbnQgPSB0aGlzKSB7XG4gIGNvbnN0IGV2ZW50VHlwZSA9IFwicmVzaXplXCI7XG5cbiAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgaGFuZGxlciwgZWxlbWVudCk7XG5cbiAgY29uc3QgcmVzaXplRXZlbnRMaXN0ZW5lcnMgPSBmaW5kUmVzaXplRXZlbnRMaXN0ZW5lcnMoZWxlbWVudCk7XG4gIFxuICBpZiAocmVzaXplRXZlbnRMaXN0ZW5lcnMubGVuZ3RoID09PSAwKSB7XG4gICAgcmVtb3ZlUmVzaXplT2JqZWN0KGVsZW1lbnQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFkZFJlc2l6ZU9iamVjdChlbGVtZW50KSB7XG4gIGNvbnN0IHJlc2l6ZU9iamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvYmplY3RcIiksXG4gICAgICAgIGRvbUVsZW1lbnQgPSBlbGVtZW50LmdldERPTUVsZW1lbnQoKSxcbiAgICAgICAgc3R5bGUgPSBgZGlzcGxheTogYmxvY2s7IFxuICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7IFxuICAgICAgICAgICAgICAgICB0b3A6IDA7IFxuICAgICAgICAgICAgICAgICBsZWZ0OiAwOyBcbiAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOyBcbiAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7IFxuICAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOyBcbiAgICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7IFxuICAgICAgICAgICAgICAgICB6LWluZGV4OiAtMTtgLFxuICAgICAgICBkYXRhID0gXCJhYm91dDpibGFua1wiLFxuICAgICAgICB0eXBlID0gXCJ0ZXh0L2h0bWxcIjtcblxuICByZXNpemVPYmplY3Quc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgc3R5bGUpO1xuICByZXNpemVPYmplY3QuZGF0YSA9IGRhdGE7XG4gIHJlc2l6ZU9iamVjdC50eXBlID0gdHlwZTtcblxuICBlbGVtZW50Ll9fcmVzaXplT2JqZWN0X18gPSByZXNpemVPYmplY3Q7XG5cbiAgcmVzaXplT2JqZWN0Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJlc2l6ZU9iamVjdExvYWRIYW5kbGVyKGVsZW1lbnQpXG4gIH07XG5cbiAgZG9tRWxlbWVudC5hcHBlbmRDaGlsZChyZXNpemVPYmplY3QpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVSZXNpemVPYmplY3QoZWxlbWVudCkge1xuICBjb25zdCBkb21FbGVtZW50ID0gZWxlbWVudC5nZXRET01FbGVtZW50KCksXG4gICAgICAgIHJlc2l6ZU9iamVjdCA9IGVsZW1lbnQuX19yZXNpemVPYmplY3RfXyxcbiAgICAgICAgb2JqZWN0V2luZG93ID0gcmVzaXplT2JqZWN0LmNvbnRlbnREb2N1bWVudC5kZWZhdWx0VmlldzsgIC8vL1xuXG4gIG9iamVjdFdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHJlc2l6ZUV2ZW50TGlzdGVuZXIpO1xuXG4gIGRvbUVsZW1lbnQucmVtb3ZlQ2hpbGQocmVzaXplT2JqZWN0KTtcbn1cblxuZnVuY3Rpb24gcmVzaXplT2JqZWN0TG9hZEhhbmRsZXIoZWxlbWVudCkge1xuICBjb25zdCByZXNpemVPYmplY3QgPSBlbGVtZW50Ll9fcmVzaXplT2JqZWN0X18sXG4gICAgICAgIHJlc2l6ZU9iamVjdFdpbmRvdyA9IHJlc2l6ZU9iamVjdC5jb250ZW50RG9jdW1lbnQuZGVmYXVsdFZpZXc7ICAvLy9cblxuICByZXNpemVPYmplY3RXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBmdW5jdGlvbihldmVudCkge1xuICAgIGNvbnN0IHJlc2l6ZUV2ZW50TGlzdGVuZXJzID0gZmluZFJlc2l6ZUV2ZW50TGlzdGVuZXJzKGVsZW1lbnQpO1xuXG4gICAgcmVzaXplRXZlbnRMaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbihyZXNpemVFdmVudExpc3RlbmVyKXtcbiAgICAgIHJlc2l6ZUV2ZW50TGlzdGVuZXIoZXZlbnQpO1xuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZmluZFJlc2l6ZUV2ZW50TGlzdGVuZXJzKGVsZW1lbnQpIHtcbiAgY29uc3QgcmVzaXplRXZlbnRMaXN0ZW5lcnMgPSBbXTtcbiAgXG4gIGlmIChlbGVtZW50Lmhhc093blByb3BlcnR5KFwiZXZlbnRMaXN0ZW5lcnNcIikpIHtcbiAgICBjb25zdCBldmVudExpc3RlbmVycyA9IGVsZW1lbnQuZXZlbnRMaXN0ZW5lcnM7ICAvLy9cblxuICAgIGV2ZW50TGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24oZXZlbnRMaXN0ZW5lcikge1xuICAgICAgaWYgKGV2ZW50TGlzdGVuZXIuZXZlbnRUeXBlID09PSBcInJlc2l6ZVwiKSB7XG4gICAgICAgIGNvbnN0IHJlc2l6ZUV2ZW50TGlzdGVuZXIgPSBldmVudExpc3RlbmVyO1xuXG4gICAgICAgIHJlc2l6ZUV2ZW50TGlzdGVuZXJzLnB1c2gocmVzaXplRXZlbnRMaXN0ZW5lcik7XG4gICAgICB9ICAgICAgXG4gICAgfSk7XG4gIH0gIFxuICBcbiAgcmV0dXJuIHJlc2l6ZUV2ZW50TGlzdGVuZXJzO1xufVxuXG5mdW5jdGlvbiBkZWZhdWx0SW50ZXJtZWRpYXRlUmVzaXplSGFuZGxlcihoYW5kbGVyLCBldmVudCwgZWxlbWVudCkge1xuICBjb25zdCB3aW5kb3cgPSBlbGVtZW50LCAvLy9cbiAgICAgICAgd2lkdGggPSB3aW5kb3cuZ2V0V2lkdGgoKSxcbiAgICAgICAgaGVpZ2h0ID0gd2luZG93LmdldEhlaWdodCgpO1xuXG4gIGhhbmRsZXIuY2FsbChlbGVtZW50LCB3aWR0aCwgaGVpZ2h0LCBldmVudCwgZWxlbWVudCk7XG59XG4iXX0=