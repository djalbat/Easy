'use strict';

function onResize(handler, object) {
  var intermediateHandler = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultIntermediateResizeHandler;

  var element = this,
      ///
  resizeEventListeners = findResizeEventListeners(element);

  if (resizeEventListeners.length === 0) {
    addResizeObject(element);
  }

  var eventType = 'resize';

  this.addEventListener(eventType, handler, object, intermediateHandler);
}

function offResize(handler, object) {
  var eventType = 'resize';

  this.removeEventListener(eventType, handler, object);

  var element = this,
      ///
  resizeEventListeners = findResizeEventListeners(element);

  if (resizeEventListeners.length === 0) {
    removeResizeObject(element);
  }
}

module.exports = {
  onResize: onResize,
  offResize: offResize
};

function addResizeObject(element) {
  var resizeObject = document.createElement('object'),
      domElement = element.getDOMElement(),
      style = 'display: block; \n                 position: absolute; \n                 top: 0; \n                 left: 0; \n                 height: 100%; \n                 width: 100%; \n                 overflow: hidden; \n                 pointer-events: none; \n                 z-index: -1;',
      data = 'about:blank',
      type = 'text/html';

  resizeObject.setAttribute('style', style);
  resizeObject.data = data;
  resizeObject.type = type;

  element.__resizeObject__ = resizeObject;

  resizeObject.onload = function () {
    resizeObjectLoadHandler(element);
  };

  domElement.appendChild(resizeObject);
}

function removeResizeObject(element) {
  var domElement = element.getDOMElement(),
      resizeObject = element.__resizeObject__,
      objectWindow = resizeObject.contentDocument.defaultView; ///

  objectWindow.removeEventListener('resize', resizeEventListener);

  domElement.removeChild(resizeObject);
}

function resizeObjectLoadHandler(element) {
  var resizeObject = element.__resizeObject__,
      resizeObjectWindow = resizeObject.contentDocument.defaultView; ///

  resizeObjectWindow.addEventListener('resize', function (event) {
    var resizeEventListeners = findResizeEventListeners(element);

    resizeEventListeners.forEach(function (resizeEventListener) {
      resizeEventListener(event);
    });
  });
}

function defaultIntermediateResizeHandler(handler, event, targetElement) {
  var window = targetElement,
      ///
  width = window.getWidth(),
      height = window.getHeight();

  handler(width, height, event, targetElement);
}

function findResizeEventListeners(element) {
  var resizeEventListeners = [];

  if (element.hasOwnProperty('eventListeners')) {
    var eventListeners = element.eventListeners; ///

    eventListeners.forEach(function (eventListener) {
      if (eventListener.eventType === 'resize') {
        var _resizeEventListener = eventListener;

        resizeEventListeners.push(_resizeEventListener);
      }
    });
  }

  return resizeEventListeners;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi9taXhpbnMvcmVzaXplLmpzIl0sIm5hbWVzIjpbIm9uUmVzaXplIiwiaGFuZGxlciIsIm9iamVjdCIsImludGVybWVkaWF0ZUhhbmRsZXIiLCJkZWZhdWx0SW50ZXJtZWRpYXRlUmVzaXplSGFuZGxlciIsImVsZW1lbnQiLCJyZXNpemVFdmVudExpc3RlbmVycyIsImZpbmRSZXNpemVFdmVudExpc3RlbmVycyIsImxlbmd0aCIsImFkZFJlc2l6ZU9iamVjdCIsImV2ZW50VHlwZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJvZmZSZXNpemUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicmVtb3ZlUmVzaXplT2JqZWN0IiwibW9kdWxlIiwiZXhwb3J0cyIsInJlc2l6ZU9iamVjdCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImRvbUVsZW1lbnQiLCJnZXRET01FbGVtZW50Iiwic3R5bGUiLCJkYXRhIiwidHlwZSIsInNldEF0dHJpYnV0ZSIsIl9fcmVzaXplT2JqZWN0X18iLCJvbmxvYWQiLCJyZXNpemVPYmplY3RMb2FkSGFuZGxlciIsImFwcGVuZENoaWxkIiwib2JqZWN0V2luZG93IiwiY29udGVudERvY3VtZW50IiwiZGVmYXVsdFZpZXciLCJyZXNpemVFdmVudExpc3RlbmVyIiwicmVtb3ZlQ2hpbGQiLCJyZXNpemVPYmplY3RXaW5kb3ciLCJldmVudCIsImZvckVhY2giLCJ0YXJnZXRFbGVtZW50Iiwid2luZG93Iiwid2lkdGgiLCJnZXRXaWR0aCIsImhlaWdodCIsImdldEhlaWdodCIsImhhc093blByb3BlcnR5IiwiZXZlbnRMaXN0ZW5lcnMiLCJldmVudExpc3RlbmVyIiwicHVzaCJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsU0FBU0EsUUFBVCxDQUFrQkMsT0FBbEIsRUFBMkJDLE1BQTNCLEVBQTJGO0FBQUEsTUFBeERDLG1CQUF3RCx1RUFBbENDLGdDQUFrQzs7QUFDekYsTUFBTUMsVUFBVSxJQUFoQjtBQUFBLE1BQXNCO0FB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QUFRdUMsY0FBUixDQUF1QixnQkFBdkIsQ0FBSixFQUE4QztBQUM1QyxRQUFNQyxpQkFBaUJ4QyxRQUFRd0MsY0FBL0IsQ0FENEMsQ0FDSTs7QUFFaERBLG1CQUFlUixPQUFmLENBQXVCLFVBQVNTLGFBQVQsRUFBd0I7QUFDN0MsVUFBSUEsY0FBY3BDLFNBQWQsS0FBNEIsUUFBaEMsRUFBMEM7QUFDeEMsWUFBTXVCLHVCQUFzQmEsYUFBNUI7O0FBRUF4Qyw2QkFBcUJ5QyxJQUFyQixDQUEwQmQsb0JBQTFCO0FBQ0Q7QUFDRixLQU5EO0FBT0Q7O0FBRUQsU0FBTzNCLG9CQUFQO0FBQ0QiLCJmaWxlIjoicmVzaXplLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBvblJlc2l6ZShoYW5kbGVyLCBvYmplY3QsIGludGVybWVkaWF0ZUhhbmRsZXIgPSBkZWZhdWx0SW50ZXJtZWRpYXRlUmVzaXplSGFuZGxlcikge1xuICBjb25zdCBlbGVtZW50ID0gdGhpcywgLy8vXG4gICAgICAgIHJlc2l6ZUV2ZW50TGlzdGVuZXJzID0gZmluZFJlc2l6ZUV2ZW50TGlzdGVuZXJzKGVsZW1lbnQpO1xuXG4gIGlmIChyZXNpemVFdmVudExpc3RlbmVycy5sZW5ndGggPT09IDApIHtcbiAgICBhZGRSZXNpemVPYmplY3QoZWxlbWVudCk7XG4gIH1cblxuICBjb25zdCBldmVudFR5cGUgPSAncmVzaXplJztcblxuICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBoYW5kbGVyLCBvYmplY3QsIGludGVybWVkaWF0ZUhhbmRsZXIpO1xufVxuXG5mdW5jdGlvbiBvZmZSZXNpemUoaGFuZGxlciwgb2JqZWN0KSB7XG4gIGNvbnN0IGV2ZW50VHlwZSA9ICdyZXNpemUnO1xuXG4gIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGhhbmRsZXIsIG9iamVjdCk7XG5cbiAgY29uc3QgZWxlbWVudCA9IHRoaXMsIC8vL1xuICAgICAgICByZXNpemVFdmVudExpc3RlbmVycyA9IGZpbmRSZXNpemVFdmVudExpc3RlbmVycyhlbGVtZW50KTtcbiAgXG4gIGlmIChyZXNpemVFdmVudExpc3RlbmVycy5sZW5ndGggPT09IDApIHtcbiAgICByZW1vdmVSZXNpemVPYmplY3QoZWxlbWVudCk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIG9uUmVzaXplLFxuICBvZmZSZXNpemVcbn07XG5cbmZ1bmN0aW9uIGFkZFJlc2l6ZU9iamVjdChlbGVtZW50KSB7XG4gIGNvbnN0IHJlc2l6ZU9iamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29iamVjdCcpLFxuICAgICAgICBkb21FbGVtZW50ID0gZWxlbWVudC5nZXRET01FbGVtZW50KCksXG4gICAgICAgIHN0eWxlID0gYGRpc3BsYXk6IGJsb2NrOyBcbiAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOyBcbiAgICAgICAgICAgICAgICAgdG9wOiAwOyBcbiAgICAgICAgICAgICAgICAgbGVmdDogMDsgXG4gICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTsgXG4gICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlOyBcbiAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsgXG4gICAgICAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lOyBcbiAgICAgICAgICAgICAgICAgei1pbmRleDogLTE7YCxcbiAgICAgICAgZGF0YSA9ICdhYm91dDpibGFuaycsXG4gICAgICAgIHR5cGUgPSAndGV4dC9odG1sJztcblxuICByZXNpemVPYmplY3Quc2V0QXR0cmlidXRlKCdzdHlsZScsIHN0eWxlKTtcbiAgcmVzaXplT2JqZWN0LmRhdGEgPSBkYXRhO1xuICByZXNpemVPYmplY3QudHlwZSA9IHR5cGU7XG5cbiAgZWxlbWVudC5fX3Jlc2l6ZU9iamVjdF9fID0gcmVzaXplT2JqZWN0O1xuXG4gIHJlc2l6ZU9iamVjdC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXNpemVPYmplY3RMb2FkSGFuZGxlcihlbGVtZW50KVxuICB9O1xuXG4gIGRvbUVsZW1lbnQuYXBwZW5kQ2hpbGQocmVzaXplT2JqZWN0KTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlUmVzaXplT2JqZWN0KGVsZW1lbnQpIHtcbiAgY29uc3QgZG9tRWxlbWVudCA9IGVsZW1lbnQuZ2V0RE9NRWxlbWVudCgpLFxuICAgICAgICByZXNpemVPYmplY3QgPSBlbGVtZW50Ll9fcmVzaXplT2JqZWN0X18sXG4gICAgICAgIG9iamVjdFdpbmRvdyA9IHJlc2l6ZU9iamVjdC5jb250ZW50RG9jdW1lbnQuZGVmYXVsdFZpZXc7ICAvLy9cblxuICBvYmplY3RXaW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcmVzaXplRXZlbnRMaXN0ZW5lcik7XG5cbiAgZG9tRWxlbWVudC5yZW1vdmVDaGlsZChyZXNpemVPYmplY3QpO1xufVxuXG5mdW5jdGlvbiByZXNpemVPYmplY3RMb2FkSGFuZGxlcihlbGVtZW50KSB7XG4gIGNvbnN0IHJlc2l6ZU9iamVjdCA9IGVsZW1lbnQuX19yZXNpemVPYmplY3RfXyxcbiAgICAgICAgcmVzaXplT2JqZWN0V2luZG93ID0gcmVzaXplT2JqZWN0LmNvbnRlbnREb2N1bWVudC5kZWZhdWx0VmlldzsgIC8vL1xuXG4gIHJlc2l6ZU9iamVjdFdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbihldmVudCkge1xuICAgIGNvbnN0IHJlc2l6ZUV2ZW50TGlzdGVuZXJzID0gZmluZFJlc2l6ZUV2ZW50TGlzdGVuZXJzKGVsZW1lbnQpO1xuXG4gICAgcmVzaXplRXZlbnRMaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbihyZXNpemVFdmVudExpc3RlbmVyKXtcbiAgICAgIHJlc2l6ZUV2ZW50TGlzdGVuZXIoZXZlbnQpO1xuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZGVmYXVsdEludGVybWVkaWF0ZVJlc2l6ZUhhbmRsZXIoaGFuZGxlciwgZXZlbnQsIHRhcmdldEVsZW1lbnQpIHtcbiAgY29uc3Qgd2luZG93ID0gdGFyZ2V0RWxlbWVudCwgLy8vXG4gICAgICAgIHdpZHRoID0gd2luZG93LmdldFdpZHRoKCksXG4gICAgICAgIGhlaWdodCA9IHdpbmRvdy5nZXRIZWlnaHQoKTtcblxuICBoYW5kbGVyKHdpZHRoLCBoZWlnaHQsIGV2ZW50LCB0YXJnZXRFbGVtZW50KTtcbn1cblxuZnVuY3Rpb24gZmluZFJlc2l6ZUV2ZW50TGlzdGVuZXJzKGVsZW1lbnQpIHtcbiAgY29uc3QgcmVzaXplRXZlbnRMaXN0ZW5lcnMgPSBbXTtcbiAgXG4gIGlmIChlbGVtZW50Lmhhc093blByb3BlcnR5KCdldmVudExpc3RlbmVycycpKSB7XG4gICAgY29uc3QgZXZlbnRMaXN0ZW5lcnMgPSBlbGVtZW50LmV2ZW50TGlzdGVuZXJzOyAgLy8vXG5cbiAgICBldmVudExpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKGV2ZW50TGlzdGVuZXIpIHtcbiAgICAgIGlmIChldmVudExpc3RlbmVyLmV2ZW50VHlwZSA9PT0gJ3Jlc2l6ZScpIHtcbiAgICAgICAgY29uc3QgcmVzaXplRXZlbnRMaXN0ZW5lciA9IGV2ZW50TGlzdGVuZXI7XG5cbiAgICAgICAgcmVzaXplRXZlbnRMaXN0ZW5lcnMucHVzaChyZXNpemVFdmVudExpc3RlbmVyKTtcbiAgICAgIH0gICAgICBcbiAgICB9KTtcbiAgfSAgXG4gIFxuICByZXR1cm4gcmVzaXplRXZlbnRMaXN0ZW5lcnM7XG59XG4iXX0=