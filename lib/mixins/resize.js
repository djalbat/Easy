"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.onResize = onResize;
exports.offResize = offResize;

function onResize(handler) {
  var element = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this;
  var intermediateHandler = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultIntermediateResizeHandler;
  var resizeEventListeners = findResizeEventListeners(element);

  if (resizeEventListeners.length === 0) {
    addResizeObject(element);
  }

  var eventType = "resize";
  this.addEventListener(eventType, handler, element, intermediateHandler);
}

function offResize(handler) {
  var element = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this;
  var eventType = "resize";
  this.removeEventListener(eventType, handler, element);
  var resizeEventListeners = findResizeEventListeners(element);

  if (resizeEventListeners.length === 0) {
    removeResizeObject(element);
  }
}

function addResizeObject(element) {
  var resizeObject = document.createElement("object"),
      domElement = element.getDOMElement(),
      style = "display: block; \n                 position: absolute; \n                 top: 0; \n                 left: 0; \n                 height: 100%; \n                 width: 100%; \n                 overflow: hidden; \n                 pointer-events: none; \n                 z-index: -1;",
      data = "about:blank",
      type = "text/html";
  resizeObject.setAttribute("style", style);
  resizeObject.data = data;
  resizeObject.type = type;
  element.__resizeObject__ = resizeObject;

  resizeObject.onload = function () {
    return resizeObjectLoadHandler(element);
  };

  domElement.appendChild(resizeObject);
}

function removeResizeObject(element) {
  var domElement = element.getDOMElement(),
      resizeObject = element.__resizeObject__,
      objectWindow = resizeObject.contentDocument.defaultView; ///

  objectWindow.removeEventListener("resize", resizeEventListener);
  domElement.removeChild(resizeObject);
}

function resizeObjectLoadHandler(element) {
  var resizeObject = element.__resizeObject__,
      resizeObjectWindow = resizeObject.contentDocument.defaultView; ///

  resizeObjectWindow.addEventListener("resize", function (event) {
    var resizeEventListeners = findResizeEventListeners(element);
    resizeEventListeners.forEach(function (resizeEventListener) {
      return resizeEventListener(event);
    });
  });
}

function findResizeEventListeners(element) {
  var resizeEventListeners = [];

  if (element.hasOwnProperty("eventListeners")) {
    var eventListeners = element.eventListeners; ///

    eventListeners.forEach(function (eventListener) {
      if (eventListener.eventType === "resize") {
        var _resizeEventListener = eventListener;
        resizeEventListeners.push(_resizeEventListener);
      }
    });
  }

  return resizeEventListeners;
}

function defaultIntermediateResizeHandler(handler, event, element) {
  var window = element,
      ///
  width = window.getWidth(),
      height = window.getHeight();
  handler.call(element, width, height, event, element);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc2l6ZS5qcyJdLCJuYW1lcyI6WyJvblJlc2l6ZSIsImhhbmRsZXIiLCJlbGVtZW50IiwiaW50ZXJtZWRpYXRlSGFuZGxlciIsImRlZmF1bHRJbnRlcm1lZGlhdGVSZXNpemVIYW5kbGVyIiwicmVzaXplRXZlbnRMaXN0ZW5lcnMiLCJmaW5kUmVzaXplRXZlbnRMaXN0ZW5lcnMiLCJsZW5ndGgiLCJhZGRSZXNpemVPYmplY3QiLCJldmVudFR5cGUiLCJhZGRFdmVudExpc3RlbmVyIiwib2ZmUmVzaXplIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInJlbW92ZVJlc2l6ZU9iamVjdCIsInJlc2l6ZU9iamVjdCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImRvbUVsZW1lbnQiLCJnZXRET01FbGVtZW50Iiwic3R5bGUiLCJkYXRhIiwidHlwZSIsInNldEF0dHJpYnV0ZSIsIl9fcmVzaXplT2JqZWN0X18iLCJvbmxvYWQiLCJyZXNpemVPYmplY3RMb2FkSGFuZGxlciIsImFwcGVuZENoaWxkIiwib2JqZWN0V2luZG93IiwiY29udGVudERvY3VtZW50IiwiZGVmYXVsdFZpZXciLCJyZXNpemVFdmVudExpc3RlbmVyIiwicmVtb3ZlQ2hpbGQiLCJyZXNpemVPYmplY3RXaW5kb3ciLCJldmVudCIsImZvckVhY2giLCJoYXNPd25Qcm9wZXJ0eSIsImV2ZW50TGlzdGVuZXJzIiwiZXZlbnRMaXN0ZW5lciIsInB1c2giLCJ3aW5kb3ciLCJ3aWR0aCIsImdldFdpZHRoIiwiaGVpZ2h0IiwiZ2V0SGVpZ2h0IiwiY2FsbCJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7O0FBRU8sU0FBU0EsUUFBVCxDQUFrQkMsT0FBbEIsRUFBbUc7QUFBQSxNQUF4RUMsT0FBd0UsdUVBQTlELElBQThEO0FBQUEsTUFBeERDLG1CQUF3RCx1RUFBbENDLGdDQUFrQztBQUN4RyxNQUFNQyxvQkFBb0IsR0FBR0Msd0JBQXdCLENBQUNKLE9BQUQsQ0FBckQ7O0FBRUEsTUFBSUcsb0JBQW9C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LE9BQU8sQ0FBQ2tDLGNBQS9CLENBRDRDLENBQ0k7O0FBRWhEQSxJQUFBQSxjQUFjLENBQUNGLE9BQWYsQ0FBdUIsVUFBQ0csYUFBRCxFQUFtQjtBQUN4QyxVQUFJQSxhQUFhLENBQUM1QixTQUFkLEtBQTRCLFFBQWhDLEVBQTBDO0FBQ3hDLFlBQU1xQixvQkFBbUIsR0FBR08sYUFBNUI7QUFFQWhDLFFBQUFBLG9CQUFvQixDQUFDaUMsSUFBckIsQ0FBMEJSLG9CQUExQjtBQUNEO0FBQ0YsS0FORDtBQU9EOztBQUVELFNBQU96QixvQkFBUDtBQUNEOztBQUVELFNBQVNELGdDQUFULENBQTBDSCxPQUExQyxFQUFtRGdDLEtBQW5ELEVBQTBEL0IsT0FBMUQsRUFBbUU7QUFDakUsTUFBTXFDLE1BQU0sR0FBR3JDLE9BQWY7QUFBQSxNQUF3QjtBQUNsQnNDLEVBQUFBLEtBQUssR0FBR0QsTUFBTSxDQUFDRSxRQUFQLEVBRGQ7QUFBQSxNQUVNQyxNQUFNLEdBQUdILE1BQU0sQ0FBQ0ksU0FBUCxFQUZmO0FBSUExQyxFQUFBQSxPQUFPLENBQUMyQyxJQUFSLENBQWExQyxPQUFiLEVBQXNCc0MsS0FBdEIsRUFBNkJFLE1BQTdCLEVBQXFDVCxLQUFyQyxFQUE0Qy9CLE9BQTVDO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIG9uUmVzaXplKGhhbmRsZXIsIGVsZW1lbnQgPSB0aGlzLCBpbnRlcm1lZGlhdGVIYW5kbGVyID0gZGVmYXVsdEludGVybWVkaWF0ZVJlc2l6ZUhhbmRsZXIpIHtcbiAgY29uc3QgcmVzaXplRXZlbnRMaXN0ZW5lcnMgPSBmaW5kUmVzaXplRXZlbnRMaXN0ZW5lcnMoZWxlbWVudCk7XG5cbiAgaWYgKHJlc2l6ZUV2ZW50TGlzdGVuZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgIGFkZFJlc2l6ZU9iamVjdChlbGVtZW50KTtcbiAgfVxuXG4gIGNvbnN0IGV2ZW50VHlwZSA9IFwicmVzaXplXCI7XG5cbiAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgaGFuZGxlciwgZWxlbWVudCwgaW50ZXJtZWRpYXRlSGFuZGxlcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvZmZSZXNpemUoaGFuZGxlciwgZWxlbWVudCA9IHRoaXMpIHtcbiAgY29uc3QgZXZlbnRUeXBlID0gXCJyZXNpemVcIjtcblxuICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBoYW5kbGVyLCBlbGVtZW50KTtcblxuICBjb25zdCByZXNpemVFdmVudExpc3RlbmVycyA9IGZpbmRSZXNpemVFdmVudExpc3RlbmVycyhlbGVtZW50KTtcbiAgXG4gIGlmIChyZXNpemVFdmVudExpc3RlbmVycy5sZW5ndGggPT09IDApIHtcbiAgICByZW1vdmVSZXNpemVPYmplY3QoZWxlbWVudCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gYWRkUmVzaXplT2JqZWN0KGVsZW1lbnQpIHtcbiAgY29uc3QgcmVzaXplT2JqZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9iamVjdFwiKSxcbiAgICAgICAgZG9tRWxlbWVudCA9IGVsZW1lbnQuZ2V0RE9NRWxlbWVudCgpLFxuICAgICAgICBzdHlsZSA9IGBkaXNwbGF5OiBibG9jazsgXG4gICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsgXG4gICAgICAgICAgICAgICAgIHRvcDogMDsgXG4gICAgICAgICAgICAgICAgIGxlZnQ6IDA7IFxuICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7IFxuICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsgXG4gICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47IFxuICAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTsgXG4gICAgICAgICAgICAgICAgIHotaW5kZXg6IC0xO2AsXG4gICAgICAgIGRhdGEgPSBcImFib3V0OmJsYW5rXCIsXG4gICAgICAgIHR5cGUgPSBcInRleHQvaHRtbFwiO1xuXG4gIHJlc2l6ZU9iamVjdC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBzdHlsZSk7XG4gIHJlc2l6ZU9iamVjdC5kYXRhID0gZGF0YTtcbiAgcmVzaXplT2JqZWN0LnR5cGUgPSB0eXBlO1xuXG4gIGVsZW1lbnQuX19yZXNpemVPYmplY3RfXyA9IHJlc2l6ZU9iamVjdDtcblxuICByZXNpemVPYmplY3Qub25sb2FkID0gKCkgPT4gcmVzaXplT2JqZWN0TG9hZEhhbmRsZXIoZWxlbWVudCk7XG5cbiAgZG9tRWxlbWVudC5hcHBlbmRDaGlsZChyZXNpemVPYmplY3QpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVSZXNpemVPYmplY3QoZWxlbWVudCkge1xuICBjb25zdCBkb21FbGVtZW50ID0gZWxlbWVudC5nZXRET01FbGVtZW50KCksXG4gICAgICAgIHJlc2l6ZU9iamVjdCA9IGVsZW1lbnQuX19yZXNpemVPYmplY3RfXyxcbiAgICAgICAgb2JqZWN0V2luZG93ID0gcmVzaXplT2JqZWN0LmNvbnRlbnREb2N1bWVudC5kZWZhdWx0VmlldzsgIC8vL1xuXG4gIG9iamVjdFdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHJlc2l6ZUV2ZW50TGlzdGVuZXIpO1xuXG4gIGRvbUVsZW1lbnQucmVtb3ZlQ2hpbGQocmVzaXplT2JqZWN0KTtcbn1cblxuZnVuY3Rpb24gcmVzaXplT2JqZWN0TG9hZEhhbmRsZXIoZWxlbWVudCkge1xuICBjb25zdCByZXNpemVPYmplY3QgPSBlbGVtZW50Ll9fcmVzaXplT2JqZWN0X18sXG4gICAgICAgIHJlc2l6ZU9iamVjdFdpbmRvdyA9IHJlc2l6ZU9iamVjdC5jb250ZW50RG9jdW1lbnQuZGVmYXVsdFZpZXc7ICAvLy9cblxuICByZXNpemVPYmplY3RXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCAoZXZlbnQpID0+IHtcbiAgICBjb25zdCByZXNpemVFdmVudExpc3RlbmVycyA9IGZpbmRSZXNpemVFdmVudExpc3RlbmVycyhlbGVtZW50KTtcblxuICAgIHJlc2l6ZUV2ZW50TGlzdGVuZXJzLmZvckVhY2goKHJlc2l6ZUV2ZW50TGlzdGVuZXIpID0+IHJlc2l6ZUV2ZW50TGlzdGVuZXIoZXZlbnQpKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGZpbmRSZXNpemVFdmVudExpc3RlbmVycyhlbGVtZW50KSB7XG4gIGNvbnN0IHJlc2l6ZUV2ZW50TGlzdGVuZXJzID0gW107XG4gIFxuICBpZiAoZWxlbWVudC5oYXNPd25Qcm9wZXJ0eShcImV2ZW50TGlzdGVuZXJzXCIpKSB7XG4gICAgY29uc3QgZXZlbnRMaXN0ZW5lcnMgPSBlbGVtZW50LmV2ZW50TGlzdGVuZXJzOyAgLy8vXG5cbiAgICBldmVudExpc3RlbmVycy5mb3JFYWNoKChldmVudExpc3RlbmVyKSA9PiB7XG4gICAgICBpZiAoZXZlbnRMaXN0ZW5lci5ldmVudFR5cGUgPT09IFwicmVzaXplXCIpIHtcbiAgICAgICAgY29uc3QgcmVzaXplRXZlbnRMaXN0ZW5lciA9IGV2ZW50TGlzdGVuZXI7XG5cbiAgICAgICAgcmVzaXplRXZlbnRMaXN0ZW5lcnMucHVzaChyZXNpemVFdmVudExpc3RlbmVyKTtcbiAgICAgIH0gICAgICBcbiAgICB9KTtcbiAgfSAgXG4gIFxuICByZXR1cm4gcmVzaXplRXZlbnRMaXN0ZW5lcnM7XG59XG5cbmZ1bmN0aW9uIGRlZmF1bHRJbnRlcm1lZGlhdGVSZXNpemVIYW5kbGVyKGhhbmRsZXIsIGV2ZW50LCBlbGVtZW50KSB7XG4gIGNvbnN0IHdpbmRvdyA9IGVsZW1lbnQsIC8vL1xuICAgICAgICB3aWR0aCA9IHdpbmRvdy5nZXRXaWR0aCgpLFxuICAgICAgICBoZWlnaHQgPSB3aW5kb3cuZ2V0SGVpZ2h0KCk7XG5cbiAgaGFuZGxlci5jYWxsKGVsZW1lbnQsIHdpZHRoLCBoZWlnaHQsIGV2ZW50LCBlbGVtZW50KTtcbn1cbiJdfQ==