'use strict';

function on(eventTypes, handler) {
  var object = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
  var intermediateHandler = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;

  eventTypes = eventTypes.split(' '); ///

  eventTypes.forEach(function (eventType) {
    var eventListener = this.addEventListener(eventType, handler, object, intermediateHandler);

    this.domElement.addEventListener(eventType, eventListener);
  }.bind(this));
}

function off(eventTypes, handler) {
  var object = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;

  eventTypes = eventTypes.split(' '); ///

  eventTypes.forEach(function (eventType) {
    var eventListener = this.removeEventListener(eventType, handler, object);

    this.domElement.removeEventListener(eventType, eventListener);
  }.bind(this));
}

module.exports = {
  on: on,
  off: off,
  addEventListener: addEventListener,
  removeEventListener: removeEventListener
};

function addEventListener(eventType, handler, object, intermediateHandler) {
  if (!this.hasOwnProperty('eventListeners')) {
    this.eventListeners = [];
  }

  var targetElement = this,
      ///
  eventListeners = this.eventListeners,
      eventListener = createEventListener(targetElement, eventType, handler, object, intermediateHandler);

  eventListeners.push(eventListener);

  return eventListener;
}

function removeEventListener(eventType, handler, object) {
  var eventListeners = this.eventListeners,
      eventListener = findEventListener(eventListeners, eventType, handler, object),
      index = eventListeners.indexOf(eventListener),
      start = index,
      ///
  deleteCount = 1;

  eventListeners.splice(start, deleteCount);

  if (eventListeners.length === 0) {
    delete this.eventListeners;
  }

  return eventListener;
}

function createEventListener(targetElement, eventType, handler, object, intermediateHandler) {
  var eventListener = void 0;

  if (intermediateHandler === null) {
    eventListener = function eventListener(event) {
      handler.call(object, event, targetElement);
    };
  } else {
    eventListener = function eventListener(event) {
      intermediateHandler(function (event) {
        handler.call.apply(handler, [object].concat(Array.prototype.slice.call(arguments)));
      }, event, targetElement);
    };
  }

  Object.assign(eventListener, {
    eventType: eventType,
    handler: handler,
    object: object
  });

  return eventListener;
}

function findEventListener(eventListeners, eventType, handler, object) {
  var eventListener = eventListeners.find(function (eventListener) {
    var found = eventListener.object === object && eventListener.handler === handler && eventListener.eventType === eventType; ///

    return found;
  });

  return eventListener;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi9taXhpbnMvZXZlbnQuanMiXSwibmFtZXMiOlsib24iLCJldmVudFR5cGVzIiwiaGFuZGxlciIsIm9iamVjdCIsImludGVybWVkaWF0ZUhhbmRsZXIiLCJzcGxpdCIsImZvckVhY2giLCJldmVudFR5cGUiLCJldmVudExpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRvbUVsZW1lbnQiLCJiaW5kIiwib2ZmIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm1vZHVsZSIsImV4cG9ydHMiLCJoYXNPd25Qcm9wZXJ0eSIsImV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0RWxlbWVudCIsImNyZWF0ZUV2ZW50TGlzdGVuZXIiLCJwdXNoIiwiZmluZEV2ZW50TGlzdGVuZXIiLCJpbmRleCIsImluZGV4T2YiLCJzdGFydCIsImRlbGV0ZUNvdW50Iiwic3BsaWNlIiwibGVuZ3RoIiwiZXZlbnQiLCJjYWxsIiwiYXJndW1lbnRzIiwiT2JqZWN0IiwiYXNzaWduIiwiZmluZCIsImZvdW5kIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxTQUFTQSxFQUFULENBQVlDLFVBQVosRUFBd0JDLE9BQXhCLEVBQTRFO0FBQUEsTUFBM0NDLE1BQTJDLHVFQUFsQyxJQUFrQztBQUFBLE1BQTVCQyxtQkFBNEIsdUVBQU4sSUFBTTs7QUFDMUVILGVBQWFBLFdBQVdJLEtBQVgsQ0FBaUIsR0FBakIsQ0FBYixDQUQwRSxDQUN0Qzs7QUFFcENKLGFBQVdLLE9BQVgsQ0FBbUIsVUFBU0MsU0FBVCxFQUFvQjtBQUNyQyxRQUFNQyxnQkFBZ0IsS0FBS0MsZ0JBQUwsQ0FBc0JGLFNBQXRCLEVBQWlDTCxPQUFqQyxFQUEwQ0MsTUFBMUMsRUFBa0RDLG1CQUFsRCxDQUF0Qjs7QUFFQSxTQUFLTSxVQUFMLENBQWdCRCxnQkFBaEIsQ0FBaUNGLFNBQWpDLEVBQTRDQyxhQUE1QztBQUNELEdBSmtCLENBSWpCRyxJQUppQixDQUlaLElBSlksQ0FBbkI7QUFLRDs7QUFFRCxTQUFTQyxHQUFU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LGVBQWVnQixJQUFmLENBQW9CLFVBQVN6QixhQUFULEVBQXdCO0FBQ2hFLFFBQU0wQixRQUFXMUIsY0FBY0wsTUFBZCxLQUF5QkEsTUFBMUIsSUFDQ0ssY0FBY04sT0FBZCxLQUEwQkEsT0FEM0IsSUFFQ00sY0FBY0QsU0FBZCxLQUE0QkEsU0FGN0MsQ0FEZ0UsQ0FHSjs7QUFFNUQsV0FBTzJCLEtBQVA7QUFDRCxHQU5xQixDQUF0Qjs7QUFRQSxTQUFPMUIsYUFBUDtBQUNEIiwiZmlsZSI6ImV2ZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBvbihldmVudFR5cGVzLCBoYW5kbGVyLCBvYmplY3QgPSBudWxsLCBpbnRlcm1lZGlhdGVIYW5kbGVyID0gbnVsbCkge1xuICBldmVudFR5cGVzID0gZXZlbnRUeXBlcy5zcGxpdCgnICcpOyAvLy9cblxuICBldmVudFR5cGVzLmZvckVhY2goZnVuY3Rpb24oZXZlbnRUeXBlKSB7XG4gICAgY29uc3QgZXZlbnRMaXN0ZW5lciA9IHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGhhbmRsZXIsIG9iamVjdCwgaW50ZXJtZWRpYXRlSGFuZGxlcik7XG4gICAgXG4gICAgdGhpcy5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBldmVudExpc3RlbmVyKTtcbiAgfS5iaW5kKHRoaXMpKTtcbn1cblxuZnVuY3Rpb24gb2ZmKGV2ZW50VHlwZXMsIGhhbmRsZXIsIG9iamVjdCA9IG51bGwpIHtcbiAgZXZlbnRUeXBlcyA9IGV2ZW50VHlwZXMuc3BsaXQoJyAnKTsgLy8vXG5cbiAgZXZlbnRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uKGV2ZW50VHlwZSkge1xuICAgIGNvbnN0IGV2ZW50TGlzdGVuZXIgPSB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBoYW5kbGVyLCBvYmplY3QpO1xuXG4gICAgdGhpcy5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBldmVudExpc3RlbmVyKTtcbiAgfS5iaW5kKHRoaXMpKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIG9uLFxuICBvZmYsXG4gIGFkZEV2ZW50TGlzdGVuZXIsXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXJcbn07XG5cbmZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBoYW5kbGVyLCBvYmplY3QsIGludGVybWVkaWF0ZUhhbmRsZXIpIHtcbiAgaWYgKCF0aGlzLmhhc093blByb3BlcnR5KCdldmVudExpc3RlbmVycycpKSB7XG4gICAgdGhpcy5ldmVudExpc3RlbmVycyA9IFtdO1xuICB9XG4gIFxuICBjb25zdCB0YXJnZXRFbGVtZW50ID0gdGhpcywgLy8vXG4gICAgICAgIGV2ZW50TGlzdGVuZXJzID0gdGhpcy5ldmVudExpc3RlbmVycyxcbiAgICAgICAgZXZlbnRMaXN0ZW5lciA9IGNyZWF0ZUV2ZW50TGlzdGVuZXIodGFyZ2V0RWxlbWVudCwgZXZlbnRUeXBlLCBoYW5kbGVyLCBvYmplY3QsIGludGVybWVkaWF0ZUhhbmRsZXIpO1xuXG4gIGV2ZW50TGlzdGVuZXJzLnB1c2goZXZlbnRMaXN0ZW5lcik7XG5cbiAgcmV0dXJuIGV2ZW50TGlzdGVuZXI7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBoYW5kbGVyLCBvYmplY3QpIHtcbiAgY29uc3QgZXZlbnRMaXN0ZW5lcnMgPSB0aGlzLmV2ZW50TGlzdGVuZXJzLFxuICAgICAgICBldmVudExpc3RlbmVyID0gZmluZEV2ZW50TGlzdGVuZXIoZXZlbnRMaXN0ZW5lcnMsIGV2ZW50VHlwZSwgaGFuZGxlciwgb2JqZWN0KSxcbiAgICAgICAgaW5kZXggPSBldmVudExpc3RlbmVycy5pbmRleE9mKGV2ZW50TGlzdGVuZXIpLFxuICAgICAgICBzdGFydCA9IGluZGV4LCAgLy8vXG4gICAgICAgIGRlbGV0ZUNvdW50ID0gMTtcblxuICBldmVudExpc3RlbmVycy5zcGxpY2Uoc3RhcnQsIGRlbGV0ZUNvdW50KTtcblxuICBpZiAoZXZlbnRMaXN0ZW5lcnMubGVuZ3RoID09PSAwKSB7XG4gICAgZGVsZXRlIHRoaXMuZXZlbnRMaXN0ZW5lcnM7XG4gIH1cbiAgXG4gIHJldHVybiBldmVudExpc3RlbmVyO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVFdmVudExpc3RlbmVyKHRhcmdldEVsZW1lbnQsIGV2ZW50VHlwZSwgaGFuZGxlciwgb2JqZWN0LCBpbnRlcm1lZGlhdGVIYW5kbGVyKSB7XG4gIGxldCBldmVudExpc3RlbmVyO1xuICBcbiAgaWYgKGludGVybWVkaWF0ZUhhbmRsZXIgPT09IG51bGwpIHtcbiAgICBldmVudExpc3RlbmVyID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGhhbmRsZXIuY2FsbChvYmplY3QsIGV2ZW50LCB0YXJnZXRFbGVtZW50KVxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgZXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBpbnRlcm1lZGlhdGVIYW5kbGVyKGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGhhbmRsZXIuY2FsbChvYmplY3QsIC4uLmFyZ3VtZW50cyk7XG4gICAgICB9LCBldmVudCwgdGFyZ2V0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgT2JqZWN0LmFzc2lnbihldmVudExpc3RlbmVyLCB7XG4gICAgZXZlbnRUeXBlLFxuICAgIGhhbmRsZXIsXG4gICAgb2JqZWN0XG4gIH0pO1xuXG4gIHJldHVybiBldmVudExpc3RlbmVyO1xufVxuXG5mdW5jdGlvbiBmaW5kRXZlbnRMaXN0ZW5lcihldmVudExpc3RlbmVycywgZXZlbnRUeXBlLCBoYW5kbGVyLCBvYmplY3QpIHtcbiAgY29uc3QgZXZlbnRMaXN0ZW5lciA9IGV2ZW50TGlzdGVuZXJzLmZpbmQoZnVuY3Rpb24oZXZlbnRMaXN0ZW5lcikge1xuICAgIGNvbnN0IGZvdW5kID0gKCAoZXZlbnRMaXN0ZW5lci5vYmplY3QgPT09IG9iamVjdCkgJiYgXG4gICAgICAgICAgICAgICAgICAgIChldmVudExpc3RlbmVyLmhhbmRsZXIgPT09IGhhbmRsZXIpICYmIFxuICAgICAgICAgICAgICAgICAgICAoZXZlbnRMaXN0ZW5lci5ldmVudFR5cGUgPT09IGV2ZW50VHlwZSkgKTsgIC8vL1xuICAgIFxuICAgIHJldHVybiBmb3VuZDtcbiAgfSk7XG4gIFxuICByZXR1cm4gZXZlbnRMaXN0ZW5lcjtcbn1cbiJdfQ==