"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _resize = require("./resize");

function on(eventTypes, handler, element) {
  var _this = this;

  eventTypes = eventTypes.split(" "); ///

  eventTypes.forEach(function (eventType) {
    if (eventType === "resize") {
      var resizeEventListeners = _this.findEventListeners("resize"),
          resizeEventListenersLength = resizeEventListeners.length;

      if (resizeEventListenersLength === 0) {
        _this.addResizeObject();
      }
    }

    var eventListener = _this.addEventListener(eventType, handler, element);

    _this.domElement.addEventListener(eventType, eventListener);
  });
}

function off(eventTypes, handler, element) {
  var _this2 = this;

  eventTypes = eventTypes.split(" "); ///

  eventTypes.forEach(function (eventType) {
    var eventListener = _this2.removeEventListener(eventType, handler, element);

    _this2.domElement.removeEventListener(eventType, eventListener);

    if (eventType === "resize") {
      var resizeEventListeners = _this2.findEventListeners("resize"),
          resizeEventListenersLength = resizeEventListeners.length;

      if (resizeEventListenersLength === 0) {
        (0, _resize.removeResizeObject)(_this2);
      }
    }
  });
}

function addEventListener(eventType, handler) {
  var element = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this;

  if (!this.hasOwnProperty("eventListeners")) {
    this.eventListeners = [];
  }

  var eventListener = createEventListener(eventType, handler, element);
  this.eventListeners.push(eventListener);
  return eventListener;
}

function removeEventListener(eventType, handler) {
  var element = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this;
  var eventListener = this.findEventListener(eventType, handler, element),
      index = this.eventListeners.indexOf(eventListener),
      start = index,
      ///
  deleteCount = 1;
  this.eventListeners.splice(start, deleteCount);

  if (this.eventListeners.length === 0) {
    delete this.eventListeners;
  }

  return eventListener;
}

function findEventListener(eventType, handler, element) {
  var eventListener = this.eventListeners.find(function (eventListener) {
    var found = eventListener.element === element && eventListener.handler === handler && eventListener.eventType === eventType;

    if (found) {
      return true;
    }
  });
  return eventListener;
}

function findEventListeners(eventType) {
  var eventListeners = [];

  if (this.hasOwnProperty("eventListeners")) {
    this.eventListeners.forEach(function (eventListener) {
      var found = eventListener.eventType === eventType;

      if (found) {
        eventListeners.push(eventListener);
      }
    });
  }

  return eventListeners;
}

function createEventListener(eventType, handler, element) {
  var eventListener;

  eventListener = function eventListener(event) {
    handler.call(element, event, element);
  };

  Object.assign(eventListener, {
    element: element,
    handler: handler,
    eventType: eventType
  });
  return eventListener;
}

var _default = {
  on: on,
  off: off,
  addEventListener: addEventListener,
  removeEventListener: removeEventListener,
  findEventListener: findEventListener,
  findEventListeners: findEventListeners
};
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV2ZW50LmpzIl0sIm5hbWVzIjpbIm9uIiwiZXZlbnRUeXBlcyIsImhhbmRsZXIiLCJlbGVtZW50Iiwic3BsaXQiLCJmb3JFYWNoIiwiZXZlbnRUeXBlIiwicmVzaXplRXZlbnRMaXN0ZW5lcnMiLCJmaW5kRXZlbnRMaXN0ZW5lcnMiLCJyZXNpemVFdmVudExpc3RlbmVyc0xlbmd0aCIsImxlbmd0aCIsImFkZFJlc2l6ZU9iamVjdCIsImV2ZW50TGlzdGVuZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiZG9tRWxlbWVudCIsIm9mZiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJoYXNPd25Qcm9wZXJ0eSIsImV2ZW50TGlzdGVuZXJzIiwiY3JlYXRlRXZlbnRMaXN0ZW5lciIsInB1c2giLCJmaW5kRXZlbnRMaXN0ZW5lciIsImluZGV4IiwiaW5kZXhPZiIsInN0YXJ0IiwiZGVsZXRlQ291bnQiLCJzcGxpY2UiLCJmaW5kIiwiZm91bmQiLCJldmVudCIsImNhbGwiLCJPYmplY3QiLCJhc3NpZ24iXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7O0FBRUE7O0FBRUEsU0FBU0EsRUFBVCxDQUFZQyxVQUFaLEVBQXdCQyxPQUF4QixFQUFpQ0MsT0FBakMsRUFBMEM7QUFBQTs7QUFDeENGLEVBQUFBLFVBQVUsR0FBR0EsVUFBVSxDQUFDRyxLQUFYLENBQWlCLEdBQWpCLENBQWIsQ0FEd0MsQ0FDSjs7QUFFcENILEVBQUFBLFVBQVUsQ0FBQ0ksT0FBWCxDQUFtQixVQUFDQyxTQUFELEVBQWU7QUFDaEMsUUFBSUEsU0FBUyxLQUFLLFFBQWxCLEVBQTRCO0FBQzFCLFVBQU1DLG9CQUFvQixHQUFHLEtBQUksQ0FBQ0Msa0JBQUwsQ0FBd0IsUUFBeEIsQ0FBN0I7QUFBQSxVQUNNQywwQkFBMEIsR0FBR0Ysb0JBQW9CLENBQUNHLE1BRHhEOztBQUdBLFVBQUlELDBCQUEwQixLQUFLLENBQW5DLEVBQXNDO0FBQ3BDLFFBQUEsS0FBSSxDQUFDRSxlQUFMO0FBQ0Q7QUFDRjs7QUFFRCxR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c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7cmVtb3ZlUmVzaXplT2JqZWN0fSBmcm9tIFwiLi9yZXNpemVcIjtcblxuZnVuY3Rpb24gb24oZXZlbnRUeXBlcywgaGFuZGxlciwgZWxlbWVudCkge1xuICBldmVudFR5cGVzID0gZXZlbnRUeXBlcy5zcGxpdChcIiBcIik7IC8vL1xuXG4gIGV2ZW50VHlwZXMuZm9yRWFjaCgoZXZlbnRUeXBlKSA9PiB7XG4gICAgaWYgKGV2ZW50VHlwZSA9PT0gXCJyZXNpemVcIikge1xuICAgICAgY29uc3QgcmVzaXplRXZlbnRMaXN0ZW5lcnMgPSB0aGlzLmZpbmRFdmVudExpc3RlbmVycyhcInJlc2l6ZVwiKSxcbiAgICAgICAgICAgIHJlc2l6ZUV2ZW50TGlzdGVuZXJzTGVuZ3RoID0gcmVzaXplRXZlbnRMaXN0ZW5lcnMubGVuZ3RoO1xuXG4gICAgICBpZiAocmVzaXplRXZlbnRMaXN0ZW5lcnNMZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy5hZGRSZXNpemVPYmplY3QoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBldmVudExpc3RlbmVyID0gdGhpcy5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgaGFuZGxlciwgZWxlbWVudCk7XG5cbiAgICB0aGlzLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGV2ZW50TGlzdGVuZXIpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gb2ZmKGV2ZW50VHlwZXMsIGhhbmRsZXIsIGVsZW1lbnQpIHtcbiAgZXZlbnRUeXBlcyA9IGV2ZW50VHlwZXMuc3BsaXQoXCIgXCIpOyAvLy9cblxuICBldmVudFR5cGVzLmZvckVhY2goKGV2ZW50VHlwZSkgPT4ge1xuICAgIGNvbnN0IGV2ZW50TGlzdGVuZXIgPSB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBoYW5kbGVyLCBlbGVtZW50KTtcblxuICAgIHRoaXMuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgZXZlbnRMaXN0ZW5lcik7XG5cbiAgICBpZiAoZXZlbnRUeXBlID09PSBcInJlc2l6ZVwiKSB7XG4gICAgICBjb25zdCByZXNpemVFdmVudExpc3RlbmVycyA9IHRoaXMuZmluZEV2ZW50TGlzdGVuZXJzKFwicmVzaXplXCIpLFxuICAgICAgICAgICAgcmVzaXplRXZlbnRMaXN0ZW5lcnNMZW5ndGggPSByZXNpemVFdmVudExpc3RlbmVycy5sZW5ndGg7XG5cbiAgICAgIGlmIChyZXNpemVFdmVudExpc3RlbmVyc0xlbmd0aCA9PT0gMCkge1xuICAgICAgICByZW1vdmVSZXNpemVPYmplY3QodGhpcyk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGhhbmRsZXIsIGVsZW1lbnQgPSB0aGlzKSB7XG4gIGlmICghdGhpcy5oYXNPd25Qcm9wZXJ0eShcImV2ZW50TGlzdGVuZXJzXCIpKSB7XG4gICAgdGhpcy5ldmVudExpc3RlbmVycyA9IFtdO1xuICB9XG5cbiAgY29uc3QgZXZlbnRMaXN0ZW5lciA9IGNyZWF0ZUV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBoYW5kbGVyLCBlbGVtZW50KTtcblxuICB0aGlzLmV2ZW50TGlzdGVuZXJzLnB1c2goZXZlbnRMaXN0ZW5lcik7XG5cbiAgcmV0dXJuIGV2ZW50TGlzdGVuZXI7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBoYW5kbGVyLCBlbGVtZW50ID0gdGhpcykge1xuICBjb25zdCBldmVudExpc3RlbmVyID0gdGhpcy5maW5kRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGhhbmRsZXIsIGVsZW1lbnQpLFxuICAgICAgICBpbmRleCA9IHRoaXMuZXZlbnRMaXN0ZW5lcnMuaW5kZXhPZihldmVudExpc3RlbmVyKSxcbiAgICAgICAgc3RhcnQgPSBpbmRleCwgIC8vL1xuICAgICAgICBkZWxldGVDb3VudCA9IDE7XG5cbiAgdGhpcy5ldmVudExpc3RlbmVycy5zcGxpY2Uoc3RhcnQsIGRlbGV0ZUNvdW50KTtcblxuICBpZiAodGhpcy5ldmVudExpc3RlbmVycy5sZW5ndGggPT09IDApIHtcbiAgICBkZWxldGUgdGhpcy5ldmVudExpc3RlbmVycztcbiAgfVxuXG4gIHJldHVybiBldmVudExpc3RlbmVyO1xufVxuXG5mdW5jdGlvbiBmaW5kRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGhhbmRsZXIsIGVsZW1lbnQpIHtcbiAgY29uc3QgZXZlbnRMaXN0ZW5lciA9IHRoaXMuZXZlbnRMaXN0ZW5lcnMuZmluZCgoZXZlbnRMaXN0ZW5lcikgPT4ge1xuICAgIGNvbnN0IGZvdW5kID0gKCAoZXZlbnRMaXN0ZW5lci5lbGVtZW50ID09PSBlbGVtZW50KSAmJlxuICAgICAgICAgICAgICAgICAgICAoZXZlbnRMaXN0ZW5lci5oYW5kbGVyID09PSBoYW5kbGVyKSAmJlxuICAgICAgICAgICAgICAgICAgICAoZXZlbnRMaXN0ZW5lci5ldmVudFR5cGUgPT09IGV2ZW50VHlwZSkgKTtcblxuICAgIGlmIChmb3VuZCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gZXZlbnRMaXN0ZW5lcjtcbn1cblxuZnVuY3Rpb24gZmluZEV2ZW50TGlzdGVuZXJzKGV2ZW50VHlwZSkge1xuICBjb25zdCBldmVudExpc3RlbmVycyA9IFtdO1xuXG4gIGlmICh0aGlzLmhhc093blByb3BlcnR5KFwiZXZlbnRMaXN0ZW5lcnNcIikpIHtcbiAgICB0aGlzLmV2ZW50TGlzdGVuZXJzLmZvckVhY2goKGV2ZW50TGlzdGVuZXIpID0+IHtcbiAgICAgIGNvbnN0IGZvdW5kID0gKGV2ZW50TGlzdGVuZXIuZXZlbnRUeXBlID09PSBldmVudFR5cGUpO1xuXG4gICAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgZXZlbnRMaXN0ZW5lcnMucHVzaChldmVudExpc3RlbmVyKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBldmVudExpc3RlbmVycztcbn1cblxuZnVuY3Rpb24gY3JlYXRlRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGhhbmRsZXIsIGVsZW1lbnQpIHtcbiAgbGV0IGV2ZW50TGlzdGVuZXI7XG5cbiAgZXZlbnRMaXN0ZW5lciA9IChldmVudCkgPT4ge1xuICAgIGhhbmRsZXIuY2FsbChlbGVtZW50LCBldmVudCwgZWxlbWVudClcbiAgfTtcblxuICBPYmplY3QuYXNzaWduKGV2ZW50TGlzdGVuZXIsIHtcbiAgICBlbGVtZW50LFxuICAgIGhhbmRsZXIsXG4gICAgZXZlbnRUeXBlXG4gIH0pO1xuXG4gIHJldHVybiBldmVudExpc3RlbmVyO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG9uLFxuICBvZmYsXG4gIGFkZEV2ZW50TGlzdGVuZXIsXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXIsXG4gIGZpbmRFdmVudExpc3RlbmVyLFxuICBmaW5kRXZlbnRMaXN0ZW5lcnNcbn07XG4iXX0=