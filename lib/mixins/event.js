"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _resize = require("./resize");

function on(eventTypes, handler, element) {
  var _this = this;

  eventTypes = eventTypes.split(" "); ///

  eventTypes.forEach(function (eventType) {
    if (eventType === "resize") {
      var resizeEventListeners = _this.findEventListeners("resize"),
          resizeEventListenersLength = resizeEventListeners.length;

      if (resizeEventListenersLength === 0) {
        _this.addResizeObject();
      }
    }

    var eventListener = _this.addEventListener(eventType, handler, element);

    _this.domElement.addEventListener(eventType, eventListener);
  });
}

function off(eventTypes, handler, element) {
  var _this2 = this;

  eventTypes = eventTypes.split(" "); ///

  eventTypes.forEach(function (eventType) {
    var eventListener = _this2.removeEventListener(eventType, handler, element);

    _this2.domElement.removeEventListener(eventType, eventListener);

    if (eventType === "resize") {
      var resizeEventListeners = _this2.findEventListeners("resize"),
          resizeEventListenersLength = resizeEventListeners.length;

      if (resizeEventListenersLength === 0) {
        (0, _resize.removeResizeObject)(_this2);
      }
    }
  });
}

function addEventListener(eventType, handler) {
  var element = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this;

  if (!this.hasOwnProperty("eventListeners")) {
    this.eventListeners = [];
  }

  var eventListener = createEventListener(eventType, handler, element);
  this.eventListeners.push(eventListener);
  return eventListener;
}

function removeEventListener(eventType, handler) {
  var element = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this;
  var eventListener = this.findEventListener(eventType, handler, element),
      index = this.eventListeners.indexOf(eventListener),
      start = index,
      ///
  deleteCount = 1;
  this.eventListeners.splice(start, deleteCount);

  if (this.eventListeners.length === 0) {
    delete this.eventListeners;
  }

  return eventListener;
}

function findEventListener(eventType, handler, element) {
  var eventListener = this.eventListeners.find(function (eventListener) {
    var found = eventListener.element === element && eventListener.handler === handler && eventListener.eventType === eventType;

    if (found) {
      return true;
    }
  });
  return eventListener;
}

function findEventListeners(eventType) {
  var eventListeners = [];

  if (this.hasOwnProperty("eventListeners")) {
    this.eventListeners.forEach(function (eventListener) {
      var found = eventListener.eventType === eventType;

      if (found) {
        eventListeners.push(eventListener);
      }
    });
  }

  return eventListeners;
}

function createEventListener(eventType, handler, element) {
  var eventListener;

  eventListener = function eventListener(event) {
    handler.call(element, event, element);
  };

  Object.assign(eventListener, {
    element: element,
    handler: handler,
    eventType: eventType
  });
  return eventListener;
}

var eventMixins = {
  on: on,
  off: off,
  addEventListener: addEventListener,
  removeEventListener: removeEventListener,
  findEventListener: findEventListener,
  findEventListeners: findEventListeners
};
var _default = eventMixins;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV2ZW50LmpzIl0sIm5hbWVzIjpbIm9uIiwiZXZlbnRUeXBlcyIsImhhbmRsZXIiLCJlbGVtZW50Iiwic3BsaXQiLCJmb3JFYWNoIiwiZXZlbnRUeXBlIiwicmVzaXplRXZlbnRMaXN0ZW5lcnMiLCJmaW5kRXZlbnRMaXN0ZW5lcnMiLCJyZXNpemVFdmVudExpc3RlbmVyc0xlbmd0aCIsImxlbmd0aCIsImFkZFJlc2l6ZU9iamVjdCIsImV2ZW50TGlzdGVuZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiZG9tRWxlbWVudCIsIm9mZiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJoYXNPd25Qcm9wZXJ0eSIsImV2ZW50TGlzdGVuZXJzIiwiY3JlYXRlRXZlbnRMaXN0ZW5lciIsInB1c2giLCJmaW5kRXZlbnRMaXN0ZW5lciIsImluZGV4IiwiaW5kZXhPZiIsInN0YXJ0IiwiZGVsZXRlQ291bnQiLCJzcGxpY2UiLCJmaW5kIiwiZm91bmQiLCJldmVudCIsImNhbGwiLCJPYmplY3QiLCJhc3NpZ24iLCJldmVudE1peGlucyJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7QUFFQTs7QUFFQSxTQUFTQSxFQUFULENBQVlDLFVBQVosRUFBd0JDLE9BQXhCLEVBQWlDQyxPQUFqQyxFQUEwQztBQUFBOztBQUN4Q0YsRUFBQUEsVUFBVSxHQUFHQSxVQUFVLENBQUNHLEtBQVgsQ0FBaUIsR0FBakIsQ0FBYixDQUR3QyxDQUNKOztBQUVwQ0gsRUFBQUEsVUFBVSxDQUFDSSxPQUFYLENBQW1CLFVBQUNDLFNBQUQsRUFBZTtBQUNoQyxRQUFJQSxTQUFTLEtBQUssUUFBbEIsRUFBNEI7QUFDMUIsVUFBTUMsb0JBQW9CLEdBQUcsS0FBSSxDQUFDQyxrQkFBTCxDQUF3QixRQUF4QixDQUE3QjtBQUFBLFVBQ01DLDBCQUEwQixHQUFHRixvQkFBb0IsQ0FBQ0csTUFEeEQ7O0FBR0EsVUFBSUQsMEJBQTBCLEtBQUssQ0FBbkMsRUFBc0M7QUFDcEMsUUFBQSxLQUFJLENBQUNFLGVBQUw7QUFD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QkFBa0IsRUFBbEJBO0FBTmtCLENBQXBCO2VBU2V5QixXIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7cmVtb3ZlUmVzaXplT2JqZWN0fSBmcm9tIFwiLi9yZXNpemVcIjtcblxuZnVuY3Rpb24gb24oZXZlbnRUeXBlcywgaGFuZGxlciwgZWxlbWVudCkge1xuICBldmVudFR5cGVzID0gZXZlbnRUeXBlcy5zcGxpdChcIiBcIik7IC8vL1xuXG4gIGV2ZW50VHlwZXMuZm9yRWFjaCgoZXZlbnRUeXBlKSA9PiB7XG4gICAgaWYgKGV2ZW50VHlwZSA9PT0gXCJyZXNpemVcIikge1xuICAgICAgY29uc3QgcmVzaXplRXZlbnRMaXN0ZW5lcnMgPSB0aGlzLmZpbmRFdmVudExpc3RlbmVycyhcInJlc2l6ZVwiKSxcbiAgICAgICAgICAgIHJlc2l6ZUV2ZW50TGlzdGVuZXJzTGVuZ3RoID0gcmVzaXplRXZlbnRMaXN0ZW5lcnMubGVuZ3RoO1xuXG4gICAgICBpZiAocmVzaXplRXZlbnRMaXN0ZW5lcnNMZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy5hZGRSZXNpemVPYmplY3QoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBldmVudExpc3RlbmVyID0gdGhpcy5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgaGFuZGxlciwgZWxlbWVudCk7XG5cbiAgICB0aGlzLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGV2ZW50TGlzdGVuZXIpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gb2ZmKGV2ZW50VHlwZXMsIGhhbmRsZXIsIGVsZW1lbnQpIHtcbiAgZXZlbnRUeXBlcyA9IGV2ZW50VHlwZXMuc3BsaXQoXCIgXCIpOyAvLy9cblxuICBldmVudFR5cGVzLmZvckVhY2goKGV2ZW50VHlwZSkgPT4ge1xuICAgIGNvbnN0IGV2ZW50TGlzdGVuZXIgPSB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBoYW5kbGVyLCBlbGVtZW50KTtcblxuICAgIHRoaXMuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgZXZlbnRMaXN0ZW5lcik7XG5cbiAgICBpZiAoZXZlbnRUeXBlID09PSBcInJlc2l6ZVwiKSB7XG4gICAgICBjb25zdCByZXNpemVFdmVudExpc3RlbmVycyA9IHRoaXMuZmluZEV2ZW50TGlzdGVuZXJzKFwicmVzaXplXCIpLFxuICAgICAgICAgICAgcmVzaXplRXZlbnRMaXN0ZW5lcnNMZW5ndGggPSByZXNpemVFdmVudExpc3RlbmVycy5sZW5ndGg7XG5cbiAgICAgIGlmIChyZXNpemVFdmVudExpc3RlbmVyc0xlbmd0aCA9PT0gMCkge1xuICAgICAgICByZW1vdmVSZXNpemVPYmplY3QodGhpcyk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGhhbmRsZXIsIGVsZW1lbnQgPSB0aGlzKSB7XG4gIGlmICghdGhpcy5oYXNPd25Qcm9wZXJ0eShcImV2ZW50TGlzdGVuZXJzXCIpKSB7XG4gICAgdGhpcy5ldmVudExpc3RlbmVycyA9IFtdO1xuICB9XG5cbiAgY29uc3QgZXZlbnRMaXN0ZW5lciA9IGNyZWF0ZUV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBoYW5kbGVyLCBlbGVtZW50KTtcblxuICB0aGlzLmV2ZW50TGlzdGVuZXJzLnB1c2goZXZlbnRMaXN0ZW5lcik7XG5cbiAgcmV0dXJuIGV2ZW50TGlzdGVuZXI7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBoYW5kbGVyLCBlbGVtZW50ID0gdGhpcykge1xuICBjb25zdCBldmVudExpc3RlbmVyID0gdGhpcy5maW5kRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGhhbmRsZXIsIGVsZW1lbnQpLFxuICAgICAgICBpbmRleCA9IHRoaXMuZXZlbnRMaXN0ZW5lcnMuaW5kZXhPZihldmVudExpc3RlbmVyKSxcbiAgICAgICAgc3RhcnQgPSBpbmRleCwgIC8vL1xuICAgICAgICBkZWxldGVDb3VudCA9IDE7XG5cbiAgdGhpcy5ldmVudExpc3RlbmVycy5zcGxpY2Uoc3RhcnQsIGRlbGV0ZUNvdW50KTtcblxuICBpZiAodGhpcy5ldmVudExpc3RlbmVycy5sZW5ndGggPT09IDApIHtcbiAgICBkZWxldGUgdGhpcy5ldmVudExpc3RlbmVycztcbiAgfVxuXG4gIHJldHVybiBldmVudExpc3RlbmVyO1xufVxuXG5mdW5jdGlvbiBmaW5kRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGhhbmRsZXIsIGVsZW1lbnQpIHtcbiAgY29uc3QgZXZlbnRMaXN0ZW5lciA9IHRoaXMuZXZlbnRMaXN0ZW5lcnMuZmluZCgoZXZlbnRMaXN0ZW5lcikgPT4ge1xuICAgIGNvbnN0IGZvdW5kID0gKCAoZXZlbnRMaXN0ZW5lci5lbGVtZW50ID09PSBlbGVtZW50KSAmJlxuICAgICAgICAgICAgICAgICAgICAoZXZlbnRMaXN0ZW5lci5oYW5kbGVyID09PSBoYW5kbGVyKSAmJlxuICAgICAgICAgICAgICAgICAgICAoZXZlbnRMaXN0ZW5lci5ldmVudFR5cGUgPT09IGV2ZW50VHlwZSkgKTtcblxuICAgIGlmIChmb3VuZCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gZXZlbnRMaXN0ZW5lcjtcbn1cblxuZnVuY3Rpb24gZmluZEV2ZW50TGlzdGVuZXJzKGV2ZW50VHlwZSkge1xuICBjb25zdCBldmVudExpc3RlbmVycyA9IFtdO1xuXG4gIGlmICh0aGlzLmhhc093blByb3BlcnR5KFwiZXZlbnRMaXN0ZW5lcnNcIikpIHtcbiAgICB0aGlzLmV2ZW50TGlzdGVuZXJzLmZvckVhY2goKGV2ZW50TGlzdGVuZXIpID0+IHtcbiAgICAgIGNvbnN0IGZvdW5kID0gKGV2ZW50TGlzdGVuZXIuZXZlbnRUeXBlID09PSBldmVudFR5cGUpO1xuXG4gICAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgZXZlbnRMaXN0ZW5lcnMucHVzaChldmVudExpc3RlbmVyKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBldmVudExpc3RlbmVycztcbn1cblxuZnVuY3Rpb24gY3JlYXRlRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGhhbmRsZXIsIGVsZW1lbnQpIHtcbiAgbGV0IGV2ZW50TGlzdGVuZXI7XG5cbiAgZXZlbnRMaXN0ZW5lciA9IChldmVudCkgPT4ge1xuICAgIGhhbmRsZXIuY2FsbChlbGVtZW50LCBldmVudCwgZWxlbWVudClcbiAgfTtcblxuICBPYmplY3QuYXNzaWduKGV2ZW50TGlzdGVuZXIsIHtcbiAgICBlbGVtZW50LFxuICAgIGhhbmRsZXIsXG4gICAgZXZlbnRUeXBlXG4gIH0pO1xuXG4gIHJldHVybiBldmVudExpc3RlbmVyO1xufVxuXG5jb25zdCBldmVudE1peGlucyA9IHtcbiAgb24sXG4gIG9mZixcbiAgYWRkRXZlbnRMaXN0ZW5lcixcbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcixcbiAgZmluZEV2ZW50TGlzdGVuZXIsXG4gIGZpbmRFdmVudExpc3RlbmVyc1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZXZlbnRNaXhpbnM7XG4iXX0=