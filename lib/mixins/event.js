"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.on = on;
exports.off = off;
exports.addEventListener = addEventListener;
exports.removeEventListener = removeEventListener;

function on(eventTypes, handler) {
  var _this = this;

  var element = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this;
  var intermediateHandler = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;
  eventTypes = eventTypes.split(" "); ///

  eventTypes.forEach(function (eventType) {
    var eventListener = _this.addEventListener(eventType, handler, element, intermediateHandler);

    _this.domElement.addEventListener(eventType, eventListener);
  });
}

function off(eventTypes, handler) {
  var _this2 = this;

  var element = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this;
  eventTypes = eventTypes.split(" "); ///

  eventTypes.forEach(function (eventType) {
    var eventListener = _this2.removeEventListener(eventType, handler, element);

    _this2.domElement.removeEventListener(eventType, eventListener);
  });
}

function addEventListener(eventType, handler, element, intermediateHandler) {
  if (!this.hasOwnProperty("eventListeners")) {
    this.eventListeners = [];
  }

  var eventListeners = this.eventListeners,
      eventListener = createEventListener(eventType, handler, element, intermediateHandler);
  eventListeners.push(eventListener);
  return eventListener;
}

function removeEventListener(eventType, handler, element) {
  var eventListeners = this.eventListeners,
      eventListener = findEventListener(eventListeners, eventType, handler, element),
      index = eventListeners.indexOf(eventListener),
      start = index,
      ///
  deleteCount = 1;
  eventListeners.splice(start, deleteCount);

  if (eventListeners.length === 0) {
    delete this.eventListeners;
  }

  return eventListener;
}

function createEventListener(eventType, handler, element, intermediateHandler) {
  var eventListener;

  if (intermediateHandler === null) {
    eventListener = function eventListener(event) {
      handler.call(element, event, element);
    };
  } else {
    eventListener = function eventListener(event) {
      intermediateHandler(handler, event, element);
    };
  }

  Object.assign(eventListener, {
    eventType: eventType,
    handler: handler,
    element: element
  });
  return eventListener;
}

function findEventListener(eventListeners, eventType, handler, element) {
  var eventListener = eventListeners.find(function (eventListener) {
    if (eventListener.eventType === eventType && eventListener.element === element && eventListener.handler === handler) {
      return true;
    }
  });
  return eventListener;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV2ZW50LmpzIl0sIm5hbWVzIjpbIm9uIiwiZXZlbnRUeXBlcyIsImhhbmRsZXIiLCJlbGVtZW50IiwiaW50ZXJtZWRpYXRlSGFuZGxlciIsInNwbGl0IiwiZm9yRWFjaCIsImV2ZW50VHlwZSIsImV2ZW50TGlzdGVuZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiZG9tRWxlbWVudCIsIm9mZiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJoYXNPd25Qcm9wZXJ0eSIsImV2ZW50TGlzdGVuZXJzIiwiY3JlYXRlRXZlbnRMaXN0ZW5lciIsInB1c2giLCJmaW5kRXZlbnRMaXN0ZW5lciIsImluZGV4IiwiaW5kZXhPZiIsInN0YXJ0IiwiZGVsZXRlQ291bnQiLCJzcGxpY2UiLCJsZW5ndGgiLCJldmVudCIsImNhbGwiLCJPYmplY3QiLCJhc3NpZ24iLCJmaW5kIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7OztBQUVPLFNBQVNBLEVBQVQsQ0FBWUMsVUFBWixFQUF3QkMsT0FBeEIsRUFBNkU7QUFBQTs7QUFBQSxNQUE1Q0MsT0FBNEMsdUVBQWxDLElBQWtDO0FBQUEsTUFBNUJDLG1CQUE0Qix1RUFBTixJQUFNO0FBQ2xGSCxFQUFBQSxVQUFVLEdBQUdBLFVBQVUsQ0FBQ0ksS0FBWCxDQUFpQixHQUFqQixDQUFiLENBRGtGLENBQzlDOztBQUVwQ0osRUFBQUEsVUFBVSxDQUFDSyxPQUFYLENBQW1CLFVBQUNDLFNBQUQsRUFBZTtBQUNoQyxRQUFNQyxhQUFhLEdBQUcsS0FBSSxDQUFDQyxnQkFBTCxDQUFzQkYsU0FBdEIsRUFBaUNMLE9BQWpDLEVBQTBDQyxPQUExQyxFQUFtREMsbUJBQW5ELENBQXRCOztBQUVBLElBQUEsS0FBSSxDQUFDTSxVQUFMLENBQWdCRCxnQkFBaEIsQ0FBaUNGLFNBQWpDLEVBQTRDQyxhQUE1QztBQUNELEdBSkQ7QUFLRDs7QUFFTSxTQUFTRyxHQUFULENBQWFWLFVBQWIsRUFBeUJDLE9BQXpCLEVBQWtEO0FBQUE7O0FBQUEsTUFBaEJDLE9BQWdCLHVFQUFOLElBQU07QUFDdkRGLEVBQUFBLFVBQVUsR0FBR0EsVUFBVSxDQUFDSSxLQUFYLENBQWlCLEdBQWpCLENBQWIsQ0FEdUQsQ0FDbkI7O0FBRXBDSixFQUFBQSxVQUFVLENBQUNLLE9BQVgsQ0FBbUIsVUFBQ0MsU0FBRCxFQUFlO0FBQ2hDLFFBQU1DLGFBQWEsR0FBRyxNQUFJLENBQUNJLG1CQUFMLENBQXlCTCxTQUF6QixFQUFvQ0wsT0FBcEMsRUFBNkNDLE9BQTdDLENBQXRCOztBQUVBLElBQUEsTUFBSSxDQUFDTyxVQUFMLENBQWdCRSxtQkFBaEIsQ0FBb0NMLFNBQXBDLEVBQStDQyxhQUEvQztBQUNELEdBSkQ7QUFLRDs7QUFFTSxTQUFTQyxnQkFBVCxDQUEwQkYsU0FBMUIsRUFBcUNMLE9BQXJDLEVBQThDQyxPQUE5QyxFQUF1REMsbUJBQXZELEVBQTRFO0FBQ2pGLE1BQUksQ0FBQyxLQUFLUyxjQUFMLENBQW9CLGdCQUFwQixDQUFMLEVBQTRDO0FBQzFDLFNBQUtDLGNBQUwsR0FBc0IsRUFBdEI7QUFDRDs7QUFFRCxNQUFNQSxjQUFjLEdBQUcsS0FBS0EsY0FBNUI7QUFBQSxNQUNNTixhQUFhLEdBQUdPLG1CQUFtQixDQUFDUixTQUFELEVBQVlMLE9BQVosRUFBcUJDLE9BQXJCLEVBQThCQyxtQkFBOUIsQ0FEekM7QUFHQVUsRUFBQUEsY0FBYyxDQUFDRSxJQUFmLENBQW9CUixhQUFwQjtBQUVBLFNBQU9BLGFBQVA7QUFDRDs7QUFFTSxTQUFTSSxtQkFBVCxDQUE2QkwsU0FBN0IsRUFBd0NMLE9BQXhDLEVBQWlEQyxPQUFqRCxFQUEwRDtBQUMvRCxNQUFNVyxjQUFjLEdBQUcsS0FBS0EsY0FBNUI7QUFBQSxNQUNNTixhQUFhLEdBQUdTLGlCQUFpQixDQUFDSCxjQUFELEVBQWlCUCxTQUFqQixFQUE0QkwsT0FBNUIsRUFBcUNDLE9BQXJDLENBRHZDO0FBQUEsTUFFTWUsS0FBSyxHQUFHSixjQUFjLENBQUNLLE9BQWYsQ0FBdUJYLGFBQXZCLENBRmQ7QUFBQSxNQUdNWSxLQUFLLEdBQUdGLEtBSGQ7QUFBQSxNQUdzQjtBQUNoQkcsRUFBQUEsV0FBVyxHQUFHLENBSnBCO0FBTUFQLEVBQUFBLGNBQWMsQ0FBQ1EsTUFBZixDQUFzQkYsS0FBdEIsRUFBNkJDLFdBQTdCOztBQUVBLE1BQUlQLGNBQWMsQ0FBQ1MsTUFBZixLQUEwQixDQUE5QixFQUFpQztBQUMvQixXQUFPLEtBQUtULGNBQVo7QUFDRDs7QUFFRCxTQUFPTixhQUFQO0FBQ0Q7O0FBRUQsU0FBU08sbUJBQVQsQ0FBNkJSLFNBQTdCLEVBQXdDTCxPQUF4QyxFQUFpREMsT0FBakQsRUFBMERDLG1CQUExRCxFQUErRTtBQUM3RSxNQUFJSSxhQUFKOztBQUVBLE1BQUlKLG1CQUFtQixLQUFLLElBQTVCLEVBQWtDO0FBQ2hDSSxJQUFBQSxhQUFhLEdBQUcsdUJBQVNnQixLQUFULEVBQWdCO0FBQzlCdEIsTUFBQUEsT0FBTyxDQUFDdUIsSUFBUixDQUFhdEIsT0FBYixFQUFzQnFCLEtBQXRCLEVBQTZCckIsT0FBN0I7QUFDRCxLQUZEO0FBR0QsR0FKRCxNQUlPO0FBQ0xLLElBQUFBLGFBQWEsR0FBRyx1QkFBU2dCLEtBQVQsRUFBZ0I7QUFDOUJwQixNQUFBQSxtQkFBbUIsQ0FBQ0YsT0FBRCxFQUFVc0IsS0FBVixFQUFpQnJCLE9BQWpCLENBQW5CO0FBQ0QsS0FGRDtBQUdEOztBQUVEdUIsRUFBQUEsTUFBTSxDQUFDQyxNQUFQLENBQWNuQixhQUFkLEVBQTZCO0FBQzNCRCxJQUFBQSxTQUFTLEVBQVRBLFNBRDJCO0FBRTNCTCxJQUFBQSxPQUFPLEVBQVBBLE9BRjJCO0FBRzNCQyxJQUFBQSxPQUFPLEVBQVBBO0FBSDJCLEdBQTdCO0FBTUEsU0FBT0ssYUFBUDtBQUNEOztBQUVELFNBQVNTLGlCQUFULENBQTJCSCxjQUEzQixFQUEyQ1AsU0FBM0MsRUFBc0RMLE9BQXRELEVBQStEQyxPQUEvRCxFQUF3RTtBQUN0RSxNQUFNSyxhQUFhLEdBQUdNLGNBQWMsQ0FBQ2MsSUFBZixDQUFvQixVQUFTcEIsYUFBVCxFQUF3QjtBQUNoRSxRQUFNQSxhQUFhLENBQUNELFNBQWQsS0FBNEJBLFNBQTdCLElBQTRDQyxhQUFhLENBQUNMLE9BQWQsS0FBMEJBLE9BQXRFLElBQW1GSyxhQUFhLENBQUNOLE9BQWQsS0FBMEJBLE9BQWxILEVBQTZIO0FBQzNILGFBQU8sSUFBUDtBQUNEO0FBQ0YsR0FKcUIsQ0FBdEI7QUFNQSxTQUFPTSxhQUFQO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIG9uKGV2ZW50VHlwZXMsIGhhbmRsZXIsIGVsZW1lbnQgPSB0aGlzLCBpbnRlcm1lZGlhdGVIYW5kbGVyID0gbnVsbCkge1xuICBldmVudFR5cGVzID0gZXZlbnRUeXBlcy5zcGxpdChcIiBcIik7IC8vL1xuXG4gIGV2ZW50VHlwZXMuZm9yRWFjaCgoZXZlbnRUeXBlKSA9PiB7XG4gICAgY29uc3QgZXZlbnRMaXN0ZW5lciA9IHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGhhbmRsZXIsIGVsZW1lbnQsIGludGVybWVkaWF0ZUhhbmRsZXIpO1xuICAgIFxuICAgIHRoaXMuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgZXZlbnRMaXN0ZW5lcik7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gb2ZmKGV2ZW50VHlwZXMsIGhhbmRsZXIsIGVsZW1lbnQgPSB0aGlzKSB7XG4gIGV2ZW50VHlwZXMgPSBldmVudFR5cGVzLnNwbGl0KFwiIFwiKTsgLy8vXG5cbiAgZXZlbnRUeXBlcy5mb3JFYWNoKChldmVudFR5cGUpID0+IHtcbiAgICBjb25zdCBldmVudExpc3RlbmVyID0gdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgaGFuZGxlciwgZWxlbWVudCk7XG5cbiAgICB0aGlzLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGV2ZW50TGlzdGVuZXIpO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBoYW5kbGVyLCBlbGVtZW50LCBpbnRlcm1lZGlhdGVIYW5kbGVyKSB7XG4gIGlmICghdGhpcy5oYXNPd25Qcm9wZXJ0eShcImV2ZW50TGlzdGVuZXJzXCIpKSB7XG4gICAgdGhpcy5ldmVudExpc3RlbmVycyA9IFtdO1xuICB9XG5cbiAgY29uc3QgZXZlbnRMaXN0ZW5lcnMgPSB0aGlzLmV2ZW50TGlzdGVuZXJzLFxuICAgICAgICBldmVudExpc3RlbmVyID0gY3JlYXRlRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGhhbmRsZXIsIGVsZW1lbnQsIGludGVybWVkaWF0ZUhhbmRsZXIpO1xuXG4gIGV2ZW50TGlzdGVuZXJzLnB1c2goZXZlbnRMaXN0ZW5lcik7XG5cbiAgcmV0dXJuIGV2ZW50TGlzdGVuZXI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgaGFuZGxlciwgZWxlbWVudCkge1xuICBjb25zdCBldmVudExpc3RlbmVycyA9IHRoaXMuZXZlbnRMaXN0ZW5lcnMsXG4gICAgICAgIGV2ZW50TGlzdGVuZXIgPSBmaW5kRXZlbnRMaXN0ZW5lcihldmVudExpc3RlbmVycywgZXZlbnRUeXBlLCBoYW5kbGVyLCBlbGVtZW50KSxcbiAgICAgICAgaW5kZXggPSBldmVudExpc3RlbmVycy5pbmRleE9mKGV2ZW50TGlzdGVuZXIpLFxuICAgICAgICBzdGFydCA9IGluZGV4LCAgLy8vXG4gICAgICAgIGRlbGV0ZUNvdW50ID0gMTtcblxuICBldmVudExpc3RlbmVycy5zcGxpY2Uoc3RhcnQsIGRlbGV0ZUNvdW50KTtcblxuICBpZiAoZXZlbnRMaXN0ZW5lcnMubGVuZ3RoID09PSAwKSB7XG4gICAgZGVsZXRlIHRoaXMuZXZlbnRMaXN0ZW5lcnM7XG4gIH1cblxuICByZXR1cm4gZXZlbnRMaXN0ZW5lcjtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGhhbmRsZXIsIGVsZW1lbnQsIGludGVybWVkaWF0ZUhhbmRsZXIpIHtcbiAgbGV0IGV2ZW50TGlzdGVuZXI7XG5cbiAgaWYgKGludGVybWVkaWF0ZUhhbmRsZXIgPT09IG51bGwpIHtcbiAgICBldmVudExpc3RlbmVyID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGhhbmRsZXIuY2FsbChlbGVtZW50LCBldmVudCwgZWxlbWVudClcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgaW50ZXJtZWRpYXRlSGFuZGxlcihoYW5kbGVyLCBldmVudCwgZWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgT2JqZWN0LmFzc2lnbihldmVudExpc3RlbmVyLCB7XG4gICAgZXZlbnRUeXBlLFxuICAgIGhhbmRsZXIsXG4gICAgZWxlbWVudFxuICB9KTtcblxuICByZXR1cm4gZXZlbnRMaXN0ZW5lcjtcbn1cblxuZnVuY3Rpb24gZmluZEV2ZW50TGlzdGVuZXIoZXZlbnRMaXN0ZW5lcnMsIGV2ZW50VHlwZSwgaGFuZGxlciwgZWxlbWVudCkge1xuICBjb25zdCBldmVudExpc3RlbmVyID0gZXZlbnRMaXN0ZW5lcnMuZmluZChmdW5jdGlvbihldmVudExpc3RlbmVyKSB7XG4gICAgaWYgKCAoZXZlbnRMaXN0ZW5lci5ldmVudFR5cGUgPT09IGV2ZW50VHlwZSkgJiYgKGV2ZW50TGlzdGVuZXIuZWxlbWVudCA9PT0gZWxlbWVudCkgJiYgKGV2ZW50TGlzdGVuZXIuaGFuZGxlciA9PT0gaGFuZGxlcikgKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0pO1xuICBcbiAgcmV0dXJuIGV2ZW50TGlzdGVuZXI7XG59XG4iXX0=