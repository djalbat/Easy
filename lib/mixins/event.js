"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.on = on;
exports.off = off;
exports.addEventListener = addEventListener;
exports.removeEventListener = removeEventListener;
exports.findEventListener = findEventListener;
exports.findEventListeners = findEventListeners;

var _resize = require("./resize");

function on(eventTypes, handler, element) {
  var _this = this;

  eventTypes = eventTypes.split(" "); ///

  eventTypes.forEach(function (eventType) {
    if (eventType === "resize") {
      var resizeEventListeners = _this.findEventListeners("resize"),
          resizeEventListenersLength = resizeEventListeners.length;

      if (resizeEventListenersLength === 0) {
        _this.addResizeObject();
      }
    }

    var eventListener = _this.addEventListener(eventType, handler, element);

    _this.domElement.addEventListener(eventType, eventListener);
  });
}

function off(eventTypes, handler, element) {
  var _this2 = this;

  eventTypes = eventTypes.split(" "); ///

  eventTypes.forEach(function (eventType) {
    var eventListener = _this2.removeEventListener(eventType, handler, element);

    _this2.domElement.removeEventListener(eventType, eventListener);

    if (eventType === "resize") {
      var resizeEventListeners = _this2.findEventListeners("resize"),
          resizeEventListenersLength = resizeEventListeners.length;

      if (resizeEventListenersLength === 0) {
        (0, _resize.removeResizeObject)(_this2);
      }
    }
  });
}

function addEventListener(eventType, handler) {
  var element = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this;

  if (!this.hasOwnProperty("eventListeners")) {
    this.eventListeners = [];
  }

  var eventListener = createEventListener(eventType, handler, element);
  this.eventListeners.push(eventListener);
  return eventListener;
}

function removeEventListener(eventType, handler) {
  var element = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this;
  var eventListener = this.findEventListener(eventType, handler, element),
      index = this.eventListeners.indexOf(eventListener),
      start = index,
      ///
  deleteCount = 1;
  this.eventListeners.splice(start, deleteCount);

  if (this.eventListeners.length === 0) {
    delete this.eventListeners;
  }

  return eventListener;
}

function findEventListener(eventType, handler, element) {
  var eventListener = this.eventListeners.find(function (eventListener) {
    var found = eventListener.element === element && eventListener.handler === handler && eventListener.eventType === eventType;

    if (found) {
      return true;
    }
  });
  return eventListener;
}

function findEventListeners(eventType) {
  var eventListeners = [];

  if (this.hasOwnProperty("eventListeners")) {
    this.eventListeners.forEach(function (eventListener) {
      var found = eventListener.eventType === eventType;

      if (found) {
        eventListeners.push(eventListener);
      }
    });
  }

  return eventListeners;
}

function createEventListener(eventType, handler, element) {
  var eventListener;

  eventListener = function eventListener(event) {
    handler.call(element, event, element);
  };

  Object.assign(eventListener, {
    element: element,
    handler: handler,
    eventType: eventType
  });
  return eventListener;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV2ZW50LmpzIl0sIm5hbWVzIjpbIm9uIiwiZXZlbnRUeXBlcyIsImhhbmRsZXIiLCJlbGVtZW50Iiwic3BsaXQiLCJmb3JFYWNoIiwiZXZlbnRUeXBlIiwicmVzaXplRXZlbnRMaXN0ZW5lcnMiLCJmaW5kRXZlbnRMaXN0ZW5lcnMiLCJyZXNpemVFdmVudExpc3RlbmVyc0xlbmd0aCIsImxlbmd0aCIsImFkZFJlc2l6ZU9iamVjdCIsImV2ZW50TGlzdGVuZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiZG9tRWxlbWVudCIsIm9mZiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJoYXNPd25Qcm9wZXJ0eSIsImV2ZW50TGlzdGVuZXJzIiwiY3JlYXRlRXZlbnRMaXN0ZW5lciIsInB1c2giLCJmaW5kRXZlbnRMaXN0ZW5lciIsImluZGV4IiwiaW5kZXhPZiIsInN0YXJ0IiwiZGVsZXRlQ291bnQiLCJzcGxpY2UiLCJmaW5kIiwiZm91bmQiLCJldmVudCIsImNhbGwiLCJPYmplY3QiLCJhc3NpZ24iXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7QUFFQTs7QUFFTyxTQUFTQSxFQUFULENBQVlDLFVBQVosRUFBd0JDLE9BQXhCLEVBQWlDQyxPQUFqQyxFQUEwQztBQUFBOztBQUMvQ0YsRUFBQUEsVUFBVSxHQUFHQSxVQUFVLENBQUNHLEtBQVgsQ0FBaUIsR0FBakIsQ0FBYixDQUQrQyxDQUNYOztBQUVwQ0gsRUFBQUEsVUFBVSxDQUFDSSxPQUFYLENBQW1CLFVBQUNDLFNBQUQsRUFBZTtBQUNoQyxRQUFJQSxTQUFTLEtBQUssUUFBbEIsRUFBNEI7QUFDMUIsVUFBTUMsb0JBQW9CLEdBQUcsS0FBSSxDQUFDQyxrQkFBTCxDQUF3QixRQUF4QixDQUE3QjtBQUFBLFVBQ01DLDBCQUEwQixHQUFHRixvQkFBb0IsQ0FBQ0csTUFEeEQ7O0FBR0EsVUFBSUQsMEJBQTBCLEtBQUssQ0FBbkMsRUFBc0M7QUFDcEMsUUFBQSxLQUFJLENBQUNFLGVBQUw7QUFDRDtBQUNGOztB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O0FBRU0sU0FBU0osa0JBQVQsQ0FBNEJGLFNBQTVCLEVBQXVDO0FBQzVDLE1BQU1ZLGNBQWMsR0FBRyxFQUF2Qjs7QUFFQSxNQUFJLEtBQUtELGNBQUwsQ0FBb0IsZ0JBQXBCLENBQUosRUFBMkM7QUFDekMsU0FBS0MsY0FBTCxDQUFvQmIsT0FBcEIsQ0FBNEIsVUFBQ08sYUFBRCxFQUFtQjtBQUM3QyxVQUFNZ0IsS0FBSyxHQUFJaEIsYUFBYSxDQUFDTixTQUFkLEtBQTRCQSxTQUEzQzs7QUFFQSxVQUFJc0IsS0FBSixFQUFXO0FBQ1RWLFFBQUFBLGNBQWMsQ0FBQ0UsSUFBZixDQUFvQlIsYUFBcEI7QUFDRDtBQUNGLEtBTkQ7QUFPRDs7QUFFRCxTQUFPTSxjQUFQO0FBQ0Q7O0FBRUQsU0FBU0MsbUJBQVQsQ0FBNkJiLFNBQTdCLEVBQXdDSixPQUF4QyxFQUFpREMsT0FBakQsRUFBMEQ7QUFDeEQsTUFBSVMsYUFBSjs7QUFFQUEsRUFBQUEsYUFBYSxHQUFHLHVCQUFDaUIsS0FBRCxFQUFXO0FBQ3pCM0IsSUFBQUEsT0FBTyxDQUFDNEIsSUFBUixDQUFhM0IsT0FBYixFQUFzQjBCLEtBQXRCLEVBQTZCMUIsT0FBN0I7QUFDRCxHQUZEOztBQUlBNEIsRUFBQUEsTUFBTSxDQUFDQyxNQUFQLENBQWNwQixhQUFkLEVBQTZCO0FBQzNCVCxJQUFBQSxPQUFPLEVBQVBBLE9BRDJCO0FBRTNCRCxJQUFBQSxPQUFPLEVBQVBBLE9BRjJCO0FBRzNCSSxJQUFBQSxTQUFTLEVBQVRBO0FBSDJCLEdBQTdCO0FBTUEsU0FBT00sYUFBUDtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7cmVtb3ZlUmVzaXplT2JqZWN0fSBmcm9tIFwiLi9yZXNpemVcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIG9uKGV2ZW50VHlwZXMsIGhhbmRsZXIsIGVsZW1lbnQpIHtcbiAgZXZlbnRUeXBlcyA9IGV2ZW50VHlwZXMuc3BsaXQoXCIgXCIpOyAvLy9cblxuICBldmVudFR5cGVzLmZvckVhY2goKGV2ZW50VHlwZSkgPT4ge1xuICAgIGlmIChldmVudFR5cGUgPT09IFwicmVzaXplXCIpIHtcbiAgICAgIGNvbnN0IHJlc2l6ZUV2ZW50TGlzdGVuZXJzID0gdGhpcy5maW5kRXZlbnRMaXN0ZW5lcnMoXCJyZXNpemVcIiksXG4gICAgICAgICAgICByZXNpemVFdmVudExpc3RlbmVyc0xlbmd0aCA9IHJlc2l6ZUV2ZW50TGlzdGVuZXJzLmxlbmd0aDtcblxuICAgICAgaWYgKHJlc2l6ZUV2ZW50TGlzdGVuZXJzTGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRoaXMuYWRkUmVzaXplT2JqZWN0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZXZlbnRMaXN0ZW5lciA9IHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGhhbmRsZXIsIGVsZW1lbnQpO1xuXG4gICAgdGhpcy5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBldmVudExpc3RlbmVyKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvZmYoZXZlbnRUeXBlcywgaGFuZGxlciwgZWxlbWVudCkge1xuICBldmVudFR5cGVzID0gZXZlbnRUeXBlcy5zcGxpdChcIiBcIik7IC8vL1xuXG4gIGV2ZW50VHlwZXMuZm9yRWFjaCgoZXZlbnRUeXBlKSA9PiB7XG4gICAgY29uc3QgZXZlbnRMaXN0ZW5lciA9IHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGhhbmRsZXIsIGVsZW1lbnQpO1xuXG4gICAgdGhpcy5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBldmVudExpc3RlbmVyKTtcblxuICAgIGlmIChldmVudFR5cGUgPT09IFwicmVzaXplXCIpIHtcbiAgICAgIGNvbnN0IHJlc2l6ZUV2ZW50TGlzdGVuZXJzID0gdGhpcy5maW5kRXZlbnRMaXN0ZW5lcnMoXCJyZXNpemVcIiksXG4gICAgICAgICAgICByZXNpemVFdmVudExpc3RlbmVyc0xlbmd0aCA9IHJlc2l6ZUV2ZW50TGlzdGVuZXJzLmxlbmd0aDtcblxuICAgICAgaWYgKHJlc2l6ZUV2ZW50TGlzdGVuZXJzTGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJlbW92ZVJlc2l6ZU9iamVjdCh0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGhhbmRsZXIsIGVsZW1lbnQgPSB0aGlzKSB7XG4gIGlmICghdGhpcy5oYXNPd25Qcm9wZXJ0eShcImV2ZW50TGlzdGVuZXJzXCIpKSB7XG4gICAgdGhpcy5ldmVudExpc3RlbmVycyA9IFtdO1xuICB9XG5cbiAgY29uc3QgZXZlbnRMaXN0ZW5lciA9IGNyZWF0ZUV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBoYW5kbGVyLCBlbGVtZW50KTtcblxuICB0aGlzLmV2ZW50TGlzdGVuZXJzLnB1c2goZXZlbnRMaXN0ZW5lcik7XG5cbiAgcmV0dXJuIGV2ZW50TGlzdGVuZXI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgaGFuZGxlciwgZWxlbWVudCA9IHRoaXMpIHtcbiAgY29uc3QgZXZlbnRMaXN0ZW5lciA9IHRoaXMuZmluZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBoYW5kbGVyLCBlbGVtZW50KSxcbiAgICAgICAgaW5kZXggPSB0aGlzLmV2ZW50TGlzdGVuZXJzLmluZGV4T2YoZXZlbnRMaXN0ZW5lciksXG4gICAgICAgIHN0YXJ0ID0gaW5kZXgsICAvLy9cbiAgICAgICAgZGVsZXRlQ291bnQgPSAxO1xuXG4gIHRoaXMuZXZlbnRMaXN0ZW5lcnMuc3BsaWNlKHN0YXJ0LCBkZWxldGVDb3VudCk7XG5cbiAgaWYgKHRoaXMuZXZlbnRMaXN0ZW5lcnMubGVuZ3RoID09PSAwKSB7XG4gICAgZGVsZXRlIHRoaXMuZXZlbnRMaXN0ZW5lcnM7XG4gIH1cblxuICByZXR1cm4gZXZlbnRMaXN0ZW5lcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgaGFuZGxlciwgZWxlbWVudCkge1xuICBjb25zdCBldmVudExpc3RlbmVyID0gdGhpcy5ldmVudExpc3RlbmVycy5maW5kKChldmVudExpc3RlbmVyKSA9PiB7XG4gICAgY29uc3QgZm91bmQgPSAoIChldmVudExpc3RlbmVyLmVsZW1lbnQgPT09IGVsZW1lbnQpICYmXG4gICAgICAgICAgICAgICAgICAgIChldmVudExpc3RlbmVyLmhhbmRsZXIgPT09IGhhbmRsZXIpICYmXG4gICAgICAgICAgICAgICAgICAgIChldmVudExpc3RlbmVyLmV2ZW50VHlwZSA9PT0gZXZlbnRUeXBlKSApO1xuXG4gICAgaWYgKGZvdW5kKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBldmVudExpc3RlbmVyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZEV2ZW50TGlzdGVuZXJzKGV2ZW50VHlwZSkge1xuICBjb25zdCBldmVudExpc3RlbmVycyA9IFtdO1xuXG4gIGlmICh0aGlzLmhhc093blByb3BlcnR5KFwiZXZlbnRMaXN0ZW5lcnNcIikpIHtcbiAgICB0aGlzLmV2ZW50TGlzdGVuZXJzLmZvckVhY2goKGV2ZW50TGlzdGVuZXIpID0+IHtcbiAgICAgIGNvbnN0IGZvdW5kID0gKGV2ZW50TGlzdGVuZXIuZXZlbnRUeXBlID09PSBldmVudFR5cGUpO1xuXG4gICAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgZXZlbnRMaXN0ZW5lcnMucHVzaChldmVudExpc3RlbmVyKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBldmVudExpc3RlbmVycztcbn1cblxuZnVuY3Rpb24gY3JlYXRlRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGhhbmRsZXIsIGVsZW1lbnQpIHtcbiAgbGV0IGV2ZW50TGlzdGVuZXI7XG5cbiAgZXZlbnRMaXN0ZW5lciA9IChldmVudCkgPT4ge1xuICAgIGhhbmRsZXIuY2FsbChlbGVtZW50LCBldmVudCwgZWxlbWVudClcbiAgfTtcblxuICBPYmplY3QuYXNzaWduKGV2ZW50TGlzdGVuZXIsIHtcbiAgICBlbGVtZW50LFxuICAgIGhhbmRsZXIsXG4gICAgZXZlbnRUeXBlXG4gIH0pO1xuXG4gIHJldHVybiBldmVudExpc3RlbmVyO1xufVxuIl19