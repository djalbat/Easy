'use strict';

function mixin(object, element, Class) {
  var prototype = findPrototype(element, Class),
      names = Object.keys(object); ///

  names.forEach(function (name) {

    if (name === 'constructor') {
      var _constructor = object[name];

      _constructor(element);
    } else {
      var method = object[name];

      prototype[name] = method;
    }
  });
}

module.exports = mixin;

function findPrototype(element, Class) {
  var elements = [];

  findElements(element, Class, elements);

  var lastElement = last(elements),
      prototype = Object.getPrototypeOf(lastElement);

  return prototype;
}

function findElements(element, Class, elements) {
  if (element instanceof Class) {
    elements.push(element);

    element = Object.getPrototypeOf(element); ///

    findElements(element, Class, elements);
  }
}

function last(array) {
  return array[array.length - 1];
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2VzNi9taXhpbi5qcyJdLCJuYW1lcyI6WyJtaXhpbiIsIm9iamVjdCIsImVsZW1lbnQiLCJDbGFzcyIsInByb3RvdHlwZSIsImZpbmRQcm90b3R5cGUiLCJuYW1lcyIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwibmFtZSIsImNvbnN0cnVjdG9yIiwibWV0aG9kIiwibW9kdWxlIiwiZXhwb3J0cyIsImVsZW1lbnRzIiwiZmluZEVsZW1lbnRzIiwibGFzdEVsZW1lbnQiLCJsYXN0IiwiZ2V0UHJvdG90eXBlT2YiLCJwdXNoIiwiYXJyYXkiLCJsZW5ndGgiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLFNBQVNBLEtBQVQsQ0FBZUMsTUFBZixFQUF1QkMsT0FBdkIsRUFBZ0NDLEtBQWhDLEVBQXVDO0FBQ3JDLE1BQU1DLFlBQVlDLGNBQWNILE9BQWQsRUFBdUJDLEtBQXZCLENBQWxCO0FBQUEsTUFDTUcsUUFBUUMsT0FBT0MsSUFBUCxDQUFZUCxNQUFaLENBRGQsQ0FEcUMsQ0FFRjs7QUFFbkNLLFFBQU1HLE9BQU4sQ0FBYyxVQUFTQyxJQUFULEVBQWU7O0FBRTNCLFFBQUlBLFNBQVMsYUFBYixFQUE0QjtBQUMxQixVQUFNQyxlQUFjVixPQUFPUyxJQUFQLENBQXBCOztBQUVBQyxtQkFBWVQsT0FBWjtBQUNELEtBSkQsTUFJTztBQUNMLFVBQU1VLFNBQVNYLE9BQU9TLElBQVAsQ0FBZjs7QUFFQU4sZ0JBQVVNLElBQVYsSUFBa0JFLE1BQWxCO0FBQ0Q7QUFDRixHQVhEO0FBWUQ7O0FBRURDLE9BQU9DLE9BQVAsR0FBaUJkLEtBQWpCOztBQUVBLFNBQVNLLGFBQVQsQ0FBdUJILE9BQXZCLEVBQWdDQyxLQUFoQyxFQUF1QztBQUNyQyxNQUFNWSxXQUFXLEVBQWpCOztBQUVBQyxlQUFhZCxPQUFiLEVBQXNCQyxLQUF0QixFQUE2QlksUUFBN0I7O0FBRUEsTUFBTUUsY0FBY0MsS0FBS0gsUUFBTCxDQUFwQjtBQUFBLE1BQ01YLFlBQVlHLE9BQU9ZLGNBQVAsQ0FBc0JGLFdBQXRCLENBRGxCOztBQUdBLFNBQU9iLFNBQVA7QUFDRDs7QUFFRCxTQUFTWSxZQUFULENBQXNCZCxPQUF0QixFQUErQkMsS0FBL0IsRUFBc0NZLFFBQXRDLEVBQWdEO0FBQzlDLE1BQUliLG1CQUFtQkMsS0FBdkIsRUFBOEI7QUFDNUJZLGFBQVNLLElBQVQsQ0FBY2xCLE9BQWQ7O0FBRUFBLGNBQVVLLE9BQU9ZLGNBQVAsQ0FBc0JqQixPQUF0QixDQUFWLENBSDRCLENBR2M7O0FBRTFDYyxpQkFBYWQsT0FBYixFQUFzQkMsS0FBdEIsRUFBNkJZLFFBQTdCO0FBQ0Q7QUFDRjs7QUFFRCxTQUFTRyxJQUFULENBQWNHLEtBQWQsRUFBcUI7QUFBRSxTQUFPQSxNQUFNQSxNQUFNQyxNQUFOLEdBQWUsQ0FBckIsQ0FBUDtBQUFpQyIsImZpbGUiOiJtaXhpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gbWl4aW4ob2JqZWN0LCBlbGVtZW50LCBDbGFzcykge1xuICBjb25zdCBwcm90b3R5cGUgPSBmaW5kUHJvdG90eXBlKGVsZW1lbnQsIENsYXNzKSxcbiAgICAgICAgbmFtZXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyAvLy9cbiAgXG4gIG5hbWVzLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuICAgIFxuICAgIGlmIChuYW1lID09PSAnY29uc3RydWN0b3InKSB7XG4gICAgICBjb25zdCBjb25zdHJ1Y3RvciA9IG9iamVjdFtuYW1lXTtcbiAgICAgIFxuICAgICAgY29uc3RydWN0b3IoZWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IG1ldGhvZCA9IG9iamVjdFtuYW1lXTtcblxuICAgICAgcHJvdG90eXBlW25hbWVdID0gbWV0aG9kO1xuICAgIH1cbiAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbWl4aW47XG5cbmZ1bmN0aW9uIGZpbmRQcm90b3R5cGUoZWxlbWVudCwgQ2xhc3MpIHtcbiAgY29uc3QgZWxlbWVudHMgPSBbXTtcblxuICBmaW5kRWxlbWVudHMoZWxlbWVudCwgQ2xhc3MsIGVsZW1lbnRzKTtcblxuICBjb25zdCBsYXN0RWxlbWVudCA9IGxhc3QoZWxlbWVudHMpLFxuICAgICAgICBwcm90b3R5cGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YobGFzdEVsZW1lbnQpO1xuXG4gIHJldHVybiBwcm90b3R5cGU7XG59XG5cbmZ1bmN0aW9uIGZpbmRFbGVtZW50cyhlbGVtZW50LCBDbGFzcywgZWxlbWVudHMpIHtcbiAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBDbGFzcykge1xuICAgIGVsZW1lbnRzLnB1c2goZWxlbWVudCk7XG5cbiAgICBlbGVtZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGVsZW1lbnQpOyAvLy9cblxuICAgIGZpbmRFbGVtZW50cyhlbGVtZW50LCBDbGFzcywgZWxlbWVudHMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGxhc3QoYXJyYXkpIHsgcmV0dXJuIGFycmF5W2FycmF5Lmxlbmd0aCAtIDFdOyB9XG4iXX0=